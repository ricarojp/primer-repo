!function(){function e(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})}function t(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function n(e){for(var t=-1,n=0,i=e.length;i>n;n++)t=t>>>8^g[255&(t^e.charCodeAt(n))];return(-1^t)>>>0}function o(e,t){var n={};return e.forEach(function(e){n[e]=t[e]}),n}var a=angular.module("ionic.creator",["ui.router","ngSanitize","ngAnimate","ngCookies","ngResource","ionic.creator.components","smoothScroll","color.picker"]).config(["$animateProvider",function(e){e.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/),window.logger=function(){var e=null,t=null,n=null,i=!1,o={};return o.enable=function(){null!=e&&(window.console.log=e,window.console.info=t,window.console.warn=n,console.clear())},o.disable=function(){i||(e=console.log,t=console.info,n=console.warn,window.console.log=function(){},window.console.info=function(){},window.console.warn=function(){},console.clear())},o.permEnable=function(){i=!0},o}()}]).run(["$rootScope","$state","Designer","$timeout","HelpLauncher",function(e,t,n,i,o){e.showHelp=function(){o.show()},e.saveCode="saved",e.$on("$stateChangeError",function(e,n,i,o,a,r){console.log("State change error",r),r.data&&"not_logged_in"==r.data.error&&t.go("login")}),e.$on("document.loadError",function(e,n){console.error("Unable to load project:",n);var i=n.config.url.split("/");t.go("dashboard.loadError",{projectId:i[i.length-1]})}),e.$on("document.createError",function(e,t){console.error("Unable to create project:",t)}),e.$on("document.parseError",function(e,t){console.error(t)}),e.$on("document.exporter.error",function(e,t){alert("Unable to export project. See console for errors."),console.error(t)}),e.$on("document.saving",function(t,n){e.saveStatus="Saving...",e.saveCode="saving"}),e.$on("document.doneSaving",function(t,n){e.saveStatus="All changes saved",e.saveCode="saved"}),e.$on("document.saveError",function(t,n){e.saveStatus="Error saving changes",e.saveCode="error"}),e.$on("auth.error",function(e,n){console.error("Auth error",n),t.go("signup")}),e.$on("auth.expired",function(e,n){t.go("login",{expired:!0})}),e.$on("project.created",function(e,i){n.setProject(i),t.go("app",{appId:n.getDocument().getDocumentId()})})}]);!function(){window.Share={init:function(){var e=this,t=document.getElementById("dim-lights");t&&t.addEventListener("click",function(t){e.toggleDim()});for(var n=document.querySelectorAll(".toggle-buttons"),i=0;i<n.length;i++)this.initToggle(n[i]);var o=document.querySelector("#platform-toggle");o&&o.addEventListener("change",function(t){document.body.classList.remove("preview-ios"),document.body.classList.remove("preview-android"),document.body.classList.add("preview-"+t.detail),e.updateFrame(t.detail)})},updateFrame:function(e){var t=document.getElementById("mainframe"),n=t.src;n=n.replace("?ionicplatform=ios&iconset="+window.load_iconset,""),n=n.replace("?ionicplatform=android&iconset="+window.load_iconset,""),t.src=n+"?ionicplatform="+e+"&iconset="+window.load_iconset},initToggle:function(e){e.addEventListener("click",function(t){for(var n=e.querySelectorAll(".toggle-button"),i=0;i<n.length;i++)n[i].classList.remove("active");t.target.classList.add("active");var t=new CustomEvent("change",{detail:t.target.getAttribute("data-value")});e.dispatchEvent(t)})},toggleDim:function(){var e=document.querySelector("body");e.classList.contains("dim")?e.classList.remove("dim"):e.classList.add("dim")}},window.Share.init()}(),a.controller("NavCtrl",["$scope","$state","$rootScope","Designer","ShareModal","ThemesModal","Exporter","User","StandardModal",function(e,t,n,i,o,a,r,l,s){e.designer=i,e.userService=l,e.doAppSettings=function(){i.select(i.getDocument().getRoot())},e.doShare=function(){o.show(i.getProject())},e.doSave=function(){i.AppGraph._save()},e.doExport=function(){r["export"]()},e.doThemes=function(){return 1==i.featureCheck("ionic2")?void s.show({message:"Theming is not yet supported for Ionic 3.x projects.",title:"No Theming Support",height:"200px"}):void a.show(i.getProject().app_id)}}]).controller("MainCtrl",["$scope","$state","User","Project",function(e,t,n,i){n.get().then(function(e){console.log("USER",e),i.all().$promise.then(function(e){console.log("Inside Project?",e),e.length?(console.log("Attempting to goto ",e[0].app_id),t.go("app",{appId:e[0].app_id})):(console.log("Going to first-run"),t.go("dashboard.projects",{"new":!0}))},function(e){t.go("login",{loadError:!0})})},function(e){t.go("signup")})}]).controller("FirstRunCtrl",["$scope","$timeout","$state","FirstRun","User","Project","Designer","Projects","PageTemplates",function(e,t,n,i,o,a,r,l,s){e.sizes=["1","2-10","10-50","50-200","200-500","500+"],o.get().then(function(t){var n=o.getFirstName();n?e.heyName="Hey, "+n:e.heyName="Hey!",i.go(e)},function(e){i.hide(),n.go("login",{loggedOut:!0})}),e.infoData={project:{},user:{}},e.infoData.project.template="blank",e.skipInfo=function(){e.formPage="project"},e.setPage=function(t){e.formPage=t},e.formPage="info",e.submit=function(){o.save({},!0),l.createNew(e.infoData.project.name,s.get("ionic_blank")).then(function(e){r.setProject(e),i.hide(),n.go("app",{appId:r.getDocument().getDocumentId()})})}}]).controller("DesignerCtrl",["$scope","$state","$rootScope","Designer","Project","User","PlansModal","FeatureFence",function(e,t,n,i,o,a,r,l){a.get().then(function(){},function(e){t.go("signup",{})}),e.upgradeModal=function(e){Stats.t(e),r.show(void 0,{plan:l.planId()})},e.upgrade=function(){t.go("dashboard.upgrade")}}]).controller("AppCtrl",["$scope","$rootScope","$state","$stateParams","Designer","Project","Shortcuts","User","ComponentFactory",function(e,t,n,i,o,a,r,l,s){function d(){e.doc=o.getDocument(),t.doc=e.doc,t.$on("document.pageAdded",function(e,t){o.setActivePageId(t.getId(),!0)}),e.addPage=function(){o.addPage()},e.removePage=function(e){o.removePage(e)}}return t.showDesigner=!1,t.hasLoadedDesignerBefore?void(window.location.href="/app/designer/"+i.appId):(t.hasLoadedDesignerBefore=!0,e.designer=o,t.designer=o,o.init(),r.bind(),e.appLoading=!0,void a.get({appId:i.appId}).$promise.then(function(e){s.clearIdMap(),o.setProject(e),d(),t.showDesigner=!0},function(e){t.$emit("document.loadError",e)}))}]).controller("LoginCtrl",["$scope","$state","$stateParams","User","$rootScope","Stats",function(e,t,n,i,o,a){e.data={},e.userService=i,e.loggedOut=n.loggedOut,e.didUserLogOut=n.didUserLogOut,e.loadError=n.loadError,e.ssoLoginError=o.ssoLoginError,o.ssoLoginError=!1,e.loadingIndicator=!0;var r=e.$watch("user",function(n,i){n?t.go("dashboard"):null===n&&(e.loadingIndicator=!1)});e.tryLogin=function(){e.loadingIndicator=!0,r(),i.login(e.data).then(function(e){window.location="/app/dashboard"},function(t){e.loadingIndicator=!1,console.log("User err",t),t.status<500?e.loginErrors={global:[t.data.message]}:e.loginErrors={global:['Unable to login due to a server error.<br /><br />Please try again later or <a href="/app/support">Contact support</a>.']}})}}]).controller("SignupCtrl",["$scope","$state","User","Stats",function(e,t,n,i){e.data={email:e.queryParams&&e.queryParams.email||""},e.loadingIndicator=!0;var o=e.$watch("user",function(n,i){n?t.go("dashboard"):null===n&&(e.loadingIndicator=!1)});e.trySignup=function(){e.loadingIndicator=!0,o(),n.signup(e.data).then(function(e){window.location="/app/dashboard"},function(t){if(e.loadingIndicator=!1,t.status<500){if(e.signupErrors={global:[t.data.message]},t.data.details)for(var n in t.data.details)t.data.details[n].errors&&(e.signupErrors.global=e.signupErrors.global.concat(t.data.details[n].errors))}else e.signupErrors={global:['Unable to signup due to a server error.<br /><br />Please try again later or <a href="/app/support">Contact support</a>.']}})}}]).controller("LogoutCtrl",["$scope","$rootScope","$state","$http","Config",function(e,t,n,i,o){var a=o.get("creator_api_url");i({method:"POST",url:a+"/logout",headers:{"Content-Type":"application/json"},withCredentials:!0}).then(function(e){t.user=null,n.go("login",{didUserLogOut:!0})})}]).controller("ForgotPasswordCtrl",["$scope",function(e){e.data={},e.tryReset=function(){console.log("Doing reset",e.data)}}]).controller("PropsCtrl",["$scope",function(e){e.settings={appName:"Conference Name"},e.$watch("settings",function(e){console.log("Settings changed",e)},!0)}]).controller("AppSettingsCtrl",["$scope",function(e){}]).controller("PreviewCtrl",["Project","$scope","$http","$stateParams","DocumentExporter",function(e,t,n,i,o){function a(){}t.loading=!0,e.get({appId:i.appId}).$promise.then(function(e){t.project=e,t.loading=!1,a()},function(e){t.previewError=!0})}]).controller("SupportCtrl",["$scope",function(e){}]),a.config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(e,t,n,i){i.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",i.defaults.withCredentials=!0,t.otherwise("/"),e.state("home",{url:"/app",controller:"MainCtrl"}).state("dashboard",{url:"/app/dashboard",redirectTo:"dashboard.projects",controller:"DashboardCtrl",templateUrl:"/tmpl/dashboard/dashboard.tmpl.html",resolve:{hasUser:["User","$q","$http","$rootScope",function(e,t,n,i){return e.get().then(function(o){return n.get("/login-status").then(function(e){return o},function(n){return i.ssoLoginError=!0,e.logout(),t.reject(n)})},function(e){return t.reject(e)})}]}}).state("dashboard.loadError",{parent:"dashboard",url:"/load-error/:projectId",controller:"LoadErrorCtrl",templateUrl:"/tmpl/designer/load-error.tmpl.html"}).state("dashboard.upgrade",{parent:"dashboard",url:"/upgrade",controller:"UpgradeCtrl",cache:!1,templateUrl:"/tmpl/dashboard/dashboard-upgrade.tmpl.html"}).state("dashboard.admin",{parent:"dashboard",redirectTo:"dashboard.admin.projects",url:"/admin",controller:"DashboardAdminCtrl",templateUrl:"/tmpl/dashboard/dashboard-admin.tmpl.html"}).state("dashboard.admin.projects",{parent:"dashboard.admin",url:"/projectlookup",controller:"DashboardAdminProjectsCtrl",templateUrl:"/tmpl/dashboard/dashboard-admin-projects.tmpl.html"}).state("dashboard.profile",{parent:"dashboard",redirectTo:"dashboard.profile.edit",url:"/profile",controller:"DashboardProfileCtrl",templateUrl:"/tmpl/dashboard/dashboard-profile.tmpl.html"}).state("dashboard.profile.edit",{parent:"dashboard.profile",url:"/edit",controller:"DashboardProfileEditCtrl",templateUrl:"/tmpl/dashboard/dashboard-profile-edit.tmpl.html"}).state("dashboard.profile.password",{parent:"dashboard.profile",url:"/password",controller:"DashboardProfilePasswordCtrl",templateUrl:"/tmpl/dashboard/dashboard-profile-password.tmpl.html"}).state("dashboard.profile.billing",{parent:"dashboard.profile",url:"/billing",controller:"DashboardProfileBillingCtrl",templateUrl:"/tmpl/dashboard/dashboard-profile-billing.tmpl.html"}).state("dashboard.profile.deactivate",{parent:"dashboard.profile",url:"/deactivate",controller:"DashboardProfileDeactivateCtrl",templateUrl:"/tmpl/dashboard/dashboard-profile-deactivate.tmpl.html"}).state("dashboard.projects",{parent:"dashboard",url:"/projects",controller:"DashboardProjectsCtrl",templateUrl:"/tmpl/dashboard/dashboard-projects.tmpl.html"}).state("dashboard.teams",{parent:"dashboard",url:"/groups",controller:"DashboardTeamsCtrl",templateUrl:"/tmpl/dashboard/dashboard-teams.tmpl.html"}).state("dashboard.team",{parent:"dashboard",url:"/group/:id/:slug",controller:"DashboardTeamCtrl",templateUrl:"/tmpl/dashboard/dashboard-team.tmpl.html"}).state("dashboard.help",{parent:"dashboard",redirectTo:"dashboard.help.index",url:"/help",controller:"DashboardHelpCtrl",templateUrl:"/tmpl/dashboard/dashboard-help.tmpl.html"}).state("dashboard.help.index",{parent:"dashboard.help",url:"/index",controller:"DashboardHelpIndexCtrl",templateUrl:"/tmpl/dashboard/dashboard-help-index.tmpl.html"}).state("dashboard.help.videos",{parent:"dashboard.help",url:"/videos",controller:"DashboardHelpVideosCtrl",templateUrl:"/tmpl/dashboard/dashboard-help-videos.tmpl.html"}).state("dashboard.help.support",{parent:"dashboard.help",url:"/support",controller:"DashboardHelpSupportCtrl",templateUrl:"/tmpl/dashboard/dashboard-help-support.tmpl.html"}).state("support",{url:"/app/support",controller:"SupportCtrl",templateUrl:"/tmpl/support.tmpl.html"}).state("login",{url:"/app/login?loggedOut&loadError&didUserLogOut",controller:"LoginCtrl",templateUrl:"/tmpl/login.tmpl.html"}).state("logout",{url:"/app/logout",controller:"LogoutCtrl"}).state("signup",{url:"/app/signup",controller:"SignupCtrl",templateUrl:"/tmpl/signup.tmpl.html"}).state("forgot-password",{url:"/app/forgot-password",controller:"ForgotPasswordCtrl",templateUrl:"/tmpl/forgot-password.tmpl.html"}).state("first-run",{url:"/app/first-run",controller:"FirstRunCtrl",templateUrl:"/tmpl/first-run.tmpl.html"}).state("designer",{url:"/app/designer",controller:"DesignerCtrl",templateUrl:"/tmpl/designer.tmpl.html"}).state("app",{parent:"designer",url:"/:appId",controller:"AppCtrl",templateUrl:"/tmpl/home.tmpl.html",resolve:{hasUser:["User","$q",function(e,t){return e.get()}]}}).state("app.design",{parent:"home",url:"/page/",controller:"AppDesignCtrl"}).state("app.design.page",{parent:"home",url:":pageId",controller:"AppScreenCtrl"}).state("app.settings",{parent:"home",url:"/settings",controller:"AppSettingsCtrl",templateUrl:"/tmpl/app-settings.tmpl.html"}),n.html5Mode({enabled:!0,requireBase:!1})}]).run(["User","$http","$cookies","$state","FirstRun","$rootScope",function(e,t,n,i,o,a){t.defaults.headers.post["X-CSRFToken"]=n.csrftoken,t.defaults.headers.put["X-CSRFToken"]=n.csrftoken,e.get().then(function(e){},function(e){}),a.$on("$stateChangeStart",function(e,t,n){t.redirectTo&&(e.preventDefault(),i.go(t.redirectTo,n))})}]).provider("djangoCsrf",[function(){var e="X-CSRFToken",t="csrftoken",n=["GET"];this.setHeaderName=function(t){e=t},this.setCookieName=function(e){t=e},this.setAllowedMethods=function(e){n=e},this.$get=["$cookies",function(i){return{request:function(o){return-1===n.indexOf(o.method)&&(o.headers[e]=i[t]),o}}}]}]).config(["$httpProvider",function(e){e.interceptors.push("djangoCsrf")}]);var r={addDownloadForExport:function(e,t,n){var i={name:n,url:t,type:e};return i.name=i.name.replace(/[^A-Za-z0-9\.\_\-]/g,""),window.downloads.push(i),i},angularDirectives:function(e,t,n){return n=e.querySelector(n)||e,t.forEach(function(t){if(1!=/[^a-zA-Z\-]/.test(t.directiveName)&&window.compiling&&t.directiveName.trim().length>0)if(t.selector){if("LightDOMElement"==typeof e)var i=window.LightDom.element("<fake-element></fake-element>");else var i=document.createElement("fake-element");i.appendChild(e);var o=i.querySelectorAll(t.selector);o.length>t.selectorIndex?(o[t.selectorIndex].setAttribute(t.directiveName,t.directiveValue),e=i.children[0]):n.setAttribute(t.directiveName,t.directiveValue)}else n.setAttribute(t.directiveName,t.directiveValue)}),e},href:function(e,t,n){var i=window.Designer.getById(t);if(!window.compiling&&!window.convertToHTML)return void e.setAttribute("href","");if("undefined"==typeof i)0==t.indexOf("tel")||0==t.indexOf("mailto")?e.setAttribute("href",t):window.compiling?e.setAttribute("href-inappbrowser",t):e.setAttribute("href","#");else{var o="";if(i.get("parameters",[]).length>0){var a=i.get("parameters"),r=n.get("linkobj",{}).params||{};o="";for(var l={},s=0;s<a.length;s++)l[a[s].name]=r[a[s].name];o+=JSON.stringify(l),o=o.replace(/\{\{/g,'"+').replace(/\}\}/g,'+"').replace(/^\s*\"\s*\"\+/,"").replace(/\+\"\s*\"\s*$/,"")}var d=!1,c=null;if("undefined"!=typeof n)for(var u=n.parent;"undefined"!=typeof u&&0==d;){if("side-menu2"==u.componentType){d=!0,c=u;break}u=u.parent}if(window.Designer.featureCheck("ionic2")&&window.multiFlag)return d&&0==c.get("exposeAsideWhen",!0)&&e.setAttribute("menuClose",""),void e.setAttribute("on-click",i.get("ionic2names").navFunction+"("+o+")");var p=i.get("routeViews",[]),g=n.getParentPage().get("routeViews",[]),h="";if(p.length>1&&0==g.length){var m=n.get("linkView","");if(""==m){for(var f=!1,v="",y=[],s=0;s<p.length;s++){var w=window.Designer.getById(p[s]);w.get("defaultPage","")==i.id&&(v=p[s],f=!0),y.push({id:p[s],title:w.get("title")})}f||(v=y[0].id),n.set("linkView",v),m=v}h="_"+m}else n.set("linkView","");var b=i.getUISref();b&&e.setAttribute("ui-sref",b+h+"("+o+")"),d&&0==c.get("exposeAsideWhen",!0)&&e.setAttribute("menu-close","")}},Styler:function(e){function t(e){var t,n;for(var o in i){t=o==a?e.getAttribute("id")==a?[e]:[e.querySelector("#"+a)]:e.querySelectorAll(":scope "+o),n=t.length?t[0].getAttribute("style"):"",cssString_multiple=t.length?t[0].getAttribute("style"):"",null==n&&(n=""),null==cssString_multiple&&(cssString_multiple="");for(var r in i[o])n=n+r+":"+i[o][r].val+";",i[o][r].options.multiple&&(cssString_multiple=cssString_multiple+r+":"+i[o][r].val+";");if(t)for(var l=0;l<t.length;l++)0==l?t[l].setAttribute("style",n):t[l].setAttribute("style",cssString_multiple)}}function n(e){var t;for(var n in o)t=n==a?e.getAttribute("id")==a?e:e.querySelectorAll(":scope "+a):e.querySelectorAll(":scope "+n),o[n].forEach(function(n){n.trim().length>0&&(t.classList?t.classList.add(n.trim()):console.log("_helper",e,t,e.getAttribute("id"),a))})}var i={},o={};if("undefined"!=typeof e.getParentPage())var a=e.getParentPage().get("idName")+"-"+e.id;else if(e.id)var a=e.id;else var a="placeholder"+Math.floor(1e4*Math.random());var r={addCSS:function(e,t,n,o){"undefined"==typeof o&&(o={}),"undefined"==typeof n&&(n=a),"undefined"==typeof i[n]&&(i[n]={}),i[n][e]={val:t,options:o}},addClass:function(e,t){"undefined"==typeof t&&(t=a),"undefined"==typeof o[t]&&(o[t]=[]),o[t].push(e)},stylize:function(e){t(e),n(e)},getID:function(){return a}};return r}};a.DomHelper=r,a.config(["ComponentTypesProvider",function(e){e.add("app",{type:"core",list:!1,name:"App",properties:{},obj:{canRedrawSingle:!1,canDelete:!1,canDuplicate:!1,validChildren:[]}})}]),a.config(["ComponentTypesProvider",function(e){e.add("button-bar",{type:"button",name:"Button Bar",iconUrl:"/img/component-button-bar.png",weight:0,feature:"!ionic2",properties:{"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50}},obj:{validChildren:["button"],addDefaultChildren:function(){var e=this.create("button");e.set("text",{value:"1"}),this.appendChild(e,!0),e=this.create("button"),e.set("text",{value:"2"}),this.appendChild(e,!0),e=this.create("button"),e.set("text",{value:"3"}),this.appendChild(e,!0)},dom:function(e,t){var n=e.element("<div></div>"),i=a.DomHelper.Styler(this),o=i.getID();n[0].setAttribute("id",o),i.addClass("button-bar");var r=this.get("class","").split(" ");for(var l in r)i.addClass(r[l]);return n[0]=a.DomHelper.angularDirectives(n[0],this.get("directives",[])),i.stylize(n[0]),n[0]}}})}]),a.config(["ComponentTypesProvider",function(e){e.addType("button","ButtonComponent",{type:"button",name:"Button",iconUrl:"/img/component-button.png",weight:0})}]).factory("ButtonComponent",["Component",function(e){return function(){var t=Object.create(new e("button",{link:{title:"Type",type:"route",value:"",category:"Link",fullwidth:!0,weight:0},linkobj:{title:"Link Data",type:"string",value:"",list:!1},linkView:{type:"string",value:"",list:!1},text:{title:"Text",type:"string",value:"Tap me!",category:"Text",fullwidth:!0,weight:1},fontsize:{title:"Size",type:"int",value:"",placeholder:"Default",unit:"px",category:"Text",weight:2},alignment:{title:"Align",category:"Text",type:"align",value:"center",weight:3,text:!0},fontweight:{title:"Weight",type:"font-weight",value:null,category:"Text",weight:4},fontcolor:{title:"Color",type:"color-picker",value:"",category:"Text",weight:5},type:{title:"Type",type:"list",value:"button-block",options:[{value:"",text:"Inline"},{value:"button-block",text:"Block"},{value:"button-clear",text:"Clear"},{value:"button-clear button-block",text:"Clear and Block"},{value:"button-outline button-block",text:"Outline and Block"},{value:"button-outline",text:"Outline"},{value:"button-icon",text:"Icon"},{value:"button-icon button-block",text:"Icon and Block"}],category:"Style",list:!1},widthType:{title:"Width",type:"list2",value:"block",options:[{id:"inline",text:"Inline"},{id:"block",text:"Block"},{id:"fullwidth",text:"Full Width"}],category:"Style",weight:5},newType:{title:"Type",type:"list2",value:"default",options:[{id:"default",text:"Default"},{id:"clear",text:"Clear"},{id:"outline",text:"Outline"},{id:"icon",text:"Icon Only Style"}],formatter:function(e){return'<div class="button-type-option '+e.id+'"></div>'},formatterSelection:function(e){return e.text},category:"Style",weight:6},style:{title:"Theme",type:"theme-color",help:"To customize these colors, open theming options by clicking on the paintbrush in the top right of your screen.",value:"positive",category:"Style",weight:7,prefix:"button"},size:{title:"Size",type:"list",value:"",options:[{value:"button-large",text:"Large"},{value:"button-small",text:"Small"}],emptyText:"Standard",category:"Style",weight:8},fullwidth:{title:"Full Width",type:"boolean",value:!1,help:"Turn off padding on page too for full effect.",category:"Style",list:!1},radius:{title:"Radius",type:"radius",value:void 0,category:"Style",unit:"px",placeholder:"Default",weight:9},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},icon:{title:"Icon",category:"Icon",type:"icon",value:"No Icon",fullwidth:!0,weight:11},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},iconposition:{title:"Position",category:"Icon",type:"align",value:"center",weight:12},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},{name:"Button",validChildren:[],canResizeX:!0,canResizeY:!0,canEdit:!0,onRemove:function(){window.Designer.AppGraph.removeLink(this)},onInsert:function(){window.Designer.AppGraph.addLink(this)},commitEdit:function(){this.text=this.$rendered.innerHTML},icElement:function(e){return-1==e.className.indexOf("button")?e.children[0]:e},dom:function(e,t){var n=a.DomHelper.Styler(this),i=n.getID(),o=this.get("type","");if(""!==o){var r=o.indexOf("button-block"),l=this.get("fullwidth",!1);r>-1?l?this.set("widthType","fullwidth"):this.set("widthType","block"):this.set("widthType","inline"),o.indexOf("button-clear")>-1?this.set("newType","clear"):o.indexOf("button-outline")>-1?this.set("newType","outline"):o.indexOf("button-icon")>-1?this.set("newType","icon"):this.set("newType","default"),this.set("type","")}var s,d=t.createElement("button"),c=this.get("widthType");switch(o=this.get("newType"),this.get("link","")&&(s=this.get("link"),d=t.createElement("a"),a.DomHelper.href(d,s,this)),d.setAttribute("id",i),-1!==this.get("style").indexOf("button")&&this.set("style",this.get("style").replace("button-","")),n.addClass("button"),n.addClass("button-"+this.get("style","positive")),n.addClass(this.get("size")),c){case"fullwidth":if(n.addClass("button-full"),this.getParentPage().get("ionicpadding",!0)){n.addCSS("left","-10px");var u=t.createElement("div");u.setAttribute("style","margin-right:-20px;"),u.appendChild(d)}break;case"inline":break;case"block":n.addClass("button-block")}"default"!==o&&n.addClass("button-"+o);var p=this.get("iconposition");if(-1!=p.indexOf("icon"))switch(p){case"icon-left":this.set("iconposition","left");break;case"icon":this.set("iconposition","center");break;case"icon-right":this.set("iconposition","right")}var g={left:"icon-left",center:"icon",right:"icon-right"};p=g[p];var h=this.get("icon");if(p&&"No Icon"!=p&&"No Icon"!==h&&(n.addClass(p),window.Designer.featureCheck("ionic2")?d.setAttribute("ionicon3",h):n.addClass(h)),null!==this.get("fontweight",null)){"string"==typeof this.get("fontweight")&&this.set("fontweight",{weight:this.get("fontweight"),italic:!1});var m=this.get("fontweight");"400"!=m.weight&&n.addCSS("font-weight",this.get("fontweight").weight),m.italic&&n.addCSS("font-style","italic")}""!==this.get("fontcolor","")&&n.addCSS("color",this.get("fontcolor")),""!==this.get("fontsize","")&&n.addCSS("font-size",this.get("fontsize")+"px");var f=this.get("alignment","center");"center"!==f&&n.addCSS("text-align",f);var v=this.get("radius",void 0);if("undefined"!=typeof v){var y=!("undefined"==typeof v.topleft_val||""==v.topleft_val),w=!("undefined"==typeof v.topright_val||""==v.topright_val),b=!("undefined"==typeof v.bottomright_val||""==v.bottomright_val),C=!("undefined"==typeof v.bottomleft_val||""==v.bottomleft_val);if(0!=y||0!=w||0!=b||0!=C){var S=v.topleft_val?v.topleft_val+"px":"0px",D=v.topright_val?v.topright_val+"px":"0px",x=v.bottomright_val?v.bottomright_val+"px":"0px",$=v.bottomleft_val?v.bottomleft_val+"px":"0px";n.addCSS("border-radius",S+" "+D+" "+x+" "+$)}}d.innerHTML=this.get("text");var P=this.get("class","").split(" ");for(var T in P)n.addClass(P[T]);return d=a.DomHelper.angularDirectives(d,this.get("directives",[])),n.stylize(d),"undefined"!=typeof u?u:d},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i='<button id="'+n+'" ion-button';switch(e.get("newType","default")){case"default":break;case"clear":i+=" clear";break;case"outline":i+=" outline";break;case"icon":i+=" icon-only"}switch(i+=' color="'+e.get("style","positive")+'"',e.get("widthType","block")){case"fullwidth":i+=" full";break;case"block":i+=" block";break;case"inline":}switch(e.get("size","")){case"button-large":i+=" large";break;case"button-small":i+=" small"}var o=e.get("icon","No Icon"),r=e.get("iconposition","");if("No Icon"!==o)switch(r){case"left":i+=" icon-left";break;case"right":i+=" icon-right"}i+=">";var l=e.get("text",""),s=!1;if(""!==l&&("No Icon"==o||"right"==r)&&(i+=l,s=!0),"No Icon"!==o&&(i+='<ion-icon name="'+o+'"></ion-icon>'),""!==l&&0==s&&(i+=l),i+="</button>",null!==e.get("fontweight",null)){"string"==typeof e.get("fontweight")&&e.set("fontweight",{weight:e.get("fontweight"),italic:!1});var d=e.get("fontweight");"400"!=d.weight&&t.addCSS("font-weight",e.get("fontweight").weight),d.italic&&t.addCSS("font-style","italic")}""!==e.get("fontcolor","")&&t.addCSS("color",e.get("fontcolor")),""!==e.get("fontsize","")&&t.addCSS("font-size",e.get("fontsize")+"px");var c=e.get("alignment","center");"center"!==c&&t.addCSS("text-align",c);var u=e.get("radius",void 0);if("undefined"!=typeof u){var p=!("undefined"==typeof u.topleft_val||""==u.topleft_val),g=!("undefined"==typeof u.topright_val||""==u.topright_val),h=!("undefined"==typeof u.bottomright_val||""==u.bottomright_val),m=!("undefined"==typeof u.bottomleft_val||""==u.bottomleft_val);if(0!=p||0!=g||0!=h||0!=m){var f=u.topleft_val?u.topleft_val+"px":"0px",v=u.topright_val?u.topright_val+"px":"0px",y=u.bottomright_val?u.bottomright_val+"px":"0px",w=u.bottomleft_val?u.bottomleft_val+"px":"0px";t.addCSS("border-radius",f+" "+v+" "+y+" "+w)}}var b=e.get("class","").split(" ");for(var C in b)t.addClass(b[C]);var S=window.LightDom.element(i);if(S[0]=a.DomHelper.angularDirectives(S[0],e.get("directives",[])),t.stylize(S[0]),e.get("link","")){var D=e.get("link");a.DomHelper.href(S[0],D,e)}return S},getDomNodeForInsertingChildren:function(e){return null}}}));return t}}]),a.config(["ComponentTypesProvider",function(e){e.add("card2",{type:"content",name:"Card",iconUrl:"/img/component-card.png",weight:0,properties:{link:{title:"Type",type:"route",value:"",category:"Link",fullwidth:!0,weight:0},title:{title:"Title",type:"string",value:"Card",category:"Text",list:!1},footer:{title:"Footer",type:"string",value:"",category:"Text",list:!1},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},fullwidth:{title:"Full Width",type:"boolean",value:!1,category:"Style",fullwidth:!0,weight:11},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{name:"Card",addDefaultChildren:function(){var e=this.create("list-item-avatar");this.appendChild(e,!0);var t=this.create("image");this.appendChild(t,!0);var n=this.create("list-item-container");this.appendChild(n,!0);var i=this.create("list-item-icon");i.set("theme","assertive"),window.Designer.featureCheck("ionic2")?i.set("iconStyle","musical-notes"):i.set("iconStyle","ion-music-note"),i.set("content","Play Song"),this.appendChild(i,!0);var o=this.create("markdown");n.appendChild(o,!0),o.set("noPadding",!1)},dom:function(e,t){var n=a.DomHelper.Styler(this),i=n.getID(),o=e.element('<div class="list card"></div>');if(this.get("link","")){link=this.get("link");var o=e.element('<a class="list card" style="display:block;text-decoration:none;"></a>');a.DomHelper.href(o[0],link,this)}o[0].setAttribute("id",i);var r=this.get("fullwidth",!1);1==r&&n.addClass("manual-card-fullwidth");var l=this.get("class","").split(" ");for(var s in l)n.addClass(l[s]);return o[0]=a.DomHelper.angularDirectives(o[0],this.get("directives",[])),n.stylize(o[0]),o[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=window.LightDom.element("<ion-card><ion-list></ion-list></ion-card>");return e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),i[0].setAttribute("id",n),i[0]=a.DomHelper.angularDirectives(i[0],e.get("directives",[])),t.stylize(i[0]),i},getDomNodeForInsertingChildren:function(e){return e[0].children[0]}}}})}]),a.config(["ComponentTypesProvider",function(e){e.addType("checkbox","CheckboxComponent",{type:"forms",name:"Checkbox",iconUrl:"/img/component-checkbox.png",weight:0})}]).factory("CheckboxComponent",["Component",function(e){return function(){var t=Object.create(new e("checkbox",{title:{title:"Title",type:"string",value:"Checkbox",weight:1,category:"Text"},name:{title:"Name",type:"string",value:"",weight:1,category:"Text"},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},newProps:{list:!1,type:"boolean",value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},{name:"Checkbox",validChildren:[],needsCompile:!0,forceOneParent:["list","form"],recommendedParent:"form",dom:function(e,t){var n=e.element("<ion-checkbox>"+this.get("title")+"</ion-checkbox>"),i=a.DomHelper.Styler(this),o=i.getID();n[0].setAttribute("id",o),this.get("name")&&n.attr("name",this.get("name"));var r=this.get("class","").split(" ");for(var l in r)i.addClass(r[l]);return n[0]=a.DomHelper.angularDirectives(n[0],this.get("directives",[])),i.stylize(n[0]),n[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=window.LightDom.element("<ion-item><ion-label>"+e.get("title","")+"</ion-label><ion-checkbox></ion-checkbox></ion-item>");return e.get("name")&&i[0].setAttribute("name",e.get("name")),e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),i[0].setAttribute("id",n),i[0]=a.DomHelper.angularDirectives(i[0],e.get("directives",[])),t.stylize(i[0]),i},getDomNodeForInsertingChildren:function(e){return null}}}));return t}}]),a.run(["Action",function(e){e.register("appendChild",{perform:function(e){e.parent.appendChild(e.child);
},revert:function(e){e.parent.removeChild(e.child)}}),e.register("insertChild",{perform:function(e){e.parent.insertChild(e.child,e.index)},revert:function(e){e.parent.removeChild(e.child)}}),e.register("moveChild",{perform:function(e){e.child.moveTo(e.newParent,e.newIndex)},revert:function(e){e.child.moveTo(e.oldParent,e.oldIndex)}}),e.register("removeChild",{perform:function(e){e.oldParent.removeChild(e.child,e.isQuiet)},revert:function(e){e.oldParent.insertChild(e.child,e.oldIndex)}})}]).factory("Component",["$rootScope","Property","ComponentTypes","ComponentFactory",function(e,t,n,i){return function(o,a,r){return obj={canSelect:!0,canDelete:!0,showSelectControls:!0,type:o,properties:{id:new t("id",{category:"css",title:"id",type:"string",value:"",weight:1,list:!1}),extraClasses:new t("extraClasses",{category:"css",title:"Extra Classes",type:"string",value:"",weight:2,list:!1}),width:new t("width",{category:"css",title:"Width",type:"dimension",value:"",weight:3,list:!1}),height:new t("height",{category:"css",title:"Height",type:"dimension",value:"",weight:4,list:!1}),margin:new t("margin",{category:"css",title:"Margin",type:"margin",value:{top:"",right:"",bottom:"",left:""},weight:5,list:!1}),padding:new t("padding",{category:"css",title:"Padding",type:"margin",value:{top:"",right:"",bottom:"",left:""},weight:6,list:!1}),skipcss:new t("skipcss",{type:"boolean",list:!1,value:!1}),validChildren:new t("validChildren",{type:"list",list:!1,value:void 0}),validCategories:new t("validCategories",{type:"list",list:!1,value:void 0})},children:[],validChildren:void 0,validCategories:void 0,recommendedParent:void 0,forceOneParent:[],addonRequired:void 0,id:null,_init:function(){},create:function(e){return i.create(e)},appendNew:function(e){this.appendChild(i.create(e))},addDefaultChildren:function(){},clone:function(){return i.clone(this)},getId:function(){return this.id},getParentPage:function(){for(var e=null,t=this;null===e;){if(t=t.getParent(),"undefined"==typeof t)return void 0;t.isPage&&(e=t)}return e},getParent:function(){return this.parent},setId:function(e){this.id=e},getTitle:function(){return this.get("title",this.type)},acceptsChild:function(e){var t,i=n.get(e);if(i&&i.data.requiresParent){for(t=0;t<i.data.requiresParent.length;t++)if(i.data.requiresParent[t]===this.type)return!0;return!1}if("undefined"!=typeof this.validCategories){for(t=0;t<this.validCategories.length;t++)if(this.validCategories[t]==i.data.type)return!0;return!1}if("undefined"!=typeof this.validChildren){for(t=0;t<this.validChildren.length;t++)if(this.validChildren[t]==e)return!0;return!1}if(""!==this.get("validCategories","")){for(t=0;t<this.get("validCategories").length;t++)if(this.get("validCategories")[t]==i.data.type)return!0;return!1}if(""!==this.get("validChildren","")){for(t=0;t<this.get("validChildren").length;t++)if(this.get("validChildren")[t]==e)return!0;return!1}return!0},get:function(e,t){"undefined"==typeof t&&(t="");var n=this.properties[e];return n&&"undefined"!=typeof n.value?n.value:t},getProperty:function(e){return this.properties[e]},set:function(e,n){if(this.properties[e])"object"==typeof n&&n.hasOwnProperty("value")?this.properties[e].setValue(n.value):this.properties[e].setValue(n);else{var i=new t(e,n);this.properties[e]=i}},setFromMap:function(e){for(var t in e)this.properties[t]&&this.properties[t].setValue(e[t])},setDefaultProperties:function(e){var t;for(var n in e)t=e[n],this.set(n,t)},getProperties:function(){return this.properties},getSortedProperties:function(){var e=[];for(var t in this.properties)(this.properties[t].list!==!1||"height"==t&&"spacer"==this.type)&&e.push(this.properties[t]);return e.sort(function(e,t){return e.weight||(e.weight=0),t.weight||(t.weight=0),e.weight-t.weight}),e},_initChild:function(t,n,o){if("undefined"!=typeof t.recommendedParent&&this.type!=t.recommendedParent&&-1==t.forceOneParent.indexOf(this.type)){if("undefined"==typeof o&&(o=this.children.length-1),-1!==o&&t.forceOneParent.indexOf(this.children[o].type)>-1)return this.children[o].appendChild(t),!1;var a=this.create(t.recommendedParent);a.appendChild(t),t=a}return t.id||(t.id=i.newId(t.type),"RESETMEPLEASE"==t.get("url","")&&t.set("url","/"+t.id)),n||e.$emit("document.propertyChanged"),t},commitChildren:function(){for(var t=(this.children.length,0);t<this.children.length&&(this.children[t]=this._initChild(this.children[t]),this.children[t]!==!1);t++)e.$emit("component.registerChild",this.children[t],this)},appendChild:function(t,n){t=this._initChild(t,n),t!==!1&&(t.parent=this,this.children.push(t),e.$emit("component.childAdded",t,this,n))},removeChild:function(t,n){function i(e){"undefined"!=typeof e.onRemove&&e.onRemove();for(var t=0;t<e.children.length;t++)i(e.children[t])}for(var o=0,a=this.children.length;a>o;o++)if(t===this.children[o])return this.children.splice(o,1),t.parent=null,"undefined"!=typeof this.updateChildLinks&&this.updateChildLinks(),e.$emit("component.childRemoved",t,this,n),i(t),0!=this.children.length||"form"!=this.componentType&&"list"!=this.componentType||this.getParent().removeChild(this),t},insertChild:function(t,n,i){function o(e){"undefined"!=typeof e.onInsert&&e.onInsert();for(var t=0;t<e.children.length;t++)o(e.children[t])}t=this._initChild(t,i,n),t!==!1&&(t.parent=this,this.children.splice(n,0,t),e.$emit("component.childAdded",t,this,i),o(t))},findChild:function(e){var t,n,i;for(n=0,i=this.children.length;i>n;n++)if(t=this.children[n],t.getId()===e)return t;return null},getChildren:function(e){var t,n,i,o;if("undefined"!=typeof e){for(o=[],n=0,i=this.children.length;i>n;n++)t=this.children[n],t.type===e&&o.push(t);return o}return this.children},getChild:function(e){return this.children[e]},getChildIndex:function(e){var t,n,i;for(n=0,i=this.children.length;i>n;n++)if(t=this.children[n],t===e)return n;return-1},getIndex:function(){return this.parent.getChildIndex(this)},isChildOf:function(e){for(var t=e,n=this.parent;n&&n!==t;)n=n.parent;return n},replaceWith:function(t){var n=this.parent,i=n.getChildIndex(this);n.removeChild(this),n.insertChild(t,i),t.setId(this.getId()),e.$emit("component.childReplaced",this,t)},moveTo:function(e,t){this.parent.removeChild(this),0>t?e.appendChild(this):e.insertChild(this,t)},dom:function(e,t){var n=t.createElement("div");return n},getFromCompiled:function(e){return e},replaceRendered:function(e,t){},onRender:function(e,t,n){},setRendered:function(e,t){this.$rendered=e},getRendered:function(){return this.$rendered},getRenderedChildren:function(){return this.$rendered?this.$rendered.children:[]},getRenderedTarget:function(){return this.$rendered},getRenderTarget:function(e){return e},insertRenderedIntoParent:function(e,t){e.appendChild(t)},getEditableNode:function(){return this.$rendered},detachRendered:function(){},startResize:function(){this.$rendered&&(this._resizeStart=this.$rendered.getBoundingClientRect())},resize:function(e,t){if(this._resizeStart){var n=this._resizeStart.width,i=this._resizeStart.height;this.$rendered.style.width=n+e+"px",this.$rendered.style.height=i+t+"px"}},commitResize:function(){this.set("width",this.$rendered.style.width),this.set("height",this.$rendered.style.height)},onClick:function(){},onSelect:function(){}},obj.setDefaultProperties(a),angular.extend(obj,r),obj._init(),obj}}]),a.config(["ComponentTypesProvider",function(e){e.add("container",{type:"content",name:"Container",weight:1,iconUrl:"/img/component-container.png",properties:{tag:{title:"Tag",type:"string",value:"div",category:"Style"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{toString:function(){return"ContainerComponent"},getRenderedChildren:function(){return this.$rendered.children},getRenderedTarget:function(){return this.$rendered},dom:function(e,t){var n=this.get("tag","div").trim()||"div",i=t.createElement(n),o=a.DomHelper.Styler(this),r=o.getID();i.setAttribute("id",r);var l=this.get("class","").split(" ");for(var s in l)o.addClass(l[s]);return i=a.DomHelper.angularDirectives(i,this.get("directives",[])),0==this.children.length&&o.addClass("creator-container"),o.stylize(i),i},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=e.get("tag","div").trim()||"div",o=window.LightDom.element("<"+i+"></"+i+">");return e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),o[0].setAttribute("id",n),o[0]=a.DomHelper.angularDirectives(o[0],e.get("directives",[])),t.stylize(o[0]),o},getDomNodeForInsertingChildren:function(e){return e[0]}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("form",{type:"forms",name:"Form",iconUrl:"/img/component-form.png",weight:0,properties:{action:{title:"Action",type:"url",value:"",list:!1},method:{title:"Method",type:"string",value:"",list:!1},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{needsCompile:!0,addDefaultChildren:function(){console.log("ADD DEFAULT CHILDREN"),console.trace();var e=this.create("toggle");this.appendChild(e,!0),e=this.create("radio"),this.appendChild(e,!0),e=this.create("input"),this.appendChild(e,!0)},dom:function(e,t){var n=t.createElement("form"),i=a.DomHelper.Styler(this),o=i.getID();n.setAttribute("id",o),n.setAttribute("class","list"),this.get("action")&&n.setAttribute("action",this.get("action")),this.get("method")&&n.setAttribute("method",this.get("method"));var r=this.get("class","").split(" ");for(var l in r)i.addClass(r[l]);return n=a.DomHelper.angularDirectives(n,this.get("directives",[])),i.stylize(n),n},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=window.LightDom.element("<form></form>");return e.get("action")&&i[0].setAttribute("action",e.get("action")),e.get("method")&&i[0].setAttribute("method",e.get("method")),e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),i[0].setAttribute("id",n),i[0]=a.DomHelper.angularDirectives(i[0],e.get("directives",[])),t.stylize(i[0]),i},getDomNodeForInsertingChildren:function(e){return e[0]}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("heading",{type:"1",name:"Heading",iconUrl:"/img/component-heading.png",weight:0,properties:{text:{title:"Text",type:"string",value:"Heading",category:"Text",fullwidth:!0},size:{title:"Size",type:"list",value:"1",options:[{value:"1",text:"H1"},{value:"2",text:"H2"},{value:"3",text:"H3"},{value:"4",text:"H4"},{value:"5",text:"H5"}],category:"Text"},fontcolor:{title:"Color",type:"color-picker",value:"#000000",category:"Text",weight:3},fontweight:{title:"Weight",type:"font-weight",value:null,category:"Text",weight:2,"default":"500"},alignment:{title:"Align",category:"Text",type:"align",value:"left",weight:11,text:!0},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{validChildren:[],canEdit:!0,dom:function(e,t){var n=a.DomHelper.Styler(this),i=n.getID(),o=t.createElement("h"+this.get("size","1"));if(o.innerHTML=this.get("text"),o.setAttribute("id",i),""!==this.get("fontcolor","")&&n.addCSS("color",this.get("fontcolor")),null!==this.get("fontweight",null)){var r=this.get("fontweight");"500"!=r.weight&&n.addCSS("font-weight",this.get("fontweight").weight),r.italic&&n.addCSS("font-style","italic")}var l=this.get("alignment","left");"left"!==l&&n.addCSS("text-align",l);var s=this.get("class","").split(" ");for(var d in s)n.addClass(s[d]);return o=a.DomHelper.angularDirectives(o,this.get("directives",[])),n.stylize(o),o},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i="h"+e.get("size","1"),o=e.get("text",""),r=window.LightDom.element("<"+i+">"+o+"</"+i+">");if(e.get("fontcolor","")&&t.addCSS("color",e.get("fontcolor")),e.get("fontweight","")){var l=e.get("fontweight");"500"!=l.weight&&t.addCSS("font-weight",l.weight),l.italic&&t.addCSS("font-style","italic")}var s=e.get("alignment","left");return"left"!==s&&t.addCSS("text-align",s),e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),r[0].setAttribute("id",n),r[0]=a.DomHelper.angularDirectives(r[0],e.get("directives",[])),t.stylize(r[0]),r},getDomNodeForInsertingChildren:function(e){return null}}}})}]),a.config(["ComponentTypesProvider",function(e){e.addType("html","HtmlComponent",{type:"content",name:"Html",iconUrl:"/img/component-html.png",weight:0,feature:"!ionic2"})}]).factory("HtmlComponent",["Component",function(e){return function(){var t=Object.create(new e("html",{content:{title:"HTML Content",type:"html",value:"<p>\n  Add some <b>HTML</b> for <u>flavor</u>\n  </p>"},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0}},{validChildren:[],dom:function(e,t){var n=this.get("content");if(window.multiFlag)for(var i=new RegExp("[\"']https://s3.amazonaws.com/ionic-io-static/([^\"']+)[\"']","g"),o=n.match(i)||[],r=0;r<o.length;r++){var l=o[r].split("/");l=l[l.length-1],downloadimg=o[r].substring(1,o[r].length-1),l=a.DomHelper.addDownloadForExport("img",downloadimg,l).name,n=n.replace(o[r],'"img/'+l+'"')}var s=e.element("<div>"+n+"</div>");return 1==s[0].children.length?s[0].children[0]:s[0]},ionic2:{generateDomNode:function(e){var t=e.get("content");if(window.multiFlag)for(var n=new RegExp("[\"']https://s3.amazonaws.com/ionic-io-static/([^\"']+)[\"']","g"),i=t.match(n)||[],o=0;o<i.length;o++){var r=i[o].split("/");r=r[r.length-1],downloadimg=i[o].substring(1,i[o].length-2),r=a.DomHelper.addDownloadForExport("img",downloadimg,r).name,t=t.replace(i[o],'"assets/img/'+r+'"')}var l=window.LightDom.element(t);return l},getDomNodeForInsertingChildren:function(e){return null}}}));return t}}]),a.config(["ComponentTypesProvider",function(e){e.add("image",{type:"content",name:"Image",iconUrl:"/img/component-image.png",weight:0,properties:{link:{title:"Type",type:"route",value:"",category:"Link",fullwidth:!0},linkobj:{title:"Link Data",type:"string",value:"",list:!1},src:{title:"Image Source",forcetitle:!0,type:"urlupload",value:"",placeholder:"Image URL",uploadText:"Upload Image...",category:"Source",autoheight:!0,fullwidth:!0},linkView:{type:"string",value:"",list:!1,category:"Link"},imgSize:{category:"Style",title:"Size",type:"size",value:void 0,weight:2},imgwidth:{category:"Style",title:"Width",type:"dimension",value:"100%",weight:3,list:!1},imgheight:{category:"Style",title:"Height",type:"dimension",value:"auto",weight:4,list:!1},alignment:{title:"Position",category:"Style",type:"align",value:"center",weight:5},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{validChildren:[],onRemove:function(){window.Designer.AppGraph.removeLink(this)},onInsert:function(){window.Designer.AppGraph.addLink(this)},dom:function(e,t){if(""!=this.get("width")&&this.set("width",""),""!=this.get("height")&&this.set("height",""),""!=this.get("imgwidth")||""!=this.get("imgheight")){var n=this.get("imgwidth");this.set("imgwidth","");var i=this.get("imgheight");this.set("imgheight",""),this.set("imgSize",{width:n,height:i,fullWidth:!1})}"undefined"==typeof this.get("imgSize")&&this.set("imgSize",{width:"100%",height:"auto",fullWidth:!1});var o=this.get("imgSize"),r=this.get("src");if(r){var l=t.createElement("img");if(window.multiFlag&&-1==r.indexOf("{{")&&-1==r.indexOf("}}")){var s=r.split("/");s=s[s.length-1],s=a.DomHelper.addDownloadForExport("img",r,s).name,l.src="img/"+s}else l.src=r;l.setAttribute("style","display:block;width:"+o.width+";height:"+o.height+";");var d=t.createElement("div");d.className=this.get("class"),this.parent&&"card2"==this.parent.componentType&&(d.className=d.className+" item item-image");var c=this.get("alignment","center");if("left"==c||("right"==c?l.style["margin-left"]="auto":"center"==c?(l.style["margin-left"]="auto",l.style["margin-right"]="auto"):(l.style["margin-left"]="auto",l.style["margin-right"]="auto")),o.fullWidth&&this.getParentPage().get("ionicpadding",!0)&&(d.style["margin-left"]="-10px",d.style.width="calc(100% + 20px)"),this.get("link")){var u=t.createElement("a"),p=this.get("link");return u.setAttribute("style","display:block;"),a.DomHelper.href(u,p,this),d.appendChild(u),u.appendChild(l),d=a.DomHelper.angularDirectives(d,this.get("directives",[]),"img")}return d.appendChild(l),d=a.DomHelper.angularDirectives(d,this.get("directives",[]),"img")}var d=t.createElement("div"),g=t.createElement("i");g.classList.add("icon"),g.classList.add("ion-image"),$(g).css({fontSize:"64px",color:"#888",verticalAlign:"middle"}),d.appendChild(g);var h="100%",m="220px";return this.get("width").indexOf("px")&&(h=this.get("width")),this.get("height").indexOf("px")&&(m=this.get("height")),$(d).css({width:h,height:m,margin:"0px 0px",lineHeight:"250px",backgroundColor:"#e8ebef",textAlign:"center"}),d=a.DomHelper.angularDirectives(d,this.get("directives",[]),"img")},ionic2:{generateDomNode:function(e){if(""!=e.get("imgwidth")||""!=e.get("imgheight")){var t=e.get("imgwidth");e.set("imgwidth","");var n=e.get("imgheight");e.set("imgheight",""),e.set("imgSize",{width:t,height:n,fullWidth:!1})}"undefined"==typeof e.get("imgSize")&&e.set("imgSize",{width:"100%",height:"auto",fullWidth:!1});var i=e.get("imgSize"),o=e.get("src");if(o){var r=window.LightDom.element("<img />")[0];if(window.multiFlag&&-1==o.indexOf("{{")&&-1==o.indexOf("}}")){var l=o.split("/");l=l[l.length-1],l=a.DomHelper.addDownloadForExport("img",o,l).name,r.setAttribute("src","assets/img/"+l)}else r.setAttribute("src",o);if(e.parent&&"card2"==e.parent.componentType);else{var s=window.LightDom.element("<div></div>")[0];s.addClass(e.get("class")),r.setAttribute("style","display:block;width:"+i.width+";height:"+i.height+";");var d=e.get("alignment","center");"left"==d||("right"==d?r.setStyleVal("margin-left","auto"):"center"==d?(r.setStyleVal("margin-left","auto"),r.setStyleVal("margin-right","auto")):(r.setStyleVal("margin-left","auto"),r.setStyleVal("margin-right","auto"))),i.fullWidth&&e.getParentPage().get("ionicpadding",!0)&&(s.setStyleVal("margin-left","-10px"),s.setStyleVal("width","calc(100% + 20px)"))}if(e.get("link")){var c=window.LightDom.element("<a></a>")[0],u=e.get("link");return c.setAttribute("style","display:block;"),a.DomHelper.href(c,u,e),s.appendChild(c),c.appendChild(r),s=a.DomHelper.angularDirectives(s,e.get("directives",[]),"img"),[s]}return r=a.DomHelper.angularDirectives(r,e.get("directives",[]),"img"),[r]}var s=window.LightDom.element("<div></div>")[0],p=window.LightDom.element("<i></i>")[0];p.classList.add("icon"),p.classList.add("ion-image"),p.setAttribute("style","font-size:64px;color:#888;vertical-align:middle;"),s.appendChild(p);var g="100%",h="220px";return e.get("width").indexOf("px")>=0&&(g=e.get("width")),e.get("height").indexOf("px")>=0&&(h=e.get("height")),s.setStyleVal("width",g),s.setStyleVal("height",h),s.setStyleVal("margin","0px 0px"),s.setStyleVal("line-height","250px"),s.setStyleVal("background-color","#e8ebef"),s.setStyleVal("text-align","center"),s=a.DomHelper.angularDirectives(s,e.get("directives",[]),"img"),[s]},getDomNodeForInsertingChildren:function(e){return null}}}})}]),a.config(["ComponentTypesProvider",function(e){e.addType("input","InputComponent",{type:"forms",name:"Input",weight:1,iconUrl:"/img/component-input.png"})}]).factory("InputComponent",["Component",function(t){return function(){var n=Object.create(new t("input",{title:{title:"Title",type:"string",value:"Input",category:"Input Settings"},type:{title:"Type",type:"list2",value:"text",options:[{id:"text",text:"Text"},{id:"password",text:"Password"},{id:"email",text:"Email"},{id:"tel",text:"Phone #"},{id:"number",text:"Number"},{id:"date",text:"Date"},{id:"month",text:"Month"},{id:"time",text:"Time"}],category:"Input Settings"},placeholder:{title:"Placeholder",type:"string",value:"",category:"Input Settings"},name:{title:"Name",type:"string",value:"",category:"Input Settings"},labelstyle:{title:"Label Style",type:"list2",value:"normal",category:"Input Settings",options:[{id:"normal",text:"Normal"},{id:"floating",text:"Floating"},{id:"stacked",text:"Stacked"}]},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},{validChildren:[],forceOneParent:["list","form"],recommendedParent:"form",getEditableNode:function(){return this.$rendered.querySelector(".input-label")},dom:function(t,n){var i='<label class="item item-input">';this.get("title")&&(i=i+'<span class="input-label">'+this.get("title")+"</span>"),i=i+'<input type="'+this.get("type")+'" placeholder="'+e(this.get("placeholder"))+'"></label>';var o=t.element(i),r=a.DomHelper.Styler(this),l=r.getID();o[0].setAttribute("id",l),this.get("name")&&o.attr("name",this.get("name")),"floating"==this.get("labelstyle","normal")?r.addClass("item-floating-label"):"stacked"==this.get("labelstyle","normal")&&r.addClass("item-stacked-label");var s=this.get("class","").split(" ");for(var d in s)r.addClass(s[d]);return o[0]=a.DomHelper.angularDirectives(o[0],this.get("directives",[]),"input"),r.stylize(o[0]),o[0]},ionic2:{generateDomNode:function(t){var n=a.DomHelper.Styler(t),i=n.getID(),o=t.get("title",""),r=t.get("labelstyle","normal"),l=t.get("type",""),s=t.get("name",null),d=e(t.get("placeholder")),c=window.LightDom.element("<ion-item></ion-item>"),u=window.LightDom.element("<ion-label>"+o+"</ion-label>")[0];"floating"==r&&u.setAttribute("floating",null),"stacked"==r&&u.setAttribute("stacked",null);var p=window.LightDom.element('<ion-input type="'+l+'" placeholder="'+d+'"></ion-input>')[0];return s&&p.setAttribute("name",s),c[0].appendChild(u),c[0].appendChild(p),t.get("class","").split(" ").forEach(function(e){n.addClass(e)}),c[0].setAttribute("id",i),c[0]=a.DomHelper.angularDirectives(c[0],t.get("directives",[])),n.stylize(c[0]),c},getDomNodeForInsertingChildren:function(e){return null}}}));return n}}]),a.config(["ComponentTypesProvider",function(e){e.addType("list-item-divider","ListItemDividerComponent",{type:"list-item",name:"List Divider",weight:1,iconUrl:"/img/component-list-divider.png"})}]).factory("ListItemDividerComponent",["Component",function(e){return function(){var t=Object.create(new e("list-item-divider",{content:{title:"Content",type:"string",value:"Item",category:"Text"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},{needsCompile:!0,forceOneParent:["list","form","card2"],recommendedParent:"list",validChildren:[],dom:function(e,t){var n=e.element('<ion-item class="item-divider"> '+this.get("content")+"</ion-item>"),i=a.DomHelper.Styler(this),o=i.getID();n[0].setAttribute("id",o);var r=this.get("class","").split(" ");for(var l in r)i.addClass(r[l]);return n[0]=a.DomHelper.angularDirectives(n[0],this.get("directives",[])),i.stylize(n[0]),n[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=window.LightDom.element('<ion-item-divider color="light">'+e.get("content")+"</ion-item-divider>");return e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),i[0].setAttribute("id",n),i[0]=a.DomHelper.angularDirectives(i[0],e.get("directives",[])),t.stylize(i[0]),i},getDomNodeForInsertingChildren:function(e){return null}}}));return t}}]),a.config(["ComponentTypesProvider",function(e){e.add("list-item-container",{type:"list-item",name:"Container List Item",weight:1,iconUrl:"/img/component-paragraph.png",properties:{"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{validChildren:[],forceOneParent:["list","form","card2"],recommendedParent:"list",needsCompile:!0,addDefaultChildren:function(){var e=this.create("markdown");e.set("noPadding",!1),this.appendChild(e,!0)},dom:function(e,t){var n=a.DomHelper.Styler(this),i=n.getID(),o=e.element('<div class="item item-body"></div>');o[0].setAttribute("id",i);var r=this.get("class","").split(" ");for(var l in r)n.addClass(r[l]);return o[0]=a.DomHelper.angularDirectives(o[0],this.get("directives",[])),n.stylize(o[0]),o[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=window.LightDom.element("<ion-item></ion-item>");return e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),i[0].setAttribute("id",n),i[0]=a.DomHelper.angularDirectives(i[0],e.get("directives",[])),t.stylize(i[0]),i},getDomNodeForInsertingChildren:function(e){return e[0]}}}})}]),a.config(["ComponentTypesProvider",function(e){e.addType("list-item","ListItemComponent",{type:"list-item",name:"List Item",weight:1,iconUrl:"/img/component-list-item.png",list:!0})}]).config(["ComponentTypesProvider",function(e){e.addType("list-item-thumbnail2","ListItemComponent",{type:"list-item",name:"Thumbnail List Item",weight:1,iconUrl:"/img/component-list-thumbnail.png",list:!0,overwriteValues:{type:"thumbnail"}})}]).config(["ComponentTypesProvider",function(e){e.addType("list-item-icon","ListItemComponent",{type:"list-item",name:"Icon List Item",weight:1,iconUrl:"/img/component-list-icon.png",list:!0,overwriteValues:{type:"icon"}})}]).config(["ComponentTypesProvider",function(e){e.addType("list-item-avatar","ListItemComponent",{type:"list-item",name:"Avatar List Item",weight:1,iconUrl:"/img/component-list-avatar.png",list:!0,overwriteValues:{type:"avatar"}})}]).factory("ListItemComponent",["Component",function(e){return function(){var t=Object.create(new e("list-item",{link:{title:"Type",type:"route",value:"",category:"Link",fullwidth:!0,weight:0},linkobj:{title:"Link Data",type:"string",value:"",list:!1,category:"Miscellaneous"},linkView:{type:"string",value:"",list:!1,category:"Miscellaneous"},content:{title:"Content",type:"string",value:"Item",category:"Text",weight:7},secondline:{title:"Line #2",type:"string",value:"",category:"Text",ngShow:function(e){var t=e.get("type","default");return"thumbnail"==t||"avatar"==t},weight:8},secondLineWordWrap:{title:"Word Wrap",type:"boolean",value:!1,category:"Text",ngShow:function(e){var t=e.get("type","default");return"thumbnail"==t||"avatar"==t},weight:9},type:{title:"Type",type:"list2",value:"default",options:[{id:"default",text:"Regular"},{id:"icon",text:"Icon"},{id:"avatar",text:"Avatar"},{id:"thumbnail",text:"Thumbnail"}],formatter:function(e){return e.text},formatterSelection:function(e){return e.text},category:"Style",weight:1},iconStyle:{title:"Left Icon",category:"Style",type:"icon",value:"ion-ionic",ngShow:function(e){return"icon"==e.get("type","default")},weight:2},avatarImg:{title:"Avatar Image",forcetitle:!0,type:"urlupload",value:"",uploadText:"Upload Avatar...",fullwidth:!0,category:"Style",autoheight:!0,ngShow:function(e){return"avatar"==e.get("type","default")},weight:3},thumbnailImg:{title:"Thumbnail Image",forcetitle:!0,type:"urlupload",value:"",uploadText:"Upload Thumbnail...",fullwidth:!0,category:"Style",autoheight:!0,ngShow:function(e){return"thumbnail"==e.get("type","default")},weight:4},theme:{title:"Theme",type:"theme-color-allow-none",value:"none",category:"Style",prefix:"",weight:5},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:6},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},note:{title:"Note",type:"string",value:"",category:"Right Side",ngShow:function(e){var t=e.get("type","default");return"default"==t||"icon"==t},weight:10},rightIcon:{title:"Icon",category:"Right Side",type:"icon",value:"No Icon",weight:11},rightAccessory:{title:"Accessory",category:"Right Side",type:"boolean",value:!1,help:"Makes right icon smaller and gray",weight:12,feature:"!ionic2"},buttons:{category:"Swipe Buttons",type:"list-buttons",value:[],weight:13},style:{title:"Style",type:"string",value:"",list:!1,category:"Miscellaneous"},newProps:{list:!1,type:"boolean",value:!0,category:"Miscellaneous"},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,category:"Miscellaneous",feature:"!ionic2"}},{validChildren:[],forceOneParent:["list","form","card2"],recommendedParent:"list",toString:function(){return"ListItemComponent"},needsCompile:!0,onRemove:function(){window.Designer.AppGraph.removeLink(this)},onInsert:function(){window.Designer.AppGraph.addLink(this)},dom:function(e,t){function n(){if(""!==p.get("content","")){if(c);else;d=d+"<h2"+c+">"+p.get("content")+"</h2>"}}function i(){if(""!==p.get("secondline","")){var e="";p.get("secondLineWordWrap",!1)&&(e=' style="white-space:normal;"'),d=d+"<p"+e+">"+p.get("secondline")+"</p>"}}function o(e,t){if(window.multiFlag&&-1==e.indexOf("{{")&&-1==e.indexOf("}}")){if(e){var n=e.split("/");n=n[n.length-1],n=a.DomHelper.addDownloadForExport("img",e,n).name,d=d+'<img src="img/'+n+'" />'}}else e||window.compiling||(e=t),e?d=d+'<img src="'+e+'" />':d+="<img />"}function r(){""!==p.get("note","")&&(d=d+'<span class="item-note">'+p.get("note")+"</span>")}"ion-ionic"==this.get("iconStyle","")&&window.Designer.featureCheck("ionic2")&&this.set("iconStyle","ionic");var l=this.get("type","default"),s=[],d="";switch(l){case"icon":s.push("item-icon-left");break;case"avatar":s.push("item-avatar");break;case"thumbnail":s.push("item-thumbnail-left")}"No Icon"!==this.get("rightIcon","No Icon")&&s.push("item-icon-right");var c="";if("none"!==this.get("theme","none")&&(c=this.get("theme"),s.push(this.get("theme"))),0==s.length)var u="";else var u=' class="'+s.join(" ")+'"';d=d+"<ion-item"+u+">";var p=this;switch(l){case"default":d+=this.get("content"),r();break;case"icon":d=window.Designer.featureCheck("ionic2")?d+'<i ionicon3="'+this.get("iconStyle","ion-ionic")+'" class="icon"></i>':d+'<i class="icon '+this.get("iconStyle","ion-ionic")+'"></i>',
d+=this.get("content"),r();break;case"avatar":o(this.get("avatarImg",""),"/img/avatar-img.png"),n(),i();break;case"thumbnail":o(this.get("thumbnailImg",""),"/img/thumbnail-img.png"),n(),i()}if("No Icon"!==this.get("rightIcon","No Icon")){var g="";1==this.get("rightAccessory",!1)&&(g=" icon-accessory"),d=window.Designer.featureCheck("ionic2")?d+'<i ionicon3="'+this.get("rightIcon","ion-ionic")+'" class="icon'+g+'"></i>':d+'<i class="icon '+this.get("rightIcon","ion-ionic")+g+'"></i>'}for(var h=this.get("buttons",[]),m=0;m<h.length;m++){var f=h[m];d=d+'<ion-option-button class="button-'+f.theme+'">'+f.text+"</ion-option-button>"}this.parent&&""!=this.parent.get("enableDelete","")&&(d+='<ion-delete-button class="ion-minus-circled"></ion-delete-button>'),this.parent&&""!=this.parent.get("enableReorder")&&(d+='<ion-reorder-button class="ion-navicon"></ion-reorder-button>'),d+="</ion-item>";var v=e.element(d),y=a.DomHelper.Styler(this),w=y.getID();v[0].setAttribute("id",w),this.get("link","")&&(link=this.get("link"),a.DomHelper.href(v[0],link,this)),y.addClass(this.get("style"));var b=this.get("class","").split(" ");for(var m in b)y.addClass(b[m]);return v[0]=a.DomHelper.angularDirectives(v[0],this.get("directives",[])),y.stylize(v[0]),v[0]},ionic2:{generateDomNode:function(e){function t(e,t){if(!e||!window.multiFlag||-1!=e.indexOf("{{")||-1!=e.indexOf("}}"))return e||window.compiling||(e=t),e?'<img src="'+e+'" />':"<img />";if(e){var n=e.split("/");return n=n[n.length-1],n=a.DomHelper.addDownloadForExport("img",e,n).name,'<img src="assets/img/'+n+'" />'}}var n,i,o,r=a.DomHelper.Styler(e),l=r.getID(),s=e.get("type","default"),d=e.get("note","").trim(),c=e.get("avatarImg",""),u=e.get("thumbnailImg",""),p=e.get("iconStyle","ion-ionic"),g=e.get("content",""),h=e.get("secondLine",""),m=e.get("rightIcon","No Icon"),f=(e.get("note",""),e.get("buttons",[])),v=e.get("link",""),y=e.get("theme","none");if(0==f.length?(n=window.LightDom.element("<ion-item></ion-item>"),i=n[0]):(n=window.LightDom.element("<ion-item-sliding><ion-item></ion-item></ion-item-sliding>"),i=n[0].children[0],o=n[0]),i.setAttribute("color",y),"icon"==s)i.appendChild('<ion-icon name="'+p+'" item-left></ion-icon>');else if("avatar"==s){var w="<ion-avatar item-left>"+t(c,"/img/avatar-img.png")+"</ion-avatar>";i.appendChild(w)}else if("thumbnail"==s){var w="<ion-thumbnail item-left>"+t(u,"/img/thumbnail-img.png")+"</ion-thumbnail>";i.appendChild(w)}return"icon"==s||"default"==s?g.length&&i.appendChild(g):("avatar"==s||"thumbnail"==s)&&(g.length&&i.appendChild("<h2>"+g+"</h2>"),h.length&&i.appendChild("<p>"+g+"</p>")),("icon"==s||"default"==s)&&(d.length&&i.appendChild("<ion-note item-right>"+d+"<ion-note>"),"No Icon"!==m&&i.appendChild('<ion-icon name="'+m+'" item-right></ion-icon>')),f.length&&o.appendChild('<ion-item-options side="left"></ion-item-options>'),f.forEach(function(e){o.children[1].appendChild('<button ion-button color="'+e.theme+'">'+e.text+"</button>")}),v.length&&a.DomHelper.href(i,v,e),r.addClass(e.get("style")),e.get("class","").split(" ").forEach(function(e){r.addClass(e)}),i.setAttribute("id",l),i=a.DomHelper.angularDirectives(i,e.get("directives",[])),r.stylize(i),n},getDomNodeForInsertingChildren:function(e){return null}}}));return t}}]),a.config(["ComponentTypesProvider",function(e){e.add("list",{type:"list-item",name:"List",weight:0,iconUrl:"/img/component-list.png",properties:{"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},fullwidth:{title:"Full Width",type:"boolean",value:!1,category:"Style",fullwidth:!0,weight:11},buttonTutorial:{category:"Buttons",type:"tutorial-video",tutorialid:"listitembuttons",weight:14.5,feature:"!ionic2"},enableDelete:{title:"Delete",category:"Buttons",type:"string",pro:!0,value:"",help:"Set this to a $scope variable that is togged to true/false based on whether or not to show the Delete buttons (ex. set this to showDeleteButtons, where $scope.showDeleteButtons is set to true/false). Since Code is required to use this feature, Pro is also required.",weight:13,list:!0,feature:"!ionic2"},enableReorder:{title:"Reorder",category:"Buttons",type:"string",pro:!0,value:"",help:"Set this to a $scope variable that is togged to true/false based on whether or not to show the Reorder buttons (ex. set this to showReorderButtons, where $scope.showReorderButtons is set to true/false). Since Code is required to use this feature, Pro is also required.",weight:14,list:!0,feature:"!ionic2"},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{validChildren:["list-item","input","toggle"],validCategories:["forms","list-item"],toString:function(){return"ListComponent"},getRenderedChildren:function(){return this.$rendered.children[0].children},getRenderedTarget:function(){return this.$rendered.children[0]},addDefaultChildren:function(){var e=this.create("list-item");e.set("content",{value:"Item 1"}),this.appendChild(e,!0),e=this.create("list-item"),e.set("content",{value:"Item 2"}),this.appendChild(e,!0),e=this.create("list-item"),e.set("content",{value:"Item 3"}),this.appendChild(e,!0)},dom:function(e,t){var n=t.createElement("ion-list"),i=a.DomHelper.Styler(this),o=i.getID();n.setAttribute("id",o),""!=this.get("enableDelete","")&&n.setAttribute("show-delete",this.get("enableDelete")),""!=this.get("enableReorder","")&&n.setAttribute("show-reorder",this.get("enableReorder"));var r=this.get("fullwidth",!1);1==r&&i.addClass("manual-list-fullwidth");var l=this.get("class","").split(" ");for(var s in l)i.addClass(l[s]);return n=a.DomHelper.angularDirectives(n,this.get("directives",[])),i.stylize(n),n},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=window.LightDom.element("<ion-list></ion-list>");return e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),i[0].setAttribute("id",n),i[0]=a.DomHelper.angularDirectives(i[0],e.get("directives",[])),t.stylize(i[0]),i},getDomNodeForInsertingChildren:function(e){return e[0]}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("map",{type:"content",name:"Map",iconUrl:"/img/component-map.png",weight:0,feature:"!ionic2",list:!0,properties:{location:{type:"string",title:"Address",value:"Madison Capital",category:"Map Settings"},zoom:{type:"int",title:"Zoom",value:12,category:"Map Settings"},maptype:{title:"Map Type",type:"list",value:"",options:[{value:"hybrid",text:"Hybrid"},{value:"roadmap",text:"Roadmap"},{value:"satellite",text:"Satellite"},{value:"terrain",text:"Terrain"}],emptyText:"Default",category:"Map Settings"},marker:{type:"boolean",title:"Show Marker",value:!0,category:"Map Settings"},defaultUI:{type:"boolean",title:"Include Default UI",value:!0,category:"Map Settings"},draggable:{type:"boolean",title:"Draggable",value:!0,category:"Map Settings"},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},mapsize:{category:"Style",title:"Size",type:"size",value:"",weight:2},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"},modifiedScroll:{title:"",type:"boolean",value:!1,list:!1}},obj:{validChildren:[],addonRequired:"Googlemaps",proRequired:!0,dom:function(e,t){""===this.get("mapsize","")&&this.set("mapsize",{width:"100%",height:"300px",fullWidth:!1});var n=this.get("mapsize"),i=n.width,o=n.height,a="display:block;position:relative;";if(n.fullWidth&&this.getParentPage().get("ionicpadding",!0)&&(a+="margin-left:-10px;",i="calc(100% + 20px)"),"100%"==o?1==this.getParentPage().get("scroll")&&(this.getParentPage().set("scroll",!1),this.set("modifiedScroll",!0)):1==this.get("modifiedScroll",!1)&&(this.getParentPage().set("scroll",!0),this.set("modifiedScroll",!1)),window.compiling){var r={};0==this.get("defaultUI",!0)&&(r.disableDefaultUI=!0),0==this.get("draggable",!0)&&(r.draggable=!1),""!==this.get("maptype","")&&(r.mapTypeId=this.get("maptype"));var l="<creator-map-component options='"+JSON.stringify(r)+"' marker='"+this.get("marker",!1)+"' location='"+this.get("location","Madison, WI")+"' zoom='"+this.get("zoom",12)+"' style='"+a+"width:"+i+";height:"+o+";'><ui-gmap-google-map ng-if='map.center' center='map.center' zoom='map.zoom' options='map.options'><ui-gmap-marker coords='map.marker.coords' idkey='map.marker.id' options='map.marker.options'></ui-gmap-marker></ui-gmap-google-map></creator-map-component>";return e.element(l)[0]}var s=t.createElement("div"),d={width:i,height:o,backgroundColor:"#e8ebef",position:"relative",background:"url('/img/maps-preview-img.png') center no-repeat",backgroundSize:"cover"};return i.indexOf("calc")>-1&&(d.marginLeft="-10px"),$(s).css(d),s}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("nav",{type:"nav",name:"Nav",weight:0,list:!1,properties:{style:{title:"Style",type:"button-styles",value:"bar-stable",options:[{value:"",text:"Default",color:"#fff"},{value:"bar-light",text:"Light",color:"#fff"},{value:"bar-stable",text:"Stable",color:"#f8f8f8"},{value:"bar-dark",text:"Dark",color:"#444"},{value:"bar-positive",text:"Positive",color:"#4a87ee"},{value:"bar-balanced",text:"Balanced",color:"#66cc33"},{value:"bar-assertive",text:"Assertive",color:"#ef4e3a"},{value:"bar-calm",text:"Calm",color:"#43cee6"},{value:"bar-energized",text:"Energized",color:"#f0b840"},{value:"bar-royal",text:"Royal",color:"#8a6de9"}]},showBackTitle:{title:"Show Back Title",type:"boolean",value:!0}},obj:{isContainer:!0,canDuplicate:!1,canDelete:!1,canSelect:!1,disableDragging:!0,validChildren:[],needsCompile:!0,getRenderTarget:function(e){return e.querySelector("ion-nav-view")},getRenderedTarget:function(){return this.$rendered.querySelector("ion-nav-view")},dom:function(e,t){if("sidemenutabs"==window.Designer.getExtra("appType")&&window.compiling)return window.DocumentRenderer.renderChildTree(window.Designer.getById("side-menu21"));var n="bar-"+window.Designer.Themes.settings.headerBackgroundTheme;if(window.Designer.getActivePage()&&"side-menu2"==window.Designer.getActivePage().componentType)var n="bar-"+window.Designer.Themes.settings.sideMenuHeaderBackgroundTheme;showBackTitle_HTML="<ion-nav-back-button></ion-nav-back-button>";var i=e.element("<div><ion-nav-bar>"+showBackTitle_HTML+"</ion-nav-bar><ion-nav-view></ion-nav-view></div>"),o=i.find("ion-nav-bar");return o.addClass(n),i[0]}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("page",{type:"page",name:"Page",weight:0,list:!1,properties:{parentState:{type:"string",list:!1,value:""},parameters:{type:"route-parameters",value:[],category:"Route Parameters",weight:1.5},htmlBased:{type:"boolean",list:!1,value:!1},convertPage:{title:"",type:"convertpage",value:"",category:"Miscellaneous",weight:100,feature:"!ionic2"},outlineIcon:{type:"string",list:!1,value:""},parentView:{type:"string",list:!1,value:""},idName:{type:"string",list:!1,value:""},ionic2names:{type:"string",list:!1,value:""},"abstract":{type:"boolean",list:!1,value:!1},hasContent:{type:"boolean",title:"Has Content",value:!0,placeholder:"Page title",weight:1,list:!1},title:{type:"string",title:"Title",value:"",placeholder:"Page title",noTemplating:!0,weight:1,onchange:function(){window.Designer.send("page.newTitle",{pageTitle:this.value,pageId:window.Designer.getSelectedComponent().id}),window.Designer.AppGraph.updatePageRoutes()}},myuisref:{type:"myuisref",value:"",help:"This value can be used with $state.go and the ui-sref directive. However, please note that this value can change based on your title!",title:"State (sref)",weight:2},url:{type:"slashurl",title:"Routing URL",value:"",weight:1,placeholder:"URL",advanced:!0},routeViews:{list:!1,value:""},previewPage:{value:"",list:!1},ionicpadding:{title:"Padding",type:"boolean",value:!0,weight:30,category:"Miscellaneous"},scroll:{title:"Scrolling",type:"boolean",value:!0,weight:31,category:"Miscellaneous"},backgroundColor:{title:"Color",type:"color-picker",value:"",category:"Background",weight:2},backgroundImg:{type:"urlupload",value:"",placeholder:"Image URL",uploadText:"Upload Image...",weight:3,category:"Background",autoheight:!0,fullwidth:!0},leftButton:{title:"Enable",type:"boolean",value:!1,category:"Left Header Button",weight:10},leftButtonIcon:{title:"Icon",type:"icon",value:"No Icon",category:"Left Header Button",weight:11},leftButtonText:{title:"Text",type:"string",value:"",category:"Left Header Button",weight:12},leftButtonTheme:{title:"Theme",type:"theme-color-allow-none",value:"none",category:"Left Header Button",weight:13,ngShow:function(e){return 1==e.get("leftButtonClear",!1)?!0:!1}},leftButtonClear:{title:"Style as Button",type:"boolean",value:!1,category:"Left Header Button",weight:14},rightButton:{title:"Enable",type:"boolean",value:!1,category:"Right Header Button",weight:15},rightButtonIcon:{title:"Icon",type:"icon",value:"No Icon",category:"Right Header Button",weight:16},rightButtonText:{title:"Text",type:"string",value:"",category:"Right Header Button",weight:17},rightButtonTheme:{title:"Theme",type:"theme-color-allow-none",value:"none",category:"Right Header Button",weight:18,ngShow:function(e){return 1==e.get("rightButtonClear",!1)?!0:!1}},rightButtonClear:{title:"Style as Button",type:"boolean",value:!1,category:"Right Header Button",weight:19},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:25},showSideMenu:{title:"Show Side Menu Button",type:"boolean",category:"Miscellaneous",weight:29.5,value:!0,feature:"ionic2",ngShow:function(e){var t=window.Designer.getExtra("appType");return"sidemenu"==t||"sidemenutabs"==t?!0:!1}},disableBackButton:{title:"Disable Back Button",type:"boolean",value:!1,weight:32,category:"Miscellaneous"},hideHeader:{title:"Hide Header",type:"boolean",value:!1,weight:33,category:"Miscellaneous"},hasHeader:{title:"Header Margin",type:"boolean",value:!0,weight:34,category:"Miscellaneous"},hasFooter:{title:"Footer Margin",type:"boolean",value:!1,weight:34,category:"Miscellaneous",list:!1},disableParenting:{title:"Disable Parenting",type:"boolean",value:!1,weight:36,help:"Removes Tabs or Side Menus that were added automatically. Side Menus in the Side-Menu+Tabs project cannot be removed in Creator.",onchange:function(){window.Designer.AppGraph.updatePageRoutes()},category:"Miscellaneous"},disableCache:{title:"Disable Caching",type:"boolean",value:!1,weight:37,help:"Prevents this page from being cached.",category:"Miscellaneous"},disableTransition:{title:"Disable Transition",type:"boolean",value:!1,weight:38,help:"Disables the Transition on Navigation",category:"Miscellaneous"},"class":{title:"Classes",type:"class",value:"",category:"Miscellaneous",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:39},newProps:{list:!1,type:"boolean",value:!0},info:{list:!1},oldUISref:{list:!1,value:"",type:"string"}},obj:{isContainer:!0,canDuplicate:!1,showSelectControls:!1,disableDragging:!0,isPage:!0,canRedrawSingle:!1,needsCompile:!0,onRemove:function(){window.Designer.AppGraph.removePage(this)},updateChildLinks:function(){},getUISref:function(){for(var e=this.get("idName"),t=this;t&&""!==t.get("parentState");){var n=t.get("parentState");t=window.Designer.getById(n),t&&(e=t.get("idName")+"."+e)}return e},getFullPageUrl:function(){function e(t){return t=window.Designer.getById(t),t?""!=t.get("parentState")?e(t.get("parentState"))+t.get("url"):t.get("url"):""}return""!=this.get("parentState")?e(this.get("parentState"))+this.get("url"):this.get("url")},replaceRendered:function(e,t){1!=this.get("htmlBased")?this.get("scroll")&&this.get("ionicpadding")&&t(e.querySelector(".scroll")).addClass("padding"):t(e.querySelector(".scroll"))&&"true"==t(e.querySelector("ion-content")).attr("padding")&&t(e.querySelector(".scroll")).addClass("padding")},getRenderTarget:function(e){return e.querySelector("ion-content")},getRenderedTarget:function(){return this.get("scroll")===!0?this.$rendered.querySelector(".scroll"):this.$rendered.querySelector("ion-content")},getRenderedChildren:function(){return this.get("scroll")===!0?this.$rendered.querySelector(".scroll").children:this.$rendered.querySelector("ion-content").children},afterId:function(){this.set("url","/"+this.getId())},dom:function(e,t){function n(e){if(1==o.get(e+"Button",!1)){if(i=i+'<ion-nav-buttons side="'+e+'"><button class="button',0==o.get(e+"ButtonClear",!1)&&(i+=""==o.get(e+"ButtonIcon","")?" button-clear":" button-icon"),"none"!==o.get(e+"ButtonTheme","none")&&1==o.get(e+"ButtonClear",!1)&&(i=i+" button-"+o.get(e+"ButtonTheme")),""!==o.get(e+"ButtonIcon","")&&(i=window.Designer.featureCheck("ionic2")?i+' icon " ionicon3="'+o.get(e+"ButtonIcon"):i+" icon "+o.get(e+"ButtonIcon")),i+='">',""!==o.get(e+"ButtonText","")){var t="";""!==o.get(e+"ButtonIcon","")&&(t=" "),i=i+t+o.get(e+"ButtonText")}i+="</button></ion-nav-buttons>"}}var i="",o=this;if(n("left"),n("right"),1==this.get("htmlBased")){var r=Designer.Coding.getContents(this.getId()+"-HTML");if(window.multiFlag)for(var l=new RegExp("[\"']https://s3.amazonaws.com/ionic-io-static/([^\"']+)[\"']","g"),s=r.match(l)||[],d=0;d<s.length;d++){var c=s[d].split("/");c=c[c.length-1],downloadimg=s[d].substring(1,s[d].length-1),c=a.DomHelper.addDownloadForExport("img",downloadimg,c).name,r=r.replace(s[d],'"img/'+c+'"')}return e.element(r)[0]}if(Designer.featureCheck("!automagic-navigation")&&1==this.get("disableParenting",!1)&&""!==this.get("parentView")){var u=Designer.getById(this.get("parentView"));if("undefined"!=typeof u){var p=u.get("pages"),g=[];if("undefined"!=typeof p.pages){for(var d=0;d<p.pages.length;d++)p.pages[d].id!=this.getId()&&g.push(p.pages[d]);u.set("pages",{pages:g})}}this.set("parentView",""),this.set("parentState","")}var h=this.get("hideHeader",!1),m="";h&&(m=' hide-nav-bar="true"');var f=this.get("disableBackButton",!1),v="";f&&(v=' hide-back-button="true"');var y=this.get("hasHeader",!1),w=(this.get("hasFooter",!1),this.get("disableCache",!1)),b="";w&&(b=' cache-view="false"');var C=this.get("disableTransition",!1),S="";C&&(S=' nav-transition="none"');var D="";0==this.get("abstract",!1)&&(D=' title="'+this.get("title","Page")+'"');var x=e.element("<ion-view"+D+m+v+b+S+"></ion-view>"),$=a.DomHelper.Styler(this),P=$.getID();x[0].setAttribute("id",P);var T=i+'<ion-content padding="'+this.get("ionicpadding")+'"';if(""!=this.get("backgroundImg","")){var k=this.get("backgroundImg");if(window.multiFlag){var c=k.split("/");c=encodeURIComponent(c[c.length-1]),c=a.DomHelper.addDownloadForExport("img",this.get("backgroundImg"),c).name,k="img/"+c}k=k.split("/"),k[k.length-1]=encodeURIComponent(k[k.length-1]),k=k.join("/"),T=T+' style="background: url('+k+') no-repeat center;background-size:cover;"'}""!=this.get("backgroundColor","")&&$.addCSS("background-color",this.get("backgroundColor"));var I="";h&&y&&(I="manual-ios-statusbar-padding"),y||(I+=" manual-remove-top-padding"),""!==I&&(T=T+'class="'+I+'"'),T+="></ion-content>";var _=e.element(T);this.get("scroll",!0)===!1&&_.attr("scroll","false"),h||_.addClass("has-header"),this.get("hasContent",!0)&&x.append(_);var E=this.get("class","").split(" ");for(var d in E)$.addClass(E[d]);return $.stylize(x[0]),x=a.DomHelper.angularDirectives(x[0],this.get("directives",[]))},ionic2:{generateDomNode:function(e){function t(t){var n="";if(1==e.get(t+"Button",!1)){n="<button ion-button";var i=e.get(t+"ButtonText",""),o=e.get(t+"ButtonIcon","");"No Icon"==o&&(o="");var a=e.get(t+"ButtonClear",!1);""==i&&""!==o?n+=" icon-only":""!==i&&""!==o&&(n+=" icon-left"),a&&(n+=" solid");var r="";""!==o&&(r='<ion-icon name="'+o+'"></ion-icon>'),n+=">"+r+i+"</button>","left"==t?n="<ion-buttons start>"+n+"</ion-buttons>":"right"==t&&(n="<ion-buttons end>"+n+"</ion-buttons>")}return n}var n=a.DomHelper.Styler(e),i=n.getID(),o="";e.get("ionicpadding")&&(o=" padding");var r=e.get("title","Page"),l=e.get("hideHeader",!1),s="",d=t("left"),c=t("right"),u=window.Designer.getExtra("appType"),p="";if("sidemenu"!=u&&"sidemenutabs"!=u||!e.get("showSideMenu",!1)||(p='<button ion-button menuToggle><ion-icon name="menu"></ion-icon></button>'),l||(s="<ion-header><ion-navbar>"+p+d+"<ion-title>"+r+"</ion-title>"+c+"</ion-navbar></ion-header>"),nodes=window.LightDom.element(s+"<ion-content"+o+"></ion-content>"),""!=e.get("backgroundImg","")){var g=e.get("backgroundImg");if(window.multiFlag){var h=g.split("/");h=encodeURIComponent(h[h.length-1]),h=a.DomHelper.addDownloadForExport("img",e.get("backgroundImg"),h).name,g="assets/img/"+h}g=g.split("/"),g[g.length-1]=encodeURIComponent(g[g.length-1]),g=g.join("/"),nodes[l?0:1].setStyleVal({background:"url("+g+") no-repeat center","background-size":"cover"})}return""!=e.get("backgroundColor","")&&n.addCSS("background-color",e.get("backgroundColor")),nodes[l?0:1].setAttribute("id",i),n.stylize(nodes[l?0:1]),nodes},getDomNodeForInsertingChildren:function(e,t){var n=1==t.get("hideHeader",!1)?0:1;return e[n]}}}})}]),a.config(["ComponentTypesProvider",function(e){e.addType("markdown","MarkdownComponent",{type:"1",name:"Paragraph",weight:1,iconUrl:"/img/component-paragraph.png"})}]).factory("MarkdownComponent",["Component",function(e){return function(){var t=Object.create(new e("markdown",{fontsize:{title:"Size",type:"int",value:"",placeholder:"Default",unit:"px",category:"Text"},fontcolor:{title:"Color",type:"color-picker",value:"#000000",category:"Text"},alignment:{title:"Align",category:"Text",type:"align",value:"left",text:!0},content:{title:"Content",help:"Markdown format supported.",type:"editor",language:"markdown",value:"Some friendly **markdown**",category:"Text"},noPadding:{title:"Padding",type:"boolean",value:!0,category:"Style"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0}},{needsCompile:!0,validChildren:[],dom:function(e,t){var n=a.DomHelper.Styler(this),i=n.getID(),o=markdown.toHTML(this.get("content")),r=e.element("<div>"+o+"</div>");"undefined"==typeof r[0]&&(r=e.element("<p></p>")),r[0].setAttribute("id",i),0==this.get("noPadding")&&n.addCSS("margin-top","0px","p"),""!==this.get("fontcolor","")&&n.addCSS("color",this.get("fontcolor"),"p",{multiple:!0}),""!==this.get("fontsize","")&&n.addCSS("font-size",this.get("fontsize")+"px","p",{multiple:!0});var l=this.get("alignment","left");"left"!==l&&n.addCSS("text-align",l),n.addClass("show-list-numbers-and-dots");var s=this.get("class","").split(" ");for(var d in s)n.addClass(s[d]);return r[0]=a.DomHelper.angularDirectives(r[0],this.get("directives",[])),n.stylize(r[0]),r[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=e.get("noPadding"),o=e.get("fontcolor",""),r=e.get("fontsize",""),l=e.get("alignment","left"),s=markdown.toHTML(e.get("content","")),d=window.LightDom.element("<div>"+s+"</div>");return 0==i&&t.addCSS("margin-top","0px","p"),o&&t.addCSS("color",o,"p",{multiple:!0}),r&&t.addCSS("font-size",r+"px","p",{multiple:!0}),"left"!==l&&t.addCSS("text-align",l),t.addClass("show-list-numbers-and-dots"),e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),d[0].setAttribute("id",n),d[0]=a.DomHelper.angularDirectives(d[0],e.get("directives",[])),t.stylize(d[0]),d},getDomNodeForInsertingChildren:function(e){return null}}}));return t}}]),a.factory("Property",function(){return function(e,t){var n={getKey:function(){return e},setValue:function(e){this.value=e}};return angular.extend(n,t),n}}),a.config(["ComponentTypesProvider",function(e){e.add("radio",{type:"forms",name:"Radio",iconUrl:"/img/component-radio.png",weight:3,properties:{title:{title:"Title",type:"string",value:"Radio",category:"Text"},name:{title:"Category",help:'Make radios that are related all have the same Category (ex. 3 radios with Category color). This is the same as the "name" HTML attribute for <input>.',type:"string",value:"",category:"Text"},selected:{title:"Checked",type:"boolean",value:!1,category:"Text",list:!1},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{validChildren:[],needsCompile:!0,forceOneParent:["list","form"],recommendedParent:"form",dom:function(e,t){var n=e.element("<ion-radio>"+this.get("title")+"</ion-radio>"),i=a.DomHelper.Styler(this),o=i.getID();n[0].setAttribute("id",o),this.get("name")&&n.attr("name",this.get("name"));var r=this.get("class","").split(" ");for(var l in r)i.addClass(r[l]);return n[0]=a.DomHelper.angularDirectives(n[0],this.get("directives",[])),i.stylize(n[0]),n[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=e.get("title",""),o=e.get("name",null),r=window.LightDom.element("<ion-item></ion-item>"),l=window.LightDom.element("<ion-label>"+i+"</ion-label>")[0],s=window.LightDom.element("<ion-radio></ion-radio>")[0];return o&&s.setAttribute("name",o),r[0].appendChild(l),r[0].appendChild(s),e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),r[0].setAttribute("id",n),r[0]=a.DomHelper.angularDirectives(r[0],e.get("directives",[])),t.stylize(r[0]),r},getDomNodeForInsertingChildren:function(e){return null}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("range",{type:"forms",name:"Range",iconUrl:"/img/component-range.png",weight:4,properties:{title:{title:"Title",type:"string",value:"Range",category:"Text"},name:{title:"Name",type:"string",value:"",category:"Text"},min:{title:"Min",type:"int",value:0,category:"Slider"},max:{title:"Max",type:"int",value:100,category:"Slider"},step:{title:"Step",type:"int",value:1,category:"Slider"},value:{title:"Value",type:"int",value:50,category:"Slider"},style:{title:"Style",type:"theme-color",help:"To customize these colors, open theming options by clicking on the paintbrush in the top right of your screen.",value:"positive",category:"Style"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{validChildren:[],needsCompile:!0,forceOneParent:["list","form"],recommendedParent:"form",dom:function(e,t){this.get("style").indexOf("range-")>-1&&this.set("style",this.get("style").replace("range-",""));var n=e.element('<ion-item class="range"><input type="range" value="'+this.get("value")+'"></ion-item>'),i=a.DomHelper.Styler(this),o=i.getID();n[0].setAttribute("id",o);var r=e.element(n.children(0));r.attr("min",this.get("min",0)),r.attr("max",this.get("max",100)),r.attr("step",this.get("step",1)),this.get("name")&&r.attr("name",this.get("name")),n.addClass("range-"+this.get("style")),n.prepend(this.get("title"));var l=this.get("class","").split(" ");for(var s in l)i.addClass(l[s]);return n[0]=a.DomHelper.angularDirectives(n[0],this.get("directives",[]),"input"),i.stylize(n[0]),n[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=e.get("min",0),o=e.get("max",100),r=e.get("step",1),l=e.get("style","positive"),s=e.get("title",""),d=e.get("name",""),c=e.get("value",50),u=window.LightDom.element("<ion-item></ion-item>"),p=window.LightDom.element('<ion-range min="'+i+'" max="'+o+'" step="'+r+'" color="'+l+'" value="'+c+'"></ion-range>')[0];d&&p.setAttribute("name",d);var g=window.LightDom.element("<ion-label range-left>"+s+"</ion-label>")[0];return u[0].appendChild(p),s&&p.appendChild(g),e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),u[0].setAttribute("id",n),u[0]=a.DomHelper.angularDirectives(u[0],e.get("directives",[])),t.stylize(u[0]),u},getDomNodeForInsertingChildren:function(e){return null}}}})}]),a.config(["ComponentTypesProvider",function(t){t.add("search",{type:"forms",name:"Search",iconUrl:"/img/component-search.png",weight:2,properties:{placeholder:{title:"Placeholder",type:"string",value:"",category:"Text"},name:{title:"Name",type:"string",value:"",category:"Text"},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"},newProps:{list:!1,type:"boolean",value:!0}},obj:{validChildren:[],needsCompile:!0,forceOneParent:["list","form"],recommendedParent:"form",dom:function(t,n){var i="ion-search";window.Designer.featureCheck("ionic2")&&(i="ion-ios-search");var o=t.element('<label class="item item-input"><i class="icon '+i+' placeholder-icon"></i><input type="search" placeholder="'+e(this.get("placeholder"))+'"></label>'),r=a.DomHelper.Styler(this),l=r.getID();o[0].setAttribute("id",l),this.get("name")&&o.attr("name",this.get("name"));var s=this.get("class","").split(" ");for(var d in s)r.addClass(s[d]);return o[0]=a.DomHelper.angularDirectives(o[0],this.get("directives",[]),"input"),r.stylize(o[0]),o[0]},ionic2:{generateDomNode:function(t){var n=a.DomHelper.Styler(t),i=n.getID(),o=e(t.get("placeholder")),r=t.get("name",""),l=window.LightDom.element('<ion-searchbar placeholder="'+o+'"></ion-searchbar>');return l[0].setAttribute("name",r),t.get("class","").split(" ").forEach(function(e){n.addClass(e)}),l[0].setAttribute("id",i),l[0]=a.DomHelper.angularDirectives(l[0],t.get("directives",[])),n.stylize(l[0]),l},getDomNodeForInsertingChildren:function(e){return null}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("select",{type:"forms",name:"Select",iconUrl:"/img/component-select.png",weight:4,properties:{title:{title:"Title",type:"string",value:"Select",category:"Text"},name:{title:"Name",type:"string",value:"",category:"Text"},placeholder:{title:"Placeholder",type:"string",value:"",list:!1,category:"Text"},options:{title:"Options",type:"textlist",value:"",category:"Options",fullwidth:!0,autoheight:!0},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{validChildren:[],needsCompile:!0,forceOneParent:["list","form"],recommendedParent:"form",dom:function(e,t){var n='<label class="item item-select"><span class="input-label">'+this.get("title")+"</span><select>",i=this.get("options",{options:[]});if("undefined"!=typeof i.length){this.set("options",{options:[]});var i={options:[]}}for(var o=0;o<i.options.length;o++)n=n+"<option>"+i.options[o].value+"</option>";n+="</select></label>";var r=e.element(n),l=a.DomHelper.Styler(this),s=l.getID();r[0].setAttribute("id",s),this.get("name")&&r.attr("name",this.get("name"));var d=this.get("class","").split(" ");
for(var o in d)l.addClass(d[o]);return r[0]=a.DomHelper.angularDirectives(r[0],this.get("directives",[]),"select"),l.stylize(r[0]),r[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=e.get("title",""),o=e.get("options",{options:[]}).options,r=e.get("name",""),l=window.LightDom.element("<ion-item></ion-item>"),s=window.LightDom.element("<ion-label>"+i+"</ion-label>")[0],d=window.LightDom.element("<ion-select></ion-select>")[0];return d.setAttribute("name",r),o.forEach(function(e){d.appendChild("<ion-option>"+e.value+"</ion-option>")}),l[0].appendChild(s),l[0].appendChild(d),e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),l[0].setAttribute("id",n),l[0]=a.DomHelper.angularDirectives(l[0],e.get("directives",[])),t.stylize(l[0]),l},getDomNodeForInsertingChildren:function(e){return null}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("side-menu2",{type:"page",name:"Side Menu",weight:0,list:!1,properties:{parentState:{type:"string",list:!1,value:""},sidemenu:{type:"boolean",value:!0,list:!1},outlineIcon:{type:"string",list:!1,value:""},parentView:{type:"string",list:!1,value:""},idName:{type:"string",list:!1,value:""},"abstract":{type:"boolean",list:!1,value:!0},tabsHack:{type:"boolean",list:!1,value:!0},hasContent:{type:"boolean",title:"Has Content",value:!0,placeholder:"Page title",weight:1,list:!1},title:{type:"string",title:"Title",value:"",placeholder:"Page title",weight:1,onchange:function(){window.Designer.AppGraph.updatePageRoutes()}},url:{type:"slashurl",title:"Routing URL",value:"",weight:1,placeholder:"URL",advanced:!0},previewPage:{value:"",list:!1},side:{title:"Menu Side",value:"left",weight:2,type:"list",options:[{value:"left",text:"Left"},{value:"right",text:"Right"}],hideEmpty:!0},root:{value:!1,list:!1,type:"boolean"},defaultPage:{title:"Default Page",type:"defaultpage",value:"",feature:"automagic-navigation",weight:2,list:!1},exposeAsideWhen:{title:"Keep Open when Large",type:"boolean",value:!1,weight:3,category:"Miscellaneous",list:!1},ionicpadding:{title:"Padding",type:"boolean",value:!1,weight:5,category:"Miscellaneous"},scroll:{title:"Scrolling",type:"boolean",value:!0,weight:6,category:"Miscellaneous"},backgroundColor:{title:"Color",type:"color-picker",value:"",category:"Background",weight:2},backgroundImg:{type:"urlupload",value:"",placeholder:"Image URL",uploadText:"Upload Image...",weight:3,category:"Background",autoheight:!0,fullwidth:!0},enableBack:{title:"Enable with Back Views",type:"boolean",value:!1,weight:4,category:"Miscellaneous",help:"Still show the Side Menu icon even if you're in a view with a back button."},hideHeader:{title:"Hide Header",type:"boolean",value:!1,weight:6,category:"Miscellaneous"},hasHeader:{title:"Header Margin",type:"boolean",value:!0,weight:7,category:"Miscellaneous"},hasFooter:{title:"Footer Margin",type:"boolean",value:!1,weight:8,category:"Miscellaneous",list:!1},pages:{title:"Pages",type:"pages",value:"",list:!1},disableParenting:{title:"Disable Parenting",type:"boolean",value:!0,list:!1,category:"Miscellaneous"},"class":{title:"Classes",type:"class",value:"",category:"Miscellaneous",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},newProps:{list:!1,type:"boolean",value:!0}},obj:{isContainer:!0,canDuplicate:!1,canDelete:!1,disableDragging:!0,isPage:!0,canRedrawSingle:!1,info:"Only one menu per app is allowed, Menu cannot be deleted or duplicated.",needsCompile:!0,updateChildLinks:function(){function e(n){for(var i=0;i<n.children.length;i++){var o=n.children[i];o.get("link",!1)&&t.push(o.get("link")),o.children.length>0&&e(o)}}if(window.Designer.featureCheck("!automagic-navigation")){var t=[];e(this);for(var n=window.Designer.getPages(),i=0;i<n.length;i++){var o=n[i];o.get("parentState")==this.getId()&&-1==t.indexOf(o.getId())&&(o.set("parentState",""),o.set("parentView","")),""!==o.get("parentState","")&&o.get("parentState","")!==this.getId()&&-1!==t.indexOf(o.getId())&&t.splice(t.indexOf(o.getId()),1)}for(var a={pages:[]},i=0;i<t.length;i++){var o=window.Designer.getById(t[i]);0==o.get("disableParenting",!1)&&(o.set("parentState",this.getId()),o.set("parentView",this.getId()),a.pages.push({id:t[i]}))}this.set("pages",a)}},getFullPageUrl:function(){function e(t){return t=window.Designer.getById(t),""!=t.get("parentState")?e(t.get("parentState"))+t.get("url"):t.get("url")}return""!=this.get("parentState")?e(this.get("parentState"))+this.get("url"):this.get("url")},replaceRendered:function(e,t){this.get("scroll")&&this.get("ionicpadding")&&t(e.querySelector(".scroll")).addClass("padding")},getRenderTarget:function(e){return e.querySelector("ion-content")},getRenderedTarget:function(){return this.get("scroll")===!0?this.$rendered.querySelector(".scroll"):this.$rendered.querySelector("ion-content")},getRenderedChildren:function(){return this.get("scroll")===!0?this.$rendered.children[0].children[0].children:this.$rendered.children[0].children},addDefaultChildren:function(){if(window.Designer.featureCheck("automagic-navigation")){if(0==this.get("root",!1)){var e=window.Designer.addPage();e.set("url","/"+e.getId()),e.set("title","Home");var t=this.create("list-item");t.set("content","Home"),t.set("link",e.getId()),this.appendChild(t,!0),window.Designer.AppGraph.addLink(t),window.Designer.setExtra("startingPage",e.getId());var n=window.Designer.addPage();n.set("url","/"+n.getId()),n.set("title","Cart");var i=this.create("list-item");i.set("content","Cart"),i.set("link",n.getId()),this.appendChild(i,!0),window.Designer.AppGraph.addLink(i);var o=window.Designer.addPage();o.set("url","/"+o.getId()),o.set("title","Cloud");var a=this.create("list-item");a.set("content","Cloud"),a.set("link",o.getId()),this.appendChild(a,!0),window.Designer.AppGraph.addLink(a)}}else{var t=this.create("list-item");t.set("content","Item 1"),this.appendChild(t,!0);var i=this.create("list-item");i.set("content","Item 2"),this.appendChild(i,!0);var a=this.create("list-item");a.set("content","Item 3"),this.appendChild(a,!0)}},afterId:function(){console.log("PAGE AFTER ID",this),this.set("url","/"+this.getId())},dom:function(e,t){var n=a.DomHelper.Styler(this),i=n.getID(),o=this.get("hideHeader",!1),r="";if(o&&(r=' hide-nav-bar="true"'),window.compiling){var l=this.get("side","left");""==l&&(l="left");var s="";this.get("exposeAsideWhen",!0)&&(s=' expose-aside-when="large"');var d='enable-menu-with-back-views="false"';this.get("enableBack",!1)&&(d='enable-menu-with-back-views="true"');var c='name="'+this.getId()+'"';"sidemenutabs"==window.Designer.getExtra("appType")&&(c="");var u="ion-navicon";window.Designer.featureCheck("ionic2")&&(u="ion-ios-menu");var p="<ion-side-menus "+d+'><ion-side-menu-content><ion-nav-bar class="bar-'+window.Designer.Themes.settings.headerBackgroundTheme+'"><ion-nav-back-button></ion-nav-back-button><ion-nav-buttons side="'+l+'"><button class="button button-icon button-clear '+u+'" menu-toggle="'+l+'"></button></ion-nav-buttons></ion-nav-bar><ion-nav-view '+c+'></ion-nav-view></ion-side-menu-content><ion-side-menu side="'+l+'" id="'+i+'"'+s+">";o||(p=p+'<ion-header-bar class="bar-'+window.Designer.Themes.settings.sideMenuHeaderBackgroundTheme+'"><div class="title">'+this.get("title","Page")+"</div></ion-header-bar>");var g=this.get("hasHeader",!1),h="",m=' style="';if(g&&!o?h=" has-header":m+="top:0px !important;",""!=this.get("backgroundImg","")){var f=this.get("backgroundImg");if(window.multiFlag){var v=f.split("/");v=encodeURIComponent(v[v.length-1]),v=a.DomHelper.addDownloadForExport("img",this.get("backgroundImg"),v).name,f="img/"+v}f=f.split("/"),f[f.length-1]=encodeURIComponent(f[f.length-1]),f=f.join("/"),m=m+"background: url("+f+") no-repeat center;background-size:cover;"}' style="'==m?m="":m+='"';var y="";"sidemenutabs"==window.Designer.getExtra("appType")&&(y=' ng-controller="'+this.get("idName")+'Ctrl"'),p=p+"<ion-content"+y+' padding="'+this.get("ionicpadding")+'"'+m+' class="side-menu-'+l+h+" "+this.get("class","")+'"',p+="></ion-content></ion-side-menu></ion-side-menus>";var w=e.element(p);return""!=this.get("backgroundColor","")&&n.addCSS("background-color",this.get("backgroundColor")),n.stylize(w[0]),w[0]}var b=e.element('<ion-view title="'+this.get("title","Page")+'"'+r+"></ion-view>");b[0].setAttribute("id",i);var C="<ion-content padding=\"'"+this.get("ionicpadding")+"'\"";if(""!=this.get("backgroundImg","")){var f=this.get("backgroundImg");if(window.multiFlag){var v=f.split("/");v=encodeURIComponent(v[v.length-1]),v=a.DomHelper.addDownloadForExport("img",this.get("backgroundImg"),v).name,f="img/"+v}f=f.split("/"),f[f.length-1]=encodeURIComponent(f[f.length-1]),f=f.join("/"),C=C+' style="background: url('+f+') no-repeat center;background-size:cover;"'}""!=this.get("backgroundColor","")&&n.addCSS("background-color",this.get("backgroundColor")),C+="></ion-content>";var S=e.element(C);this.get("scroll",!0)===!1&&S.attr("scroll","false");var g=this.get("hasHeader",!1),D=this.get("hasFooter",!1);g&&!o&&S.addClass("has-header"),D&&S.addClass("has-footer"),this.get("hasContent",!0)&&b.append(S);var x=this.get("class","").split(" ");for(var $ in x)n.addClass(x[$]);return n.stylize(b[0]),b[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=e.get("hideHeader",!1),o="";i||(o="<ion-header><ion-toolbar><ion-title>"+e.get("title","")+"</ion-title></ion-toolbar></ion-header>");var r='<ion-menu [content]="mainContent">'+o+"<ion-content></ion-content></ion-menu>",l=window.LightDom.element(r);if(""!=e.get("backgroundImg","")){var s=e.get("backgroundImg");if(window.multiFlag){var d=s.split("/");d=encodeURIComponent(d[d.length-1]),d=a.DomHelper.addDownloadForExport("img",e.get("backgroundImg"),d).name,s="assets/img/"+d}s=s.split("/"),s[s.length-1]=encodeURIComponent(s[s.length-1]),s=s.join("/"),l[0].children[i?0:1].setStyleVal({background:"url("+s+") no-repeat center","background-size":"cover"})}return""!=e.get("backgroundColor","")&&t.addCSS("background-color",e.get("backgroundColor")),e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),l[0].children[i?0:1].setAttribute("id",n),t.stylize(l[0].children[i?0:1]),l},getDomNodeForInsertingChildren:function(e,t){return 0==t.get("hideHeader",!1)?e[0].children[1]:e[0].children[0]}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("slide2",{type:"content",name:"Slide",weight:0,list:!1,properties:{title:{title:"Title",category:"Slide",type:"string",value:"Slide",help:"A way to identify your Slide, has no effect on code output.",weight:0},editingslide:{title:"Edit Slide",help:"You can only edit one Slide at a time, click on a slide here or in the Pages tree to switch.",type:"editing-slide",category:"Slide"},move:{title:"Move Slide",category:"Slide",type:"move",left:function(e){0!=e.getIndex()&&e.moveTo(e.getParent(),e.getIndex()-1)},right:function(e){e.moveTo(e.getParent(),e.getIndex()+1)}},backgroundColor:{title:"Color",type:"color-picker",value:"",category:"Background",weight:2},backgroundImg:{type:"urlupload",value:"",placeholder:"Image URL",uploadText:"Upload Image...",weight:3,category:"Background",autoheight:!0,fullwidth:!0},addpadding:{title:"Padding",type:"boolean",value:!1,category:"Style",weight:9},verticalalign:{title:"Vertically Align Content",type:"boolean",value:!1,category:"Style",weight:9.1},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},convertToHTML:{title:"",type:"converthtml",value:"",weight:50},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0}},obj:{isContainer:!0,disableDragging:!0,canRedrawSingle:!1,onRemove:function(){},getRenderTarget:function(e){return e&&e.children&&e.children.length>0&&"display:table;width:100%;height:100%;"==angular.element(e.children[0]).attr("style")?e.children[0].children[0].children[0]:e[0]},getRenderedTarget:function(){return 1==this.get("verticalalign",!1)?this.$rendered.children[0].children[0].children[0]:this.$rendered},getRenderedChildren:function(){return 1==this.get("verticalalign",!1)?this.$rendered.children[0].children[0].children[0].children:this.$rendered.children},onSelect:function(e){e.getParent().get("selectedSlide")!=this.getId()&&(e.getParent().set("selectedSlide",this.getId()),window.Designer.$rootScope.$emit("document.propertyChanged","selectedSlide",e.getParent()))},dom:function(e,t,n){if(window.compiling||this.getParent().get("selectedSlide")==this.getId()||""==this.getParent().get("selectedSlide")&&0==this.getIndex()){if(1==this.get("verticalalign",!1))var i=e.element('<ion-slide-page><div style="display:table;width:100%;height:100%;"><div style="display:table-row;"><div style="display:table-cell;vertical-align:middle;"></div></div></div></ion-slide-page>');else var i=e.element("<ion-slide-page></ion-slide-page>");var o=a.DomHelper.Styler(this),r=o.getID();if(i[0].setAttribute("id",r),""!=this.get("backgroundImg","")){var l=this.get("backgroundImg","");if(window.multiFlag&&-1==l.indexOf("{{")&&-1==l.indexOf("}}")){var s=l.split("/");s=s[s.length-1],s=a.DomHelper.addDownloadForExport("img",l,s).name,l="img/"+s}o.addCSS("background",'url("'+l+'") no-repeat center'),o.addCSS("background-size","cover")}""!=this.get("backgroundColor","")&&o.addCSS("background-color",this.get("backgroundColor"));var d=this.get("class","").split(" ");this.get("addpadding",!1)&&d.push("padding");for(var c in d)o.addClass(d[c]);return i[0]=a.DomHelper.angularDirectives(i[0],this.get("directives",[])),o.stylize(i[0]),i[0]}return e.element('<div style="display:none;"></div>')[0]}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("slider",{type:"content",name:"Slider",weight:0,feature:"!ionic2",iconUrl:"/img/component-slider.png",properties:{title:{type:"text",list:!1,value:"Slider"},selectedSlide:{type:"text",list:!1,value:""},previousScroll:{type:"text",list:!1,value:""},loop:{category:"Slider",title:"Loop",help:"Allow people to move from the last slide to the first slide.",type:"boolean",value:!0,weight:3},editingslide:{title:"Edit Slide",help:"You can only edit one Slide at a time, click on a slide here or in the Pages tree to switch.",type:"editing-slide",category:"Slider",weight:1},addSlide:{title:"Add New Slide",type:"button","class":"btn-success",exec:function(e){var t=e.create("slide2");e.appendChild(t,!1),t.set("title","Slide "+e.getChildren().length);var n=t.create("heading");n.set("text",t.get("title")),t.appendChild(n,!0),e.set("selectedSlide",t.getId()),window.Designer.selectById(t.getId()),e.$rootScope.$emit("document.modified")},category:"Slider",weight:2},sliderSize:{category:"Style",title:"Size",type:"size",value:void 0,weight:2,defaultWidth:"100%",defaultHeight:"200px"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},convertToHTML:{title:"",type:"converthtml",value:"",weight:50},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0}},obj:{isContainer:!0,canDuplicate:!1,disableDragging:!0,postCompile:!0,canRedrawSingle:!1,validChildren:["slide"],replaceRendered:function(e,t){},onRender:function(e,t,n){},addDefaultChildren:function(){var e=this.create("slide2");e.set("title","Slide 1"),e.set("backgroundImg","https://s3.amazonaws.com/ionic-io-static/avfsZwJT9WGsBj982ul1_kitten1.jpg"),this.appendChild(e,!0);var t=this.create("slide2");t.set("title","Slide 2"),t.set("backgroundImg","https://s3.amazonaws.com/ionic-io-static/gHd5vedGQJu4s4qsPQvr_kitten2.jpg"),this.appendChild(t,!0);var n=this.create("slide2");n.set("title","Slide 3"),n.set("backgroundImg","https://s3.amazonaws.com/ionic-io-static/WE6rB9dZRTiIWQlP5qsA_kitten3.jpg"),this.appendChild(n,!0)},dom:function(e,t,n){var i=this.get("loop",!0);window.compiling||(i=!1);var o=e.element("<ion-slides disable-side-menu-drag options=\"{'loop': "+i+'}" slider="'+this.getId()+'" delegate-handle="'+this.getId()+'"></ion-slides>'),r=a.DomHelper.Styler(this),l=r.getID();o[0].setAttribute("id",l);var s=this.get("class","").split(" ");for(var d in s)r.addClass(s[d]);"undefined"==typeof this.get("sliderSize")&&this.set("sliderSize",{width:"100%",height:"200px",fullWidth:!1});var c=this.get("sliderSize",{width:"100%",height:"200px",fullWidth:!1});return"100%"==c.height&&this.getParentPage()&&this.getParentPage().get("scroll",!0)?(this.set("previousScroll",this.getParentPage().get("scroll",!0)),this.getParentPage().set("scroll",!1)):"100%"!=c.height&&""!==this.get("previousScroll","")&&this.getParentPage()&&(this.set("previousScroll",""),this.getParentPage().set("scroll",!0)),r.addCSS("width",c.width),r.addCSS("height",c.height),c.fullWidth&&this.getParentPage().get("ionicpadding",!0)&&(r.addCSS("margin-left","-10px"),r.addCSS("width","calc(100% + 20px)")),o[0]=a.DomHelper.angularDirectives(o[0],this.get("directives",[])),r.stylize(o[0]),o[0]}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("spacer",{type:"content",name:"Spacer",iconUrl:"/img/component-spacer.png",weight:0,properties:{width:{title:"Width",type:"dimension",value:""},height:{title:"Height",type:"dimension",category:"Size",value:"100px",list:!0},newProps:{list:!1,type:"boolean",value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{validChildren:[],needsCompile:!0,canResizeY:!0,dom:function(e,t){var n=e.element('<div class="spacer"></div>');return"block"!==this.get("display")&&n.css("display",this.get("display")),this.get("width")&&n.css({width:this.get("width")}),this.get("height")&&n.css({height:this.get("height")}),n[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=e.get("display"),o=e.get("width"),r=e.get("height"),l=window.LightDom.element('<div class="spacer"></div>');return"block"!==i&&l[0].setStyleVal("display",i),o&&l[0].setStyleVal("width",o),r&&l[0].setStyleVal("height",r),e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),l[0].setAttribute("id",n),l[0]=a.DomHelper.angularDirectives(l[0],e.get("directives",[])),t.stylize(l[0]),l},getDomNodeForInsertingChildren:function(e){return null}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("tab",{type:"tabs",name:"Tab",weight:0,list:!1,requiresParent:["tabs"],properties:{title:{title:"Title",type:"string",value:"Tab",scopeField:"title",category:"Tab Settings"},icon:{title:"Icon",type:"icon",value:"ion-ios-camera",category:"Tab Settings"},defaultPage:{title:"Default Page",type:"defaultpage",value:"",feature:"automagic-navigation",category:"Tab Settings"},pages:{title:"Pages",type:"pages",value:"",feature:"!automagic-navigation",category:"Tab Settings"},move:{title:"Move Tab",type:"move",left:function(e){0!=e.getIndex()&&e.moveTo(e.getParent(),e.getIndex()-1)},right:function(e){e.moveTo(e.getParent(),e.getIndex()+1)},category:"Tab Settings"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20}},obj:{onRemove:function(){window.Designer.AppGraph._save()},onInsert:function(){window.Designer.AppGraph._save()},hasCustomRenderInsert:!0,canRedrawSingle:!1,disableDragging:!0,validChildren:[""],addDefaultChildren:function(e){if(window.Designer.featureCheck("!automagic-navigation")){var t=window.Designer.addPage();t.set("url","/"+t.getId()),t.set("parentState",this.getParentPage().id),t.set("parentView",this.getId()),t.set("title",this.get("title")+" Default Page"),this.set("pages",{pages:[{id:t.getId()}]})}else{var t=window.Designer.addPage();t.set("url","/"+t.getId()),t.set("title",this.get("title")+" Default Page"),this.set("defaultPage",t.getId()),window.Designer.$rootScope.$emit("addpage",{id:t.getId(),title:t.get("title"),htmlBased:t.get("htmlBased")}),"Camera Tab"==this.get("title")&&window.Designer.setExtra("startingPage",t.getId()),window.Designer.featureCheck("ionic2")&&this.set("icon",this.get("icon").replace("ion-ios-",""))}return t},replaceRendered:function(e,t){var n=this.$rendered.parentNode;if(n)for(var i=n.querySelectorAll("a"),o=n.querySelectorAll("ion-tab"),a=0;a<o.length;a++)if(o[a].getAttribute("data-componentid")==this.getId())return i[a].setAttribute("data-componentid",this.getId()),void o[a].setAttribute("data-componentid",null)},dom:function(e,t){var n="";if(window.Designer.featureCheck("!automagic-navigation")){if(this.get("pages").pages&&this.get("pages").pages.length>0)try{n='href="#'+window.Designer.getById(this.get("pages").pages[0].id).getFullPageUrl()+'"'}catch(i){}}else if(window.compiling&&window.page_views){var o=this.get("defaultPage",""),r=window.Designer.getById(o);"undefined"!=typeof r&&0==r.get("disableParenting",!1)&&(n='href="#'+this.getParentPage().get("url"),window.page_views[o].length>1&&(n=n+"/"+this.id),n=n+r.get("url")+'"')}var l=e.element('<ion-tab title="'+(this.get("title")||"")+'" icon="'+this.get("icon")+'" '+n+'><ion-nav-view name="'+this.getId()+'"></ion-nav-view></ion-tab>'),s=a.DomHelper.Styler(this),d=s.getID();l[0].setAttribute("id",d),""!==this.getParent().get("fontcolor")&&l[0].setAttribute("style","color:"+this.getParent().get("fontcolor")+" !important;");var c=this.get("class","").split(" ");for(var u in c)s.addClass(c[u]);return s.stylize(l[0]),l[0]=a.DomHelper.angularDirectives(l[0],this.get("directives",[])),l[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i='<ion-tab [root]="tab'+(e.getIndex()+1)+'Root" tabTitle="'+e.get("title","")+'" tabIcon="'+e.get("icon")+'"></ion-tab>';e.get("class","").split(" ").forEach(function(e){t.addClass(e)});var o=window.LightDom.element(i);return o[0].setAttribute("id",n),t.stylize(o[0]),o},getDomNodeForInsertingChildren:function(e){return null}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("tabs",{type:"tabs",name:"Tabs",weight:0,list:!1,properties:{hasContent:{type:"boolean",title:"Has Content",value:!1,placeholder:"Page title",weight:1,category:"Style",list:!1},style:{title:"Theme",type:"theme-color",help:"To customize these colors, open theming options by clicking on the paintbrush in the top right of your screen.",value:"stable",category:"Style"},fontcolor:{title:"Color",type:"color-picker",value:"",category:"Style",list:!1},type:{title:"Type",type:"list2",value:"tabs-icon-top",options:[{id:"tabs-icon-top",text:"Icon Top"},{id:"tabs-icon-only",text:"Icon Only"},{id:"tabs-icon-left",text:"Icon Left (with text)"}],category:"Style"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},addTab:{title:"Add New Tab",type:"button","class":"btn-success",exec:function(e){var t=e.create("tab");e.appendChild(t,!1),t.set("title","Tab "+e.getChildren().length);var n=t.addDefaultChildren(e.$rootScope);e.setCurrentTab(t),window.Designer.AppGraph._save(),e.$rootScope.$emit("document.modified"),window.Designer.select(n)},category:"Controls"},newProps:{list:!1,type:"boolean",value:!0}},obj:{isContainer:!0,canDuplicate:!1,disableDragging:!0,postCompile:!0,canRedrawSingle:!1,validChildren:["tab"],canDelete:!1,info:"Only one tabs strip per app is allowed, you cannot delete or duplicate the tabs strip.",setCurrentTab:function(e){},replaceRendered:function(e,t){this.$rendered.setAttribute("data-componentid",null),this.$rendered.querySelectorAll(".tabs")[0].setAttribute("data-componentid",this.getId())},onRender:function(e,t,n){},dom:function(e,t,n){-1!==this.get("style").indexOf("tabs-")&&this.set("style",this.get("style").replace("tabs-",""));var i=["tabs-"+this.get("style"),this.get("type")].join(" "),o=e.element('<ion-tabs class="'+i+'"></ion-tabs>'),r=a.DomHelper.Styler(this),l=r.getID();o[0].setAttribute("id",l);var s=this.get("class","").split(" ");for(var d in s)r.addClass(s[d]);return r.stylize(o[0]),o[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID(),i=window.LightDom.element("<ion-tabs></ion-tabs>");return e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),i[0].setAttribute("id",n),t.stylize(i[0]),i},getDomNodeForInsertingChildren:function(e){return e[0]}}}})}]),a.config(["ComponentTypesProvider",function(e){e.addType("textarea","TextareaComponent",{type:"forms",name:"Textarea",iconUrl:"/img/component-text-area.png",weight:2})}]).factory("TextareaComponent",["Component",function(t){return function(){var n=Object.create(new t("textarea",{title:{title:"Title",type:"string",value:"Text",category:"Text"},name:{title:"Name",type:"string",value:"",category:"Text"},placeholder:{title:"Placeholder",type:"string",value:"",category:"Text"},value:{title:"Value",type:"string",value:"",category:"Text"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},{validChildren:[],forceOneParent:["list","form"],recommendedParent:"form",dom:function(t,n){var i=t.element('<label class="item item-input"><span class="input-label">'+this.get("title")+'</span><textarea placeholder="'+e(this.get("placeholder"))+'">'+this.get("value","")+"</textarea></label>"),o=a.DomHelper.Styler(this),r=o.getID();i[0].setAttribute("id",r),this.get("name")&&i.attr("name",this.get("name"));var l=this.get("class","").split(" ");for(var s in l)o.addClass(l[s]);return i[0]=a.DomHelper.angularDirectives(i[0],this.get("directives",[]),"textarea"),o.stylize(i[0]),i[0]},ionic2:{generateDomNode:function(t){var n=a.DomHelper.Styler(t),i=n.getID(),o=t.get("title",""),r=e(t.get("placeholder","")),l=t.get("value",""),s=(t.get("name",""),window.LightDom.element("<ion-item><ion-label>"+o+'</ion-label><ion-textarea placeholder="'+r+'">'+l+"</ion-textarea></ion-item>"));return t.get("class","").split(" ").forEach(function(e){n.addClass(e)}),s[0].setAttribute("id",i),s[0]=a.DomHelper.angularDirectives(s[0],t.get("directives",[])),n.stylize(s[0]),s},getDomNodeForInsertingChildren:function(e){return null}}}));return n}}]),a.config(["ComponentTypesProvider",function(e){e.addType("toggle","ToggleInputComponent",{type:"forms",name:"Toggle",iconUrl:"/img/component-toggle.png",weight:2})}]).factory("ToggleInputComponent",["Component",function(e){return function(){var t=Object.create(new e("toggle",{title:{title:"Title",type:"string",value:"Toggle",category:"Text"},name:{title:"Name",type:"string",value:"",category:"Text"},style:{title:"Style",type:"theme-color",help:"To customize these colors, open theming options by clicking on the paintbrush in the top right of your screen.",value:"positive",category:"Style"},on:{title:"Checked",type:"boolean",value:"false",category:"Style"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},{validChildren:[],needsCompile:!0,canRedrawSingle:!1,forceOneParent:["list","form"],recommendedParent:"form",dom:function(e,t){if(this.get("style").indexOf("toggle-")>-1&&this.set("style",this.get("style").replace("toggle-","")),1==this.get("on"))var n='ng-checked="true"';else var n="";var i=e.element('<ion-toggle toggle-class="toggle-'+this.get("style")+'" '+n+">"+this.get("title")+"</ion-toggle>"),o=a.DomHelper.Styler(this),r=o.getID();i[0].setAttribute("id",r),this.get("name")&&i.attr("name",this.get("name"));var l=this.get("class","").split(" ");for(var s in l)o.addClass(l[s]);return i[0]=a.DomHelper.angularDirectives(i[0],this.get("directives",[])),o.stylize(i[0]),i[0]},ionic2:{generateDomNode:function(e){var t=a.DomHelper.Styler(e),n=t.getID();e.set("style",e.get("style").replace("toggle-",""));var i='checked="'+(1==e.get("on"))+'"',o=window.LightDom.element("<ion-item><ion-label>"+e.get("title")+'</ion-label><ion-toggle color="'+e.get("style")+'" '+i+"></ion-toggle></ion-item>");return e.get("class","").split(" ").forEach(function(e){t.addClass(e)}),o[0].setAttribute("id",n),o[0]=a.DomHelper.angularDirectives(o[0],e.get("directives",[])),t.stylize(o[0]),o},getDomNodeForInsertingChildren:function(e){return null}}}));return t}}]),a.config(["ComponentTypesProvider",function(e){e.add("video",{type:"content",name:"Video",iconUrl:"/img/component-video.png",weight:0,properties:{service:{title:"Service",type:"list",value:"",options:[{value:"",text:"Choose a Service"},{value:"youtube",text:"YouTube"},{value:"vimeo",text:"Vimeo"}],emptyText:"Choose a Service",category:"Video"},videoid:{title:"Video ID",type:"string",value:"lTLTs2ZA2JQ",category:"Video"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},directives:{title:"Directives",type:"angular-directive",category:"Angular Directives",value:[],weight:20},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0},convertToHTML:{title:"",type:"converthtml",value:"",weight:50,feature:"!ionic2"}},obj:{validChildren:[],dom:function(e,t){var n=!1,i=this.get("service",""),o=this.get("videoid",""),r=this;""==i?n=!0:""==o&&(n=!0);var l=function(t){"undefined"==typeof t&&(t="lTLTs2ZA2JQ"),t=t.replace(/\{\{/g,'"+').replace(/\}\}/g,'+"').replace(/^\s*\"\s*\"\+/,"").replace(/\+\"\s*\"\s*$/,"");var n="<div ng-init='videourl_"+r.getId()+'="https://www.youtube.com/embed/'+t+'?rel=0&amp;showinfo=0"\' style="position:relative;overflow:hidden;padding-bottom:56.25%;height:0;"><iframe src="{{videourl_'+r.getId()+'}}" frameborder="0" allowfullscreen width="560" height="315" style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe>';return window.compiling||(n+='<div style="position:absolute;top:0;left:0;width:100%;height:100%;"></div>'),n+="</div>",e.element(n)[0]},s=function(t){t=t.replace(/\{\{/g,'"+').replace(/\}\}/g,'+"').replace(/^\s*\"\s*\"\+/,"").replace(/\+\"\s*\"\s*$/,"");var n="<div ng-init='videourl_"+r.getId()+'="https://player.vimeo.com/video/'+t+'?rel=0&amp;showinfo=0?color=ffffff&title=0&byline=0&portrait=0&badge=0"\' style="position:relative;overflow:hidden;padding-bottom:56.25%;height:0;"><iframe src="{{videourl_'+r.getId()+'}}" frameborder="0" allowfullscreen width="500" height="281" style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe>';return window.compiling||(n+='<div style="position:absolute;top:0;left:0;width:100%;height:100%;"></div>'),n+="</div>",e.element(n)[0]};if(!window.compiling){var d=t.createElement("div"),c=t.createElement("i");c.classList.add("icon"),c.classList.add("ion-ios-videocam"),$(c).css({fontSize:"64px",color:"#888",verticalAlign:"middle"}),d.appendChild(c);var u="100%",p="170px";return $(d).css({width:u,height:p,margin:"0px 0px",lineHeight:"170px",backgroundColor:"#e8ebef",textAlign:"center"}),d=a.DomHelper.angularDirectives(d,this.get("directives",[]),"img");
}if(n)var g=l();else switch(i){case"youtube":var g=l(o);break;case"vimeo":var g=s(o)}var h=a.DomHelper.Styler(this),m=h.getID();g.setAttribute("id",m);var f=this.get("class","").split(" ");for(var v in f)h.addClass(f[v]);return g=a.DomHelper.angularDirectives(g,this.get("directives",[]),"iframe"),h.stylize(g),g},ionic2:{generateDomNode:function(e){var t=!1,n=e.get("service",""),i=e.get("videoid","");""==n?t=!0:""==i&&(t=!0);var o=function(e){"undefined"==typeof e&&(e="lTLTs2ZA2JQ"),e=e.replace(/\{\{/g,'"+').replace(/\}\}/g,'+"').replace(/^\s*\"\s*\"\+/,"").replace(/\+\"\s*\"\s*$/,"");var t='<div style="position:relative;overflow:hidden;padding-bottom:56.25%;height:0;"><iframe src="https://www.youtube.com/embed/'+e+'?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen width="560" height="315" style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe>';return window.compiling||(t+='<div style="position:absolute;top:0;left:0;width:100%;height:100%;"></div>'),t+="</div>",window.LightDom.element(t)[0]},r=function(e){e=e.replace(/\{\{/g,'"+').replace(/\}\}/g,'+"').replace(/^\s*\"\s*\"\+/,"").replace(/\+\"\s*\"\s*$/,"");var t='<div style="position:relative;overflow:hidden;padding-bottom:56.25%;height:0;"><iframe src="https://player.vimeo.com/video/'+e+'?rel=0&amp;showinfo=0?color=ffffff&title=0&byline=0&portrait=0&badge=0" frameborder="0" allowfullscreen width="500" height="281" style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe>';return window.compiling||(t+='<div style="position:absolute;top:0;left:0;width:100%;height:100%;"></div>'),t+="</div>",window.LightDom.element(t)[0]};if(!window.compiling){var l=window.LightDom.element("<div></div>")[0],s=window.LightDom.element("<i></i>")[0];s.classList.add("icon"),s.classList.add("ion-ios-videocam"),s.setStyleVal({"font-size":"64px",color:"#888","vertical-align":"middle"}),l.appendChild(s);var d="100%",c="170px";return l.setStyleVal({width:d,height:c,margin:"0px 0px","line-height":"170px","background-color":"#e8ebef","text-align":"center"}),[l]}if(t)var u=o();else switch(n){case"youtube":var u=o(i);break;case"vimeo":var u=r(i)}var p=a.DomHelper.Styler(e),g=p.getID();return u.setAttribute("id",g),e.get("class","").split(" ").forEach(function(e){p.addClass(e)}),p.stylize(u),[u]},getDomNodeForInsertingChildren:function(e){return null}}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("card",{type:"content",name:"Card",iconUrl:"/img/component-card.png",weight:0,list:!1,properties:{title:{title:"Title",type:"string",value:"Card",category:"Text"},footer:{title:"Footer",type:"string",value:"",category:"Text"},"class":{title:"Classes",type:"class",value:"",category:"Style",fullwidth:!0,help:'White space delimited classes to be added to this component. (ex. "myclass1 myclass2")',weight:10},newProps:{list:!1,type:"boolean",value:!0},skipcss:{type:"boolean",list:!1,value:!0}},obj:{name:"Card",getRenderedChildren:function(){if(!this.$rendered)return[];var e=this.$rendered.querySelector(".item-body");return e&&e.children||[]},getRenderTarget:function(e){return e.querySelector(".item-body")},getRenderedTarget:function(){return this.$rendered.querySelector(".item-body")},dom:function(e,t){var n=a.DomHelper.Styler(this),i=n.getID(),o=e.element('<div class="list card"><div class="item item-body"></div></div>');o[0].setAttribute("id",i);var r=this.get("title"),l=this.get("footer");r&&o.prepend('<div class="item item-divider"> '+r+"</div>"),l&&o.append('<div class="item item-divider"> '+l+"</div>");var s=this.get("class","").split(" ");for(var d in s)n.addClass(s[d]);return n.stylize(o[0]),o[0]}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("content",{type:"content",name:"Content",weight:0,list:!1,properties:{ionicpadding:{title:"Padding",type:"boolean",value:!0,weight:1},scroll:{title:"Scrolling",type:"boolean",value:!0,weight:1},hasHeader:{title:"Header Margin",type:"boolean",value:!0,weight:2},hasFooter:{title:"Footer Margin",type:"boolean",value:!1,weight:3}},obj:{canDuplicate:!1,canDelete:!1,disableDragging:!0,redrawForChildren:!0,getRenderedChildren:function(){return this.$rendered?this.get("scroll")===!0?this.$rendered.children[0].children:this.$rendered.children:[]},dom:function(e,t){var n=e.element('<ion-content padding="'+this.get("ionicpadding")+'"></ion-content>');this.get("scroll",!0)===!1&&n.attr("scroll","false");var i=this.get("hasHeader",!1),o=this.get("hasFooter",!1);return i&&n.addClass("has-header"),o&&n.addClass("has-footer"),n[0]}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("header-bar",{type:"header-bar",name:"Header Bar",iconUrl:"/img/component-header.png",weight:0,list:!1,properties:{barStyle:{title:"Bar Style",type:"button-styles",value:"bar-stable",options:[{value:"",text:"Default",color:"#fff"},{value:"bar-light",text:"Light",color:"#fff"},{value:"bar-stable",text:"Stable",color:"#f8f8f8"},{value:"bar-dark",text:"Dark",color:"#444"},{value:"bar-positive",text:"Positive",color:"#4a87ee"},{value:"bar-balanced",text:"Balanced",color:"#66cc33"},{value:"bar-assertive",text:"Assertive",color:"#ef4e3a"},{value:"bar-calm",text:"Calm",color:"#43cee6"},{value:"bar-energized",text:"Energized",color:"#f0b840"},{value:"bar-royal",text:"Royal",color:"#8a6de9"}]}},obj:{canDelete:!1,addDefaultChildren:function(){var e=ComponentFactory.create("heading");e.set("size",{value:"1"}),e.set("extraClasses",{value:"title"}),this.appendChild(e)},dom:function(e,t){var n=this.get("barStyle")||"bar-stable",i=e.element('<ion-header-bar class="'+n+'"></ion-header-bar>');return i[0]}}})}]),a.config(["ComponentTypesProvider",function(e){e.addType("header-buttons","HeaderButtonsComponent",{type:"header",name:"Header Buttons",list:!1,weight:0})}]).factory("HeaderButtonsComponent",["Component","ComponentFactory",function(e,t){return function(){var n=Object.create(new e("header-buttons",{},{addDefaultChildren:function(){var e=t.create("button");e.setFromMap({text:"Button",type:"button-clear"}),this.appendChild(e)},dom:function(e,t){var n=e.element('<div class="buttons"></div>');return n[0]}}));return n}}]),a.config(["ComponentTypesProvider",function(e){e.addType("modal","ModalComponent",{type:"modal",name:"Modal",weight:0,list:!1})}]).factory("ModalComponent",["Component",function(e){return function(){var t=Object.create(new e("modal",{},{isContainer:!0,canDuplicate:!1,isPage:!0,dom:function(e,t){var n=e.element('<div class="modal"></div>');return n[0]}}));return t}}]),a.config(["ComponentTypesProvider",function(e){e.add("side-menu-content",{type:"side-menu-content",name:"Side Menu Content",weight:0,list:!1,properties:{},obj:{isContainer:!0,canDuplicate:!1,canDelete:!1,disableDragging:!0,getRenderTarget:function(e){return e.querySelector("ion-nav-view")},addDefaultChildren:function(){},dom:function(e,t){var n=e.element('<ion-side-menu-content><ion-nav-bar class="bar-stable"><ion-nav-back-button></ion-nav-back-button><ion-nav-buttons side="left"><button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button></ion-nav-buttons></ion-nav-bar><ion-nav-view name="menuContent"></ion-nav-view></ion-side-menu-content>')[0];return n}}}),e.add("side-menu-menu",{type:"side-menu-menu",name:"Side Menu Menu",weight:0,list:!1,properties:{},obj:{isContainer:!0,canDuplicate:!1,canDelete:!1,disableDragging:!0,addDefaultChildren:function(){var e=ComponentFactory.create("list"),t=this.create("list-item");t.set("content",{value:"Item 1"}),e.appendChild(t,!0),t=this.create("list-item"),t.set("content",{value:"Item 2"}),e.appendChild(t,!0),t=this.create("list-item"),t.set("content",{value:"Item 3"}),e.appendChild(t,!0),this.appendChild(e,!0)},dom:function(e,t){var n=e.element('<ion-side-menu side="left">\n</ion-side-menu>');return n[0]}}}),e.add("side-menu",{type:"page",name:"Side Menu",weight:0,list:!1,obj:{isContainer:!0,isPage:!0,canDuplicate:!1,disableDragging:!0,validChildren:[],addDefaultChildren:function(){ComponentFactory.create("side-menu-content");this.appendChild(b)},dom:function(e,t){var n=e.element('<ion-side-menus enable-menu-with-back-views="false">\n</ion-side-menus>');return n[0]}}})}]),a.config(["ComponentTypesProvider",function(e){e.add("slide-box",{type:"forms",name:"Slide Box",iconUrl:"/img/component-slide-box.png",weight:0,list:!1,properties:{},obj:{validChildren:[],needsCompile:!0,validChildren:["slide"],disableDragging:!0,addDefaultChildren:function(){var e=this.create("slide");this.appendChild(e,!0);var e=this.create("slide");this.appendChild(e,!0);var e=this.create("slide");this.appendChild(e,!0)},dom:function(e,t){var n=e.element('<ion-slide-box style="height: 100%"></ion-slide-box>');return n[0]}}}),e.add("slide",{type:"forms",name:"Slide",iconUrl:"/img/component-slide.png",weight:0,list:!1,properties:{},obj:{validChildren:[],needsCompile:!0,disableDragging:!0,addDefaultChildren:function(){var e=this.create("image");e.set("src","http://placekitten.com/320/568"),this.appendChild(e,!0)},dom:function(e,t){var n=e.element("<ion-slide></ion-slide>");return n[0]}}})}]),a.config(["ComponentTypesProvider",function(e){e.addType("list-item-thumbnail","ListItemThumbnailComponent",{type:"list-item",name:"Thumbnail List Item",weight:1,iconUrl:"/img/component-list-thumbnail.png",list:!1})}]).factory("ListItemThumbnailComponent",["Component",function(e){return function(){var t=Object.create(new e("list-item-thumbnail",{image:{title:"",type:"urlupload",value:"",placeholder:"Image URL",uploadText:"Choose Image...",fullwidth:!0,category:"Image",autoheight:!0},style:{title:"Style",type:"string",value:"",list:!1},title:{title:"Title",type:"string",value:"Title",category:"Text"},content:{title:"Content",type:"string",value:"Item",category:"Text"},wordWrap:{title:"Word Wrap",type:"boolean",value:!1,category:"Text"},link:{title:"Type",type:"route",value:"",fullwidth:!0,category:"Link"},linkView:{type:"string",value:"",list:!1},newProps:{list:!1,type:"boolean",value:!0}},{toString:function(){return"ListItemComponent"},needsCompile:!0,forceOneParent:["list","form"],recommendedParent:"list",validChildren:[],onRemove:function(){window.Designer.AppGraph.removeLink(this)},onInsert:function(){window.Designer.AppGraph.addLink(this)},dom:function(e,t){var n=t.createElement("img"),i=e.element('<ion-item class="item-thumbnail-left"></ion-item>');this.get("link","")&&(link=this.get("link"),a.DomHelper.href(i[0],link,this));var o=this.get("image");if(window.multiFlag){if(o){var r=o.split("/");r=r[r.length-1],r=a.DomHelper.addDownloadForExport("img",o,r).name,n.src="img/"+r}}else o||(o="/img/thumbnail-img.png"),n.src=o;i.append(n);var l="";return this.get("wordWrap",!1)&&(l=' style="white-space:normal;"'),i.append("<h2>"+this.get("title")+"</h2>"),i.append("<p"+l+">"+this.get("content")+"</p>"),i[0]}}));return t}}]),a.provider("Action",[function(){var e={},t=[],n=[];return{$get:["$rootScope",function(i){return{register:function(t,n){n.action=t,e[t]=n},exec:function(e){this._push(e),this.script(e,!0)},pushAction:function(e){console.log("ACTION",e.action),this._push(e),this.script(e,!0)},script:function(t,n){var o=e[t.action];o?n?o.perform(t):o.revert(t):console.error("ACTION: No action for action",t.action),i.$emit("document.modified")},reset:function(){t=[],n=[]},undo:function(){var e=t.pop();e&&(this.script(e),n.push(e))},redo:function(){var e=n.pop();e&&(this.script(e,!0),t.push(e))},_push:function(e){n=[],t.push(e)},canUndo:function(){return t.length>0},canRedo:function(){return n.length>0},_print:function(){console.log("UNDO STACK");for(var e=0;e<t.length;e++)console.log(t[e].action)}}}]}}]),angular.module("ionic.creator.components",[]).provider("ComponentTypes",["$provide",function(e){var t={};return window.componentTypes=t,{addType:function(e,n,i){t[e]={className:n,type:e,data:i||{}}},add:function(n,i){t[n]={className:n+"Component",type:n,data:i||{}},e.factory(n+"Component",["Component",function(e){return function(){return Object.create(new e(n,i.properties,i.obj))}}])},$get:["$injector",function(e){return{get:function(e){return t[e]},getSortedInstances:function(){var e,n={};for(var i in t)if(t[i].data.list!==!1){n[t[i].data.type]||(n[t[i].data.type]=[]);var o=!0;t[i].data.feature&&(window.Designer.featureCheck(t[i].data.feature)||(o=!1)),o&&n[t[i].data.type].push(t[i])}for(var i in n)e=n[i],e.sort(function(e,t){return e.weight||(e.weight=0),t.weight||(t.weight=0),e.weight-t.weight});return n}}}]}}]).factory("ComponentTemplate",["$http","$q",function(e,t){return{getFromTemplate:function(e){return this.getFromTemplateUrl("/tmpl/page-templates/"+e+".json")},getFromTemplateUrl:function(n){var i=t.defer();return e.get(n,{params:{t:(new Date).getTime()}}).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise}}}]).factory("ComponentFactory",["ComponentTypes","ComponentTemplate","$rootScope","$injector","$q",function(e,t,n,i,o){var a={};return{create:function(t,o){var a=e.get(t),r=i.get(a.className),l=new r;if(l.componentType=t,l.$rootScope=n,a.data.overwriteValues)for(var s in a.data.overwriteValues){var d=a.data.overwriteValues[s];l.set(s,d)}return l},clearIdMap:function(){a={}},cleanUp:function(e){a[c.type]?a[c.type]--:a[c.type]=0},clone:function(e){if("page"==e.type){var t=e.getId(),i=window.Designer.Coding.settings.files.find(function(e){return e.id==t}),o=window.Designer.Coding.settings.files.find(function(e){return e.id==t+"-HTML"}),r=angular.copy(i),l="page"+(parseInt(a.page)+1);if(r.id=l,r.filename=null,window.Designer.Coding.settings.files.push(r),o){var s=angular.copy(o);s.id=l+"-HTML",s.filename=e.get("title"),window.Designer.Coding.settings.files.push(s)}n.$emit("addpage",{title:e.get("title"),id:l,type:"controller","abstract":!1,htmlBased:e.get("htmlBased",!1)})}var d=this.create(e.type),c=e.getProperties();for(var u in c)"url"==u?d.set(u,"RESETMEPLEASE"):"parentState"==u||"parentView"==u?d.set(u,""):d.set(u,angular.copy(c[u]));d.id=null;for(var p=0;p<e.children.length;p++)d.appendChild(this.clone(e.children[p]));return d},newId:function(e){function t(){a[e]++;var n=e+a[e];return"undefined"==typeof window.Designer.getById(n)?n:t()}return e in a?t():(a[e]=0,t())},markId:function(e){if(e){var t=e.match(/([^\d]+)/)[0],n=e.match(/(\d+)/)[0],i=a[t];i&&n>i?a[t]=n:i||(a[t]=n)}},_setProperties:function(e,t){if(t)for(var n in t)e.set(n,{value:t[n]})},buildFromTemplate:function(e,i){var o=this;t.getFromTemplate(i).then(function(t){var n=o.build(t,!0);o._setProperties(n,t.props),e.replaceWith(n)},function(e){console.error("Error building component from template",e),n.$emit("componentFactory.error",e)})},createFromTemplate:function(e,i){var a=o.defer(),r=this;return t.getFromTemplateUrl(e).then(function(e){var t=!1,n=!1;e.addDefault&&(t=!0),e.pageDefault&&(n=!0);var o=r.build(e,t,n,e.props,i);a.resolve(o)},function(e){console.error("Error building component from template",e),a.reject(e),n.$emit("componentFactory.error",e)}),a.promise},build:function(e,t,i,o,a){var r,l,s,d,c,u,p,g,h=[],g=this.create(e.type);for("app"===e.type?g.id="app1":(g.id=this.newId(e.type),g.afterId&&g.afterId(),"page"==e.type&&(1==o.htmlBased&&(a.Coding.initHTMLPage(null,g.id+"-HTML",o.title),a.Coding.settings.open!==!0&&(a.Coding.settings.currentlyEditing=g.id+"-HTML",a.Coding.toggle())),n.$emit("addpage",{id:g.id,title:o.title,htmlBased:o.htmlBased})),n.$emit("component.registerChild",g)),"undefined"!=typeof o&&this._setProperties(g,o),i&&g.addDefaultChildren(),h.push([e,g]);h.length;)if(r=h.shift(),l=r[0],s=r[1],l.children)for(u=0,p=l.children.length;p>u;u++){d=l.children[u];try{c=this.create(d.type)}catch(m){console.error("No such component of type",d.type),n.$emit("document.loadError",m);break}d.fromTemplate?this.buildFromTemplate(c,d.fromTemplate):(this._setProperties(c,d.props),d.id&&(c.id=d.id)),s.appendChild(c),t&&c.addDefaultChildren(),h.splice(0,0,[d,c])}return g}}}]),a.factory("Document",["ComponentFactory","$http","$injector","$rootScope","$q",function(e,t,n,i,o){return function(n){var n=n,a=e.create("app");a.id=e.newId(a.type);var r,l=a,s={};return{name:"Untitled project",getGenerated:function(){return r},getDocumentId:function(){return n},getRoot:function(){return a},getPageContainer:function(){return l},getProperty:function(e){return s[e]},createComponent:function(t,n,i,o){var a=e.create(t,i);return n&&(a.isPlaceholder=o,a.addDefaultChildren(i)),a},addPage:function(e){var t=this.createComponent("page");return e||(e="Page "+(l.getChildren().length+1)),t.set("title",{value:e}),t.set("url",{value:t.getId()}),l.appendChild(t),i.$emit("document.pageAdded",t),t},removePage:function(e){return l.removeChild(e)},getPages:function(){return l.getChildren()},getPage:function(e){return l.getChildren()[e]},getPageById:function(e){for(var t=l.getChildren(),n=0;n<t.length;n++)if(t[n].getId()==e)return t[n];return!1},getNumPages:function(){return l.getChildren().length},fromJson:function(e){try{var t=JSON.parse(e);this._buildFrom(t)}catch(n){i.$emit("document.parseError",n),console.error("Unable to load:",n)}},extraFromJson:function(e){var t=JSON.parse(e);return"undefined"==typeof t.extra?{}:t.extra},fromUrl:function(e){var n=this,a=o.defer();return t.get(e,{t:+new Date}).then(function(e){n._buildFrom(e.data),a.resolve(n)},function(e){i.$emit("document.loadError",e),a.reject(e)}),a.promise},_getPageContainer:function(){return l="nav"==a.getChild(0).type?a.getChild(0):a},_buildFrom:function(t){r=t.generated;var n;for(var i in t)"document"!==i&&(s[i]=t[i]);var n=e.build(t.document.root);a=n,this._getPageContainer()}}}}]),a.factory("DocumentIterator",function(){var e=function(t,n,i){var o,a;for(o=0,a=t.children.length;a>o;o++)child=t.children[o],i(child,t,n+1),e(child,n+1,i)};return{traverse:function(t,n){e(t,0,n)},each:function(e,t){var n,o=[],a=1,r=[];for(o.push(e.getRoot());o.length;)if(item=o.shift(),item.children){for(i=0,j=item.children.length;i<j;i++)n=item.children[i],r.push(t(n,item,a)),o.splice(0,0,n);a++}return r}}}),a.provider("IntegrationTypes",["$injector",function(e){var t={},n={add:function(e,n){n.className=e+"Integration",n.logo="/js/integrations/"+e.toLowerCase()+"/logo.png",t[e]=n},$get:[function(){var e={get:function(e){return t[e]},allSorted:function(){var e=t,n=Object.keys(t).sort(function(t,n){return e[t].order-e[n].order}).map(function(t){return e[t]});return n}};return e}]};return n}]).service("Integrations",["$rootScope","$injector","IntegrationTypes","$http","$compile","$document","Designer","Themes","$q","$timeout",function(e,t,n,i,o,a,r,l,s,d){var c,u="/tmpl/designer/integrations-modal.tmpl.html",p=e.$new();p.data={location:"list",current:"",backgroundcolor:"white"},p.openIntegrationSettings=function(e){p.data.current=n.get(e),p.data.location="integration",p.data.backgroundcolor=p.data.current.color;var t=e.toLowerCase(),i=$(c).find("#integration-settings")[0];$(i).empty(),$(i).append(o("<"+t+"-integration></"+t+"-integration>")(p))};var g=function(e){p.data.location="list";i.get(u).then(function(t){var n=o(t.data)(p);c=n,a[0].body.appendChild(n[0]),$(c).modal("show"),e&&p.openIntegrationSettings(e)},function(e){})},h={boot:function(e){var i=n.get(e),o=t.get(i.className);o.boot()},get:n.get,allSorted:n.allSorted,showModal:function(e){g(e)},hideModal:function(){c&&$(c).modal("hide")},helpers:{addExternalJS:function(e){r.Coding.addExternalJS(e)},addAngularModule:function(e){r.Coding.addExternalDependency(e)},addJSFile:function(t,n){var i=r.Coding.initGenericJS(t,n);e.$emit("coding.fileadded",i)},fileExists:function(e){return r.Coding.settings.appDependencies.indexOf("name")>-1?!0:!1},addPage:function(t,n){var i=s.defer(),o=e.$on("coding.initcontroller",function(e,t){r.Coding.updateContents(t,n,!1),r.Coding.saveFile(t),o()});return r.addNewTemplatedPage("ionic_blank").then(function(e){n&&(r.Coding.updateContents(e.id,n,!1),r.Coding.saveFile(e.id)),e.set("title",t),window.Designer.send("page.newTitle",{pageTitle:t,pageId:e.getId()}),window.Designer.AppGraph.updatePageRoutes(),i.resolve(e)}),i.promise},addSCSS:function(t){t="\n\n"+t,r.Themes.settings.custom_scss_text+=t,r.Themes._save(),l.updateCSS(r.getProject().app_id,r.Themes.settings.custom_scss_variables,r.Themes.settings.custom_scss_text,r.Themes.extraCSS()).then(function(t){r.Themes.updateSetting("validCompiledCSS",!0),e.$emit("newcss")},function(t){e.$emit("newcss")})}}};return p.integrations=h.allSorted(),p.installIntegration=function(e){h.boot(e)},h}]),a.factory("ABTesting",["Config","Stats","$http","$rootScope",function(e,t,n,i){var o=e.get("creator_api_url"),a=(e.get("api_url"),{get:function(e,a){var r=i.creatorUser;if("undefined"==typeof r.data.ab&&(r.data.ab={}),"undefined"!=typeof r.data.ab[e])return r.data.ab[e];var l=a[Math.floor(Math.random()*a.length)];return r.data.ab[e]=l,n.post(o+"/user/data",{data:r.data}).then(function(e){},function(e){}),t.t("AB Testing",{key:e,value:l}),l}});return a}]),a.directive("autofocus",["$timeout",function(e){return{restrict:"A",link:function(t,n){e(function(){n[0].focus()})}}}]),a.constant("NodeType",{ELEMENT:1,TEXT:3,COMMENT:8}).factory("DOM",["NodeType",function(e){return{getBounds:function(t){if(t.nodeType!==e.ELEMENT)return[[],[],[],[]];var n=t.offsetLeft,i=t.offsetTop,o=t.offsetWidth,a=t.offsetHeight;return[[n,i],[n+o,i],[n+o,i+a],[n,i+a]]},isBefore:function(e,t,n){var i=e.getBoundingClientRect(),o=i.top+i.height/2;return n<i.bottom?o>n:void 0},getIndexAtPoint:function(e,t,n){var i,o,a;for(i=0,o=e.length;o>i;i++)if(a=e[i],this.isBefore(a,t,n))return i;return-1},getNodeAtPoint:function(e,t,n){var i=e.elementFromPoint(t,n);return i}}}]),a.directive("toggle",[function(){return{restrict:"A",link:function(e,t,n){t.tooltip()}}}]),a.directive("contenteditable",function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){function o(){var e=t.html();n.stripBr&&"<br>"==e&&(e=""),i.$setViewValue(e)}i&&(console.log(i),i.$render=function(){t.html(i.$viewValue||"")},t.on("blur keyup change",function(){e.$apply(o)}),o())}}}),a.factory("CancelSurveyModal",["$timeout","$rootScope","Designer","$compile","$http","$document","$http",function(e,t,n,i,o,a,o){var r,l,s="/tmpl/designer/cancel-survey-modal.tmpl.html",d=function(n){var d=t.$new();d.showSurvey=!1,e(function(){d.showSurvey=!0},3e3);o.get(s).then(function(e){var t=i(e.data)(d);r=t,a[0].body.appendChild(t[0]),d.cancel=function(){l.hideModal()},$(r).on("hidden.bs.modal",function(e){d.$destroy(),$(r).remove(),r=null}),l.showModal()},function(e){})};return l={show:function(e){Stats.t("Cancel Survey Modal Show",{}),d(e)},showModal:function(){r&&$(r).modal("show")},hideModal:function(){r&&(window.location="/app/dashboard",$(r).modal("hide"))}}}]),a.run(["$rootScope","User","FeatureFence","Stats",function(e,t,n,i){var o={};location.search.substr(1).split("&").forEach(function(e){o[e.split("=")[0]]=e.split("=")[1]}),e.queryParams=o,t.getCreatorUser().then(function(t){e.creatorUser=t,i.t("New Session");var o=e.$on("$stateChangeSuccess",function(e,t,i,a,r){n.redirecter(t),o()});if(e.$on("$stateChangeStart",function(e,t,i,o,a){n.redirecter(t)}),e.creatorUser.subscription&&e.creatorUser.subscription.cancels_on){var a=864e5,r=new Date(e.creatorUser.subscription.cancels_on),l=new Date;e.creatorUser.daysLeft=Math.round(Math.abs((r.getTime()-l.getTime())/a)),e.creatorUser.cancelDate=r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear()}}),e.getNumPersonalProjects=function(){return e.projects.filter(function(e){return!e.team_id&&!e.is_disabled}).length}}]).controller("DashboardCtrl",["$scope","$state","$rootScope","User","Team","PlansModal","Stats","$timeout","ABTesting","$location","PaywallModal","PlansModal","FeatureFence",function(e,t,n,i,o,a,r,l,s,d,c,a,u){e.userService=i,e.path=[],e.selectedProjectFilter="all",e.selectProjectFilter=function(t){e.selectedProjectFilter=t},e.selectedTeamName=function(e,t){return _.findWhere(e,{id:t}).name},e.projectFilter=function(e,t){return"all"==t?!0:"myprojects"==t?null==e.team_id:e.team_id==t},e.filterProjects=function(t){return e.projectFilter(t,e.selectedProjectFilter)},e.numProjectsByChoice=function(t){var n=0;return e.projects.forEach(function(i){e.projectFilter(i,t)&&(n+=1)}),n},e.locationPath=function(){return d.path()},e.upgradeModal=function(e){r.t(e),a.show(void 0,{plan:u.planId()})},e.upgrade=function(){t.go("dashboard.upgrade")},e.projectsUpgrade=function(){c.show("more-projects")},e.loadTeams=function(){o.all().then(function(t){e.teams=t})},e.loadTeams(),e.pushPath=function(t){e.path.push(t)},e.setPath=function(t){e.path=t}}]).controller("DashboardPaymentCtrl",["$scope","$timeout","Stats","$rootScope","$http",function(e,t,n,i,o){}]).controller("UpgradeCtrl",["$state","$rootScope","Config","Stats","$scope","smoothScroll","PlansModal","Stats","ShareModal","Tutorials","FeatureFence",function(e,t,n,i,o,a,r,i,l,s,d){l.hideModal(),i.t("Upgrade Page"),o.monthly={pro:29,basic:9,team:99,prolegacy:29},o.annually={pro:24,basic:7,team:89,prolegacy:24},o.setPeriod=function(e,t){o.period=e,"undefined"!=typeof t&&t.stopPropagation(),"monthly"==e?i.t("Set Monthly",{type:"landing"}):i.t("Set Annual",{type:"landing"})},null!==d.planId()&&"Free"!==d.plan()?"yearly"==d.getBillingFrequency()?o.setPeriod("annually"):o.setPeriod("monthly"):o.setPeriod("annually"),o.learnMore=function(){a(document.getElementById("code-editing-video"),{containerId:"dashboard"}),i.t("Upgrade Landing Learn More")},o.subscribeToBasic=function(e){r.show(void 0,{plan:"creator-basic"+("annually"==o.period?"-yearly-84":"-monthly-9")}),i.t("Upgrade Landing Upgrade Button",{plan:"creator-basic",position:e})},o.subscribeToPro=function(e){r.show(void 0,{plan:"creator-pro"+("annually"==o.period?"-yearly-288":"-monthly-29")}),i.t("Upgrade Landing Upgrade Button",{plan:"creator-pro",position:e})},o.showCodingTutorial=function(){s.show("codingtutorial")}}]).controller("DashboardProjectsCtrl",["$scope","$stateParams","$state","Project","ProjectDialog","Projects","Designer","Exporter","Stats","ShareModal","$rootScope","StandardModal","PaywallModal","MoveModal","IconSplashModal","$http","Config","FeatureFence","Team",function(e,t,n,i,o,a,r,l,s,d,c,u,p,g,h,m,f,v,y){function w(){m.get(f.get("creator_api_url")+"/creatorapps-dashboard").then(function(e){c.projects=e.data,console.info("PROJECTS",e.data),c.loadingIndicator=!1})}function b(e){return i.get({appId:e.app_id}).$promise}c.projects=[],c.loadingIndicator=!0,y.all().then(function(t){e.teams=t}),w(),e.promptUpgrade=function(e){e.preventDefault(),e.stopPropagation()},e.getAppIcon=function(e){return e.app_icon_url?e.app_icon_url:"/img/creator-placeholder-icon.png"};var C=t.isNew;console.log("PROJECTS. New?",C),e.doUpgrade=function(){s.t("Project Limit Footer Upgrade Button"),n.go("dashboard.upgrade")},e.newProject=function(){return s.t("New Project Modal",{}),c.getNumPersonalProjects()>=v.getVal("projectLimit")&&0==e.teams.length?void p.show("more-projects"):void o.go(e.teams).then(function(t){e.close(),s.t("Create Project Button",{}),s.increment("projects",1),a.createNew(t.name,t.template,t.team,t.version)})},e.moveProject=function(t,n){b(n).then(function(t){g.show(t,e.teams).then(function(e){n.team_id=e.team_id})}),t.stopPropagation()},e.publicPrivateClick=function(t,n){s.t("Click Public/Private Status",{status:n.share_code||n.share_lock}),e.shareProject(t,n)},e.shareProject=function(e,t){b(t).then(function(e){d.show(e,function(e){t.share_lock=e})}),e.stopPropagation()},e.exportProject=function(e,t){b(t).then(function(e){l["export"](e)}),e.stopPropagation()},e.duplicateProject=function(t,n){return t.stopPropagation(),!n.team_id&&c.getNumPersonalProjects()>=v.getVal("projectLimit")?(e.doUpgrade(),!1):void b(n).then(function(e){s.t("Duplicate Project",{}),e.$clone().then(function(e){c.projects=[],c.loadingIndicator=!0,w()})})},e.editIconSplash=function(e,t){b(t).then(function(e){h.show(e,function(e){t.app_icon_url=e})}),e.stopPropagation()},e.unToggle=function(e,t){t.val=!t.val,e.stopPropagation()},e.editProjectName=function(t,n,i){i.val=!0,e.oldProjectName=n.name,t.stopPropagation()},e.saveProjectName=function(e,t,n){s.t("Change Project Name",{}),b(t).then(function(e){e.name=t.name,e.$save().then(function(e){n.val=!1})}),e.stopPropagation()},e.deleteProject=function(t,n){b(n).then(function(t){s.t("Delete Project Modal Show",{}),u.hideModal(),u.show({message:'Are you sure? Deleting a project cannot be undone. To confirm you wish to delete this project, please type "DELETE" in the box below, then click "Delete Project":',title:"Delete Project",requiredInput:"DELETE",cancel:"Cancel",warning:"Delete Project",height:"385px",callback:function(i){"warning"===i&&(s.t("Delete Project",{project:n}),t.$del().then(function(t){e.projects.splice(e.projects.indexOf(n),1)}))}})}),t.stopPropagation()},e.close=function(){},e.openProject=function(t){r.loadProject(t),e.close()}}]).controller("DashboardTeamsCtrl",["$scope","$state","$rootScope","PaywallModal","Team","TeamAdd","Stats","FeatureFence","Plans",function(e,t,n,i,o,a,r,l,s){function d(t){console.log("Team added",t,arguments),t?(console.log("DID ADD"),e.loadTeams()):console.log("DID NOT ADD")}console.log("Teams",e.queryParams),n.loadingIndicator=!1;var c=!1;e.$watch("creatorUser",function(t,n){t&&"add-team"==e.queryParams.upgrade&&l.hasAccess("createTeam")&&(c=!0,a.addTeam(!0).then(d))}),e.addTeam=function(){r.t("Add Team Button",{}),l.hasAccess("createTeam")?a.addTeam().then(d):i.show("add-team")}}]).controller("DashboardTeamCtrl",["$scope","$stateParams","PaywallModal","Team","TeamAdd","TeamInvite","PlansModal","Stats",function(e,t,n,i,o,a,r,l){function s(){i.get(t.id).then(function(t){e.team=t})}console.log("Single team",t),e.getAppIcon=function(e){return e.app_icon_url?e.app_icon_url:"/img/creator-placeholder-icon.png"},e.openProject=function(t){Designer.loadProject(t),e.close()},e.showTeamManagement=function(){e.showManage=!e.showManage},e.addMember=function(){l.t("Add Team Member Button",{});try{a.open(e.team,function(){s()})}catch(t){n.show("add-member")}},e.removeMember=function(t,n){l.t("Remove Team Member Button",{}),i.removeMember(e.team,t.id,n).then(function(){s()},function(e){alert("Unable to remove member. Please contact support")})},s()}]).controller("DashboardTeamInviteCtrl",["$scope","$timeout","$stateParams","Plans","Team","Stats",function(e,t,n,i,o,a){e.data={emails:""},e.sendInvites=function(n){t.cancel(e.statusTimeout),a.t("Send Team Invites",{emails:e.data.emails});var i=e.data.emails.split(/[;,]+/).join(",");e.status="Sending invites...",o.invite(e.team,i).then(function(n){e.status="Sent!",e.statusTimeout=t(function(){e.status=""},3e3),e.data.emails=""},function(t){t.data.error&&"over_limit"==t.data.error?e.status="You have reached the invite limit for your plan. Please upgrade.":e.status="Unable to send invites. Please contact support."}),n.preventDefault()}}]).controller("DashboardAddTeamCtrl",["$scope","TeamAdd",function(e,t){e.addTeam=function(){t.addTeam()}}]).controller("DashboardHelpCtrl",["$scope","$sce","$compile",function(e,t,n){document.location.href="http://docs.usecreator.com/",e.buttons={right:[]}}]).controller("DashboardHelpIndexCtrl",["$scope",function(e){document.location.href="http://docs.usecreator.com/",e.setPath([{title:"Help",state:"dashboard.help.index"}])}]).controller("DashboardHelpVideosCtrl",["$scope","Tutorials",function(e,t){document.location.href="http://docs.usecreator.com/page/tutorial-videos",e.setPath([{title:"Help",state:"dashboard.help.index"},{title:"Videos",state:"dashboard.help.videos"}]),e.tutorials=t.tutorials,e.openTutorial=t.show}]).controller("DashboardHelpSupportCtrl",["$scope",function(e){document.location.href="http://ionic.io/products/creator/support",e.buttons.right=[{title:"Get in touch",type:"btn-success",href:"mailto:help@usecreator.com"},{title:"Tweet at us!",type:"btn-info",href:"http://twitter.com/IonicCreator",target:"_blank"}],e.setPath([{title:"Help",state:"dashboard.help.index"},{title:"Support",state:"dashboard.help.support"}])}]).controller("DashboardAdminCtrl",["$scope","$rootScope","User",function(e,t,n){}]).controller("DashboardAdminProjectsCtrl",["$scope","$rootScope","User","$http","Designer",function(e,t,n,i,o){
e.data={lookupEmail:"",disableButton:!1},e.lookupProjects=function(){e.data.projects=[],e.data.disableButton=!0,i.post("/api/v1/admin/projects",{email:e.data.lookupEmail}).then(function(t){console.info(t),e.data.projects=t.data,e.data.disableButton=!1})},e.openProject=function(t){o.loadProject(t),e.close()}}]).controller("DashboardProfileCtrl",["$scope","$rootScope","Plans","FeatureFence",function(e,t,n,i){e.FeatureFence=i}]).controller("DashboardProfileEditCtrl",["$scope","$rootScope","User","$window",function(e,t,n,i){e.userObject=angular.copy(t.user),e.userObject.simpleFields=!0,console.info("USER OBJECT",t.user),e.userService=n,e.editProfile=function(){i.open("https://dashboard.ionicframework.com/settings/account","_blank")},e.updateUser=function(){e.saving=!0,e.saveErrors=null,n.save(e.userObject).then(function(){e.saving=!1},function(t){e.saving=!1,e.saveErrors=t.data.message,t.data.email&&(e.saveErrors=t.data.email)})}}]).controller("DashboardProfilePasswordCtrl",["$scope","$rootScope","User",function(e,t,n){e.userObject=angular.copy(t.user),e.userService=n;var i=function(){e.userObject.newPassword1="",e.userObject.newPassword2="",e.userObject.oldPassword=""};e.updateUser=function(){e.saving=!0,e.saveErrors=null,n.save(e.userObject).then(function(){e.saving=!1,i()},function(t){e.saving=!1,e.saveErrors=t.data.message,t.data.email&&(e.saveErrors=t.data.email)})}}]).controller("DashboardProfileDeactivateCtrl",["$scope","$rootScope","User","$http","Config","$timeout","Stats",function(e,t,n,i,o,a,r){}]).controller("DashboardProfileBillingCtrl",["$scope","PlansModal","ABTesting","$state","$rootScope","Stats","$timeout","Project","$http","CancelSurveyModal","Invoice","Config","FeatureFence",function(e,t,n,i,o,a,r,l,s,d,c,u,p){e.projects=[],e.invoices=[],l.all().$promise.then(function(t){e.projects=t}),c.all().then(function(t){e.invoices=t}),e.showCard=function(){e.showCardForm=!e.showCardForm},o.creatorUser.data.address?e.address=o.creatorUser.data.address:e.address={line1:"",line2:"",line3:""},e.showAddressForm=!1,e.showAddress=function(){e.showAddressForm=!e.showAddressForm},e.submitAddress=function(){o.creatorUser.data.address={line1:e.address.line1,line2:e.address.line2,line3:e.address.line3},s.post(u.get("creator_api_url")+"/user/data",{data:o.creatorUser.data}).then(function(t){e.showAddress()},function(e){})},e.upgrade=function(){i.go("dashboard.upgrade")},jQuery(function(e){var t=e("#cardWrapper"),n=e("#cardForm"),i=e("#cardFormError"),o=n.find("button");t.length>0&&(e("input[name=plan]:radio").change(function(e){"free"==this.value?t.hide():t.show()}),"free"==e("input:radio[name=plan]:checked").val()&&t.hide()),n.submit(function(t){t.preventDefault();var a,r,l,s;return"free"!=n.find("input:radio[name=plan]:checked").val()?(o.prop("disabled",!0),a=e("#card-num").val(),r=e("#card-month").val(),l=e("#card-year").val(),s=e("#card-cvc").val(),Stripe.card.createToken({number:a,exp_month:r,exp_year:l,cvc:s},function(t,o){if(o.error)i.find("p").text(o.error.message),i.removeClass("hidden"),n.find("button").prop("disabled",!1);else{var a=o.id;n.append(e('<input type="hidden" name="stripeToken" />').val(a)),n.get(0).submit()}}),!1):void 0})}),e.reallyCancel="NO",e.cancelProcessing=!1,e.deactivate=function(){"YES"===e.reallyCancel&&(e.cancelProcessing=!0,s.post("/stripe/deactivate").then(function(t){t.data&&t.data.error?(e.message=t.data.error,e.cancelProcessing=!1):(e.cancelProcessing=!1,a.t("selfcancel",{},!0),e.message="Cancelation successful.",d.show())},function(t){e.cancelProcessing=!1,e.message="Error canceling. Please try again, or contact support."}))}}]).controller("LoadErrorCtrl",["$scope","$stateParams",function(e,t){e.projectId=t.projectId}]),a.directive("uiSrefActiveIf",["$state",function(e){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,n,i){function o(){for(var t=a.split(","),i=0;i<t.length;i++){var o=t[i];if(e.includes(o)||e.is(o)){n.addClass("active");break}n.removeClass("active")}}var a=i.uiSrefActiveIf;t.$on("$stateChangeSuccess",o),o()}]}}]).directive("select2",["$rootScope","$timeout",function(e,t){return{restrict:"E",require:"?ngModel",scope:{name:"@",placeholder:"@",items:"="},template:'<select><option value="">{{placeholder}}</option><option ng-repeat="item in items" value="{{item.value}}">{{item.name}}</option></select>',link:function(e,n,i,o){var a=null,r=function(e){return e.name};_.debounce(function(){$(a).select2({formatResult:r,formatSelection:r}).val(o.$viewValue).on("change",function(){return null==$(this).val()?void t(function(){null!=o.$viewValue&&a.val(o.$viewValue).trigger("change")},100):void o.$setViewValue($(this).val())}).trigger("change")},10);o.$render=function(){a&&a.val(o.$viewValue).trigger("change")},o.$viewChangeListeners.push(function(){e.$eval(i.ngChange)}),n.on("$destroy",function(){$(a).select2("destroy")}),setTimeout(function(){a=$(n[0].querySelector("select"))})}}}]),a.factory("HelpLauncher",["$timeout","$rootScope","Designer","$compile","$http","$document","$http","Stats",function(e,t,n,i,o,a,o,r){var l,s,d="/tmpl/designer/help-launcher.tmpl.html",c=function(){var e=t.$new();o.get(d).then(function(t){var n=i(t.data)(e);l=n,a[0].body.appendChild(n[0]),e.cancel=function(){s.hideModal()},e.data={location:"choose"},e.changeSection=function(t){r.t("Help Launcher",{action:"Section "+t}),e.data.location=t},e.trackLink=function(e){r.t("Help Launcher",{action:"Link "+e})},e.clickedEmail=function(){r.t("Help Launcher",{action:"Clicked Email"})},$(l).on("hidden.bs.modal",function(t){e.$destroy(),$(l).remove(),l=null}),s.showModal()},function(e){})};return s={show:function(){l?s.hideModal():(r.t("Help Launcher",{action:"open"}),c())},showModal:function(){l&&$(l).modal("show")},hideModal:function(){l&&$(l).modal("hide")}}}]),a.factory("IconSplashModal",["$timeout","$state","$rootScope","$http","$compile","$document","$q","Config","Designer","ComponentFactory","DocumentRenderer",function(e,t,n,i,o,a,r,l,s,d,c){var u,p,g="/tmpl/dashboard/dashboard-iconsplash.tmpl.html",h=function(e,t){var r=n.$new();i.get(g).then(function(i){var l=o(i.data)(r);u=l,a[0].body.appendChild(l[0]),("undefined"==typeof s.getProject()||e.id!==s.getProject().id)&&(s.init(),d.clearIdMap(),s.setProject(e),c.setFrameInjectables(o,n,document,angular,window)),r.app=s.getExtra("iconsplash",{icon:"",icon_img:"",icon_name:"",splash:"",splash_img:"",splash_name:""});var g=s.getExtra("iconsplash",{icon:"",icon_img:"",icon_name:"",splash:"",splash_img:"",splash_name:""}),h=e.app_icon_url;r.cancel=function(){e.app_icon_url=h,t(h),s.setExtra("iconsplash",g),n.$emit("iconsplash"),p.hideModal()},r.uploadingIcon=!1,r.deleteIcon=function(){s.getProject().app_icon_url="",t(""),r.app={icon:"",icon_img:"",icon_name:"",splash:r.app.splash,splash_img:r.app.splash_img,splash_name:r.app.splash_name},s.setExtra("iconsplash",r.app),n.$emit("iconsplash")},r.uploadIcon=function(){function e(e,i){filepicker.convert(i,{width:140,height:140},function(o){s.getProject().app_icon_url="https://s3.amazonaws.com/ionic-io-static/"+o.key,t("https://s3.amazonaws.com/ionic-io-static/"+o.key);var a=e.key.split("_");a.shift(),a=a.join("_"),r.app={icon:"https://s3.amazonaws.com/ionic-io-static/"+e.key,icon_img:"https://s3.amazonaws.com/ionic-io-static/"+i.key,icon_name:a,splash:r.app.splash,splash_img:r.app.splash_img,splash_name:r.app.splash_name},s.setExtra("iconsplash",r.app),n.$emit("iconsplash"),r.uploadingIcon=!1},function(){r.uploadingIcon=!1})}r.uploadingIcon=!0,filepicker.setKey("AabgSObTT8yIzUSh8zMNAz"),filepicker.pickAndStore({extensions:[".png",".psd",".ai"],multiple:!1,customCss:"https://creator.ionic.io/css/filepicker.css",location:"S3",services:["COMPUTER","GOOGLE_DRIVE","DROPBOX","BOX","URL"]},{location:"S3"},function(t){if(t.length>0){var n=t[0];n.filename.indexOf(".psd")>-1||n.filename.indexOf(".ai")>-1?filepicker.convert(n,{format:"png"},function(t){e(n,t)}):e(n,n)}else r.uploadingIcon=!1},function(){r.uploadingIcon=!1})},r.uploadingSplash=!1,r.deleteSplash=function(){r.app={splash:"",splash_img:"",splash_name:"",icon:r.app.icon,icon_img:r.app.icon_img,icon_name:r.app.icon_name},s.setExtra("iconsplash",r.app),n.$emit("iconsplash")},r.uploadSplash=function(){function e(e,t){filepicker.convert(t,{width:400,height:400},function(t){var i=e.key.split("_");i.shift(),i=i.join("_"),r.app={splash:"https://s3.amazonaws.com/ionic-io-static/"+e.key,splash_img:"https://s3.amazonaws.com/ionic-io-static/"+t.key,splash_name:i,icon:r.app.icon,icon_img:r.app.icon_img,icon_name:r.app.icon_name},s.setExtra("iconsplash",r.app),n.$emit("iconsplash"),r.uploadingSplash=!1},function(){r.uploadingSplash=!1})}r.uploadingSplash=!0,filepicker.setKey("AabgSObTT8yIzUSh8zMNAz"),filepicker.pickAndStore({extensions:[".png",".psd",".ai"],multiple:!1,customCss:"https://creator.ionic.io/css/filepicker.css",location:"S3",services:["COMPUTER","GOOGLE_DRIVE","DROPBOX","BOX","URL"]},{location:"S3"},function(t){if(t.length>0){var n=t[0];n.filename.indexOf(".psd")>-1||n.filename.indexOf(".ai")>-1?filepicker.convert(n,{format:"png"},function(t){e(n,t)}):e(n,n)}else r.uploadingSplash=!1},function(){r.uploadingSplash=!1})},$(u).on("hidden.bs.modal",function(e){console.log("Hidden modal"),r.$destroy(),$(u).remove(),u=null}),p.showModal()},function(e){})};return p={show:function(e,t){Stats.t("IconSplash Modal Show",{}),h(e,t)},showModal:function(){u&&$(u).modal("show")},hideModal:function(){u&&$(u).modal("hide")}}}]),a.directive("liveSearch",["$timeout",function(e){return{restrict:"E",templateUrl:"designer/live-search.tmpl.html",link:function(t,n,i){var o=angular.element(n[0].parentElement.querySelector("input"));t.hideBox=!1,t.submitVal=function(n){"undefined"!=typeof n&&0!=n.trim().length&&(o.val(n),o.trigger("input"),o.focus(),e(function(){t.hideBox=!0},1))},o.on("keydown",function(e){40===e.which?(e.preventDefault(),t.selectedMatch=t.matches[Math.min(t.matches.indexOf(t.selectedMatch)+1,t.matches.length-1)],o.val(t.selectedMatch)):38===e.which?(e.preventDefault(),t.selectedMatch=t.matches[Math.max(t.matches.indexOf(t.selectedMatch)-1,0)],o.val(t.selectedMatch)):13===e.which?(e.preventDefault(),t.submitVal(o.val())):9===e.which&&(e.preventDefault(),t.submitVal(t.selectedMatch||o.val()))});var a=JSON.parse(i.source);t.selectedMatch=null,i.$observe("search",function(e){t.hideBox=!1,t.matches=a.filter(function(t){return e.trim().length>0&&-1!==t.indexOf(e)}).sort(function(e,t){return e.length-t.length}).splice(0,7).filter(function(e,t,n){return n.indexOf(e)==t}),0==t.matches.length&&(t.selectedMatch=null)}),i.$observe("source",function(e){a=JSON.parse(e)}),t.setSelectedMatch=function(e){t.selectedMatch=e},t.$on("$destroy",function(){o.off("keydown"),n.remove()})}}}]).factory("JavaScriptSettingsModal",["$timeout","$rootScope","Designer","$compile","$http","$document","$http","CordovaVariablesModal",function(e,t,n,i,o,a,o,r){var l,s,d="/tmpl/designer/javascript-settings.tmpl.html",c=function(e){var c=t.$new();c.Designer=n;o.get(d).then(function(t){var d=i(t.data)(c);l=d,a[0].body.appendChild(d[0]),c.section=e||n.Coding.settings.settingsSection||"externaljs",c.saveLoading=!1,delete o.defaults.headers.common["X-Requested-With"],c.validPluginNames=[],o({method:"GET",url:"https://npmsearch.com/query?q=cordova&fields=name&size=5000",withCredentials:!1}).then(function(e){c.validPluginNames=e.data.results.map(function(e){return e.name[0]}).filter(function(e){return 0==e.indexOf("cordova-plugin")})},function(e){}),c.searchIsOpen=function(){return null!==document.querySelector(".live-search")},c.saveButtonMessage="",c.showSaveButtonMessage=!1,c.saveButtonMessageIcon="",c.saveButtonMessageColor="",c.scriptURL="",c.dependencyName="",c.addPlugin=function(e){0!=e.trim().length&&(n.Coding.addCordovaPlugin(e),c.npmName="")},c.removePlugin=function(e){n.Coding.removeCordovaPlugin(e)},c.addJS=function(e){0!=e.trim().length&&(n.Coding.addExternalJS(e),c.scriptURL="")},c.removeJS=function(e){n.Coding.removeExternalJS(e)},c.moveUp=function(e){n.Coding.moveExternalJSUp(e)},c.moveDown=function(e){n.Coding.moveExternalJSDown(e)},c.addDependency=function(e){0!=e.trim().length&&(n.Coding.addExternalDependency(e),c.dependencyName="")},c.removeDependency=function(e){n.Coding.removeExternalDependency(e)},c.openVariablesModal=function(e){r.show(e)},c.cancel=function(){s.hideModal()},$(l).on("hidden.bs.modal",function(e){c.$destroy(),$(l).remove(),l=null}),s.showModal()},function(e){})};return s={show:function(e){Stats.t("JavaScript Settings Modal Show",{}),c(e)},showModal:function(){l&&$(l).modal("show")},hideModal:function(){l&&$(l).modal("hide")}}}]).factory("CordovaVariablesModal",["$timeout","$rootScope","Designer","$compile","$http","$document","$http",function(e,t,n,i,o,a,o){var r,l,s="/tmpl/designer/cordova-variables.tmpl.html",d=function(e){var d=t.$new();d.Designer=n,d.plugin=e;o.get(s).then(function(t){var o=i(t.data)(d);r=o,a[0].body.appendChild(o[0]),d.addVariable=function(t,i){0!=t.length&&0!=i.length&&(n.Coding.addCordovaVariable(e,t,i),d.newName="",d.newValue="")},d.removeVariable=function(t){n.Coding.removeCordovaVariable(e,t)},d.cancel=function(){l.hideModal()},$(r).on("hidden.bs.modal",function(e){d.$destroy(),$(r).remove(),r=null}),l.showModal()},function(e){})};return l={show:function(e){Stats.t("Cordova Variables Modal Show",{}),d(e)},showModal:function(){r&&$(r).modal("show")},hideModal:function(){r&&$(r).modal("hide")}}}]),a.factory("MoveModal",["$state","$rootScope","$http","$compile","$document","$timeout","$q","Config","Stats",function(e,t,n,i,o,a,r,l,s){var d,c,d,c,u="/tmpl/dashboard/dashboard-move-project.tmpl.html",p=function(e,a,r){var l=t.$new();l.data={project:e},l.teams=a,l.moveProject=function(){console.log("Moving project to team",l.team),e.team_id=l.team&&l.team.id||null,e.$move().then(function(t){r.resolve(e),c.hideModal()},function(e){alert("Unable to move project. Please contact support"),console.error(e)})};for(var s=0;s<a.length;s++)if(a[s].id==e.team_id){l.team=a[s];break}n.get(u).then(function(e){var t=i(e.data)(l);d=t,o[0].body.appendChild(t[0]),$(d).on("hidden.bs.modal",function(e){console.log("Hidden modal"),l.$destroy(),$(d).remove(),d=null,r.reject()}),c.showModal()},function(e){})};return c={show:function(e,t){var n=r.defer();return s.t("Move Project Show"),p(e,t,n),n.promise},showModal:function(){d&&$(d).modal("show")},hideModal:function(){d&&$(d).modal("hide")}}}]),a.factory("Plans",["$http","Config",function(e,t){var n=e.get(t.get("creator_api_url")+"/plans").then(function(e){return e.data}).then(function(e){return e.forEach(function(e){e.features=e.features.map(function(e){return{anti:0==e.indexOf("-"),text:e.replace(/^\-/,"")}})}),e});return{getPlans:function(){return n}}}]),a.factory("PaywallModal",["$state","$rootScope","$http","$compile","$document","$timeout","$q","Config","Stats","ABTesting",function(e,t,n,i,o,a,r,l,s,d){var c,u,p=function(r){var l=t.$new();l.data={current:"main"},l.upgrade=function(){s.t("Paywall Upgrade Click",{template:r}),e.go("dashboard.upgrade"),a(function(){u.hideModal()},10)};n.get(r).then(function(e){var t=i(e.data)(l);c=t,o[0].body.appendChild(t[0]),$(c).on("hidden.bs.modal",function(e){console.log("Hidden modal"),l.$destroy(),$(c).remove(),c=null}),u.showModal()},function(e){})},g={"add-team":"/tmpl/dashboard/paywalls/team-upgrade.tmpl.html","add-member":"/tmpl/dashboard/paywalls/team-member-upgrade.tmpl.html","password-protect":"/tmpl/dashboard/paywalls/password-protect.tmpl.html","more-projects":"/tmpl/dashboard/paywalls/more-projects.tmpl.html","code-editing":"/tmpl/dashboard/paywalls/code-editing.tmpl.html"};return u={show:function(e){var t=g;s.t("Paywall Modal Show",{feature:e}),p(t[e])},showModal:function(){c&&$(c).modal("show")},hideModal:function(){c&&$(c).modal("hide")}}}]),a.filter("noZerosCurrency",["$filter",function(e){return function(e){return e=parseFloat(e),e=e.toFixed(e%1===0?0:2),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}]).filter("frequencyAbbrev",["$filter",function(e){return function(e){return"yearly"==e?"yr":"monthly"==e?"mo":""}}]).factory("PlansModal",["$state","$rootScope","$http","$compile","$document","$q","Config","Stats","Coupon","User","Plans","FeatureFence",function(e,t,n,i,o,a,r,l,s,d,c,u){var p,g,h="/tmpl/dashboard/payment-form.tmpl.html",m=function(e,a){var r=t.$new();c.getPlans().then(function(c){function u(e){return c.find(function(t){return t.plan_id==e})}r.selectedPlan=u(a.plan),r.openPlans=function(){window.location.href="/app/dashboard/upgrade"},r.data={showPaymentForm:!(t.creatorUser&&t.creatorUser.stripe_card_last_4),monthlyAnnualToggle:"yearly"==r.selectedPlan.pricing_frequency,coupon:r.queryParams.coupon||"",couponCodeShowing:r.queryParams.coupon&&!0||!1,couponResponse:{valid:!1},hideAnnualToggle:!1},r.err=e&&unescape(e),r.section=a?"payment":"upgradesuccess",r.$watch("data.coupon",function(){r.data.coupon=r.data.coupon.toUpperCase().replace(/\s/g,""),""==r.data.coupon?r.data.couponResponse={valid:!1}:s.check({couponId:r.data.coupon}).$promise.then(function(e){console.log("COUPON",e),r.data.coupon==e.id&&(r.data.couponResponse=e)})}),r.updateMonthlyAnnual=function(){1==r.data.monthlyAnnualToggle?(l.t("Set Annual",{type:"modal"}),r.data.monthlyAnnualToggle=!0,r.selectedPlan=u(r.selectedPlan.plan_id.replace(/\-\d*$/g,"").replace("-yearly","").replace("-monthly","")+"-yearly"),r.selectedPlan.plan_id.indexOf("creator-basic")>=0&&(r.selectedPlan=u(r.selectedPlan.plan_id+"-84")),r.selectedPlan.plan_id.indexOf("creator-pro")>=0&&(r.selectedPlan=u(r.selectedPlan.plan_id+"-288"))):(l.t("Set Monthly",{type:"modal"}),r.data.monthlyAnnualToggle=!1,r.selectedPlan=u(r.selectedPlan.plan_id.replace(/\-\d*$/g,"").replace("-yearly","").replace("-monthly","")+"-monthly"),r.selectedPlan.plan_id.indexOf("creator-basic")>=0&&(r.selectedPlan=u(r.selectedPlan.plan_id+"-9")),r.selectedPlan.plan_id.indexOf("creator-pro")>=0&&(r.selectedPlan=u(r.selectedPlan.plan_id+"-29")))},r.getFinalPrice=function(){if(!r.selectedPlan)return 0;var e=r.selectedPlan.price;return 1==r.data.couponResponse.valid&&r.data.couponResponse.percent_off?e*=(100-r.data.couponResponse.percent_off)/100:1==r.data.couponResponse.valid&&r.data.couponResponse.amount_off&&(e-=r.data.couponResponse.amount_off/100),e},r.getSavings=function(){if(!r.selectedPlan)return 0;var e=0;if("yearly"==r.selectedPlan.pricing_frequency){var t=u(r.selectedPlan.plan_id.replace(/\-\d*$/g,"").replace("-yearly","").replace("-monthly","")+"-monthly");t.plan_id.indexOf("creator-basic")>=0&&(t=u(t.plan_id+"-9")),t.plan_id.indexOf("creator-pro")>=0&&(t=u(t.plan_id+"-29")),e=12*t.price-r.getFinalPrice()}else e=r.selectedPlan.price-r.getFinalPrice();return e},r.paymentFormCardType="Unknown",r.getCreditCardType=function(e){return/^5[1-5]/.test(e)?"MasterCard":/^4/.test(e)?"Visa":/^3[47]/.test(e)?"American Express":/^6(?:011\d{12}|5\d{14}|4[4-9]\d{13}|22(?:1(?:2[6-9]|[3-9]\d)|[2-8]\d{2}|9(?:[01]\d|2[0-5]))\d{10})$/.test(e)?"Discover":"Unknown"},r.paySubmit=function(){r.err="";var e=($("#cardWrapper"),$("#payment-form")),t=($("#payment-form-error"),e.find("button")),i=$("#usingStoredCard").val();if("true"==i){console.log("using stored card"),l.t("Submit Payment Form",{plan:r.selectedPlan.plan_id}),t.prop("disabled",!0);var o={};return o.planId=$('input[name="planId"]').val(),o.coupon=$('input[name="coupon"]').val()||r.data.coupon,o.trial=!1,n({method:"POST",url:"/stripe/upgrade",data:o}).success(function(e,n,i){e.err?(r.err=e.err,t.prop("disabled",!1)):d.getCreatorUser(!0).then(function(){r.section="upgradesuccess"},function(){console.error("FAILED TO GET CREATOR USER")})}).error(function(e,n,i){r.err="There was an issue upgrading your account, please contact support.",t.prop("disabled",!1)}),!1}l.t("Submit Payment Form",{plan:r.selectedPlan.plan_id});var a,s,c,u;return t.prop("disabled",!0),cardName=$("#pay-card-name").val(),a=$("#pay-card-num").val(),s=$("#pay-card-month").val(),c=$("#pay-card-year").val(),u=$("#pay-card-cvc").val(),cardZIP=$("#pay-card-zip").val(),Stripe.card.createToken({name:cardName,number:a,exp_month:s,exp_year:c,cvc:u,address_zip:cardZIP},function(e,i){if(l.t("STRIPE",{status:e,response:i}),i.error)l.t("Payment Failure",{plan:r.selectedPlan.plan_id}),r.err=i.error.message,t.prop("disabled",!1);else{l.t("Payment Stripe Token",{plan:r.selectedPlan.plan_id});var o=i.id,a={};a.stripeToken=o,a.planId=$('input[name="planId"]').val(),a.coupon=$('input[name="coupon"]').val(),a.trial=!1,n({method:"POST",url:"/stripe/upgrade",data:a}).success(function(e,n,i){e.err?(r.err=e.err,t.prop("disabled",!1)):d.getCreatorUser(!0).then(function(){r.section="upgradesuccess"},function(){console.error("FAILED TO GET CREATOR USER")})}).error(function(e,n,i){r.err="There was an issue upgrading your account, please contact support.",t.prop("disabled",!1)})}}),!1};n.get(h).then(function(e){var t=i(e.data)(r);p=t,o[0].body.appendChild(t[0]),$(p).on("hidden.bs.modal",function(e){console.log("Hidden modal"),r.$destroy(),$(p).remove(),p=null}),g.showModal()},function(e){})})};return g={show:function(e,t){l.t("Plans Modal Show"),m(e,t)},showModal:function(){p&&$(p).modal({backdrop:"static",keyboard:!1,show:!0})},hideModal:function(){p&&$(p).modal("hide")}}}]),a.factory("PromptParameters",["$state","$rootScope","$http","$compile","$document","$timeout","$q","Config","Stats",function(e,t,n,i,o,a,r,l,s){var d,c,u="/tmpl/dashboard/dashboard-prompt-parameters.tmpl.html",p=function(e){var a=t.$new();a.params=e.get("parameters",[]),a.err={},a.saveParams=function(){e.set("parameters",a.params),window.Designer.save(),a.err={};var t=e.get("parameters").filter(function(e){return""==e.defaultForPreview.trim()});0==t.length?(c.hideModal(),window.Designer.setMode("preview",!1,!0)):t.forEach(function(e){a.err[e.name]=!0})};n.get(u).then(function(e){var t=i(e.data)(a);d=t,o[0].body.appendChild(t[0]),$(d).on("hidden.bs.modal",function(e){console.log("Hidden modal"),a.$destroy(),$(d).remove(),d=null}),c.showModal()},function(e){})};return c={show:function(e){s.t("Prompt Page Parameters"),p(e)},showModal:function(){d&&$(d).modal("show")},hideModal:function(){d&&$(d).modal("hide")}}}]),a.factory("Share",["$http","$q","Stats","Config",function(e,t,n,i){return{shareViaEmail:function(t,o){return n.t("Share",{mode:"email",num:o.length}),e.post(i.get("creator_api_url")+"/share/email",{app_id:t.app_id,emails:o})},shareViaSms:function(t,o){return n.t("Share",{mode:"sms",num:o.length}),e.post(i.get("creator_api_url")+"/share/sms",{app_id:t.app_id,numbers:o})},regenMobileCode:function(t){return e.post(i.get("creator_api_url")+"/creator/"+t.app_id+"/regen-mobile-code",{})}}}]).factory("ShareModal",["$timeout","$state","$rootScope","$http","$compile","$document","$q","Config","Share","Stats","PlansModal","ComponentFactory","DocumentRenderer","Designer","FeatureFence","PaywallModal",function(e,t,n,o,a,r,l,s,d,c,u,g,h,m,f,v){var y,w,b="/tmpl/dashboard/dashboard-share.tmpl.html",C=function(l){function u(){var e=m.getExtra("startingPage"),t=m.getById(e);if("undefined"==typeof t||"undefined"==typeof t.getParent()||"undefined"!=typeof t.getParent()&&null==t.getParent()){C.startingPage_required=!0;var n=m.getPages(),o=[];for(i=0;i<n.length;i++)p=n[i],0==p.get("abstract",!1)&&o.push({value:p.getId(),text:p.get("title")+" - "+p.get("url"),page:p,pageId:"("+p.getId()+")"});C.startingPage.pages=o}}"undefined"==typeof updateLockStatus&&(updateLockStatus=function(){});var C=n.$new();C.Designer=m,C.startingPage_required=!1,C.startingPage={page:""},C.setStartingPage=function(){""!=C.startingPage.page&&(n.ignoreFrameDocument=!0,m.setExtra("startingPage",C.startingPage.page),m.AppGraph._save(),C.startingPage_required=!1,n.$emit("outline.refresh"))},("undefined"==typeof m.getProject()||l.id!==m.getProject().id)&&(m.init(),g.clearIdMap(),m.setProject(l),h.setFrameInjectables(a,n,document,angular,window)),u(),C.upgrade=function(){t.go("dashboard.upgrade"),w.hideModal()},C.data={project:l,rootUrl:s.get("root_url")};o.get(b).then(function(t){var n=a(t.data)(C);y=n,r[0].body.appendChild(n[0]),""!==C.data.project.share_code&&!C.data.project.share_lock&&f.hasAccess("privateProjects",m.getProject().team_id)&&(console.info("RESET SHARE",C.data.project.share_code,C.data.project.share_lock),C.data.project.share_lock="password",updateLockStatus(C.data.project.share_lock,C.data.project.share_code),C.data.project.$save(function(e){l.lock_timestamp=e.lock_timestamp})),C.data.oldCode=C.data.project.share_code,C.urlPage=function(){var e=document.getElementById("share-url-tab");e.click()},C.setPasscode=function(){return c.t("Set Password Protect",{}),C.data.oldCode=C.data.project.share_code,C.data.project.share_lock="password",updateLockStatus(C.data.project.share_lock,C.data.project.share_code),""===C.data.project.share_lock||f.hasAccess("privateProjects",m.getProject().team_id)?void C.data.project.$save(function(e){l.lock_timestamp=e.lock_timestamp}):(C.data.project.share_code="",C.data.project.share_lock="",updateLockStatus(C.data.project.share_lock,C.data.project.share_code),C.data.oldCode="",C.data.project.$save(function(e){l.lock_timestamp=e.lock_timestamp}),v.hideModal(),void v.show("password-protect"))},C.$watch("data.project.share_lock",function(e,t){if(e!=t){if(""!==C.data.project.share_lock&&!f.hasAccess("privateProjects",m.getProject().team_id)){var n=C.data.project.share_lock;return C.data.project.share_code="",C.data.project.share_lock="",updateLockStatus(C.data.project.share_lock,C.data.project.share_code),C.data.oldCode="",C.data.project.$save(function(e){l.lock_timestamp=e.lock_timestamp}),void(("private"==n||"password"==n)&&(v.hideModal(),v.show("password-protect")))}"password"!==C.data.project.share_lock&&(C.data.project.share_code="",updateLockStatus(C.data.project.share_lock,C.data.project.share_code),C.data.oldCode=""),C.data.project.$save(function(e){l.lock_timestamp=e.lock_timestamp})}}),C.shareViaEmail=function(){C.data.sharingEmails="Sending...";var t=C.data.share_emails,t=t.replace(/(?:\r\n|\r|\n)/g,",").replace(/\s/g,"");d.shareViaEmail(C.data.project,t).then(function(t){c.t("Shared Via Email",{emails:C.data.share_emails}),C.data.share_emails="",C.data.sharingEmails="Sent!",e(function(){C.data.sharingEmails=""},1500)},function(e){e&&(console.error(e),alert("Unable to share, please contact support"))})},C.shareViaSms=function(){C.data.sharingSMS="Sending...";var t=C.data.share_numbers,t=t.replace(/(?:\r\n|\r|\n)/g,",").replace(/\s/g,"");d.shareViaSms(C.data.project,t).then(function(t){c.t("Share Via SMS",{numbers:C.data.share_numbers}),C.data.share_numbers="",C.data.sharingSMS="Sent!",e(function(){C.data.sharingSMS=""},1500)},function(e){e&&(console.error(e),alert("Unable to share, please contact support"))})},C.regenMobileCode=function(){d.regenMobileCode(C.data.project).then(function(e){C.data.project.mobile_code=e.data.code})},$(y).on("hidden.bs.modal",function(e){console.log("Hidden modal"),C.$destroy(),$(y).remove(),y=null}),w.showModal()},function(e){})};return w={show:function(e,t){c.t("Share Modal Show",{}),C(e,t)},showModal:function(){y&&$(y).modal("show")},hideModal:function(){y&&$(y).modal("hide")}}}]),a.factory("TeamAdd",["$state","$rootScope","$compile","$http","$document","$q","Config","Team","Stats",function(e,t,n,i,o,a,r,l,s){var d,c,u="/tmpl/dashboard/dashboard-add-team.tmpl.html",p=function(a,r){var p=t.$new();p.data={name:"",emails:""},p.willUsePlan=r,p.createTeam=function(t){s.t("Create Team",{name:p.data.name,emails:p.data.emails}),p.creatingTeam=!0,l.create(p.data.name,p.data.emails).then(function(t){p.creatingTeam=!1,console.log("Created team",t),e.go("dashboard.team",{id:t.data.id,slug:t.data.slug}),a.resolve(!0),c.hideModal()},function(e){p.creatingTeam=!1,a.reject(e)}),t.preventDefault()};i.get(u).then(function(e){var t=n(e.data)(p);d=t,o[0].body.appendChild(t[0]),$(d).on("hidden.bs.modal",function(e){console.log("Hidden modal"),p.$destroy(),$(d).remove(),d=null,a.resolve(!1)}),c.showModal()},function(e){})};return c={addTeam:function(e){var t=a.defer();return s.t("Add Team Modal",{}),p(t,e),t.promise},showModal:function(){d&&$(d).modal("show")},hideModal:function(){d&&$(d).modal("hide")}}}]),a.factory("TeamInvite",["$state","$rootScope","$compile","$http","$document","Config","Team","Stats",function(e,t,n,i,o,a,r,l){var s,d,c="/tmpl/dashboard/dashboard-team-invite.tmpl.html",u=function(e,a){var r=t.$new();r.team=e,r.data={name:"",emails:""},r.finish=function(){l.t("Team Invite Modal Finish",{}),a&&a()};i.get(c).then(function(e){var t=n(e.data)(r);s=t,o[0].body.appendChild(t[0]),$(s).on("hidden.bs.modal",function(e){console.log("Hidden modal"),$(s).remove(),s=null,r.finish()}),d.showModal()},function(e){})};return d={open:function(e,t){l.t("Team Invite Modal Show",{}),u(e,t)},showModal:function(){s&&$(s).modal("show")},hideModal:function(){s&&$(s).modal("hide")}}}]),a.factory("Themes",["$http","$q","Stats","Config",function(e,t,n,i){return{updateCSS:function(t,n,o,a){return e.post(i.get("creator_api_url")+"/updatecss",{app_id:t,custom_scss_variables:n,custom_scss_text:o,extra_css:a})},getCompiledCSS:function(t,n){return e.get(i.get("creator_api_url")+"/getcss?app_id="+t+"&v="+n)},getCSSURL:function(e,t){return i.get("creator_api_url")+"/getcss?app_id="+e+"&v="+t}}}]).factory("ThemesModal",["$timeout","$state","$rootScope","$http","$compile","$document","$q","Config","Plans","Stats","ComponentFactory","DocumentRenderer","Designer","Themes",function(e,t,n,i,o,a,r,l,s,d,c,u,p,g){var h,m,f="/tmpl/dashboard/dashboard-themes.tmpl.html",v=function(t){var r=n.$new();r.Designer=p,r.property={fullwidth:!1},r.propertyValueChanged=function(e,t){r[e]=t};i.get(f).then(function(i){function l(){ret=[];for(var e in u)ret.push(u[e].scss);return ret}function s(e){for(var t in u){var n=u[t];if(n.scss==e)return n.value}return""}var d=o(i.data)(r);h=d,a[0].body.appendChild(d[0]);var c;ace.require("ace/ext/language_tools"),c=ace.edit(d[0].querySelector(".editor")),c.setTheme("ace/theme/monokai"),c.getSession().setMode("ace/mode/scss"),c.getSession().setUseWrapMode(!0),c.setShowPrintMargin(!1),c.setValue(p.Themes.settings.custom_scss_text,-1),c.moveCursorToPosition(p.Themes.settings.scssCursorPosition||{row:0,column:0}),e(function(){console.log("scrolling to",p.Themes.settings.scssCursorPosition&&p.Themes.settings.scssCursorPosition.row||0),c.scrollToLine(p.Themes.settings.scssCursorPosition&&p.Themes.settings.scssCursorPosition.row||0,!0,!0,function(){}),c.focus()},1e3),r.activeStyleTab="header",r.section=p.Themes.settings.section||"theme",r.cssLoading=!1,r.saveButtonMessage="",r.showSaveButtonMessage=!1,r.saveButtonMessageIcon="",r.saveButtonMessageColor="";var u=[{label:"Light",value:"#ffffff",scss:"$light"},{label:"Stable",value:"#f8f8f8",scss:"$stable"},{label:"Positive",value:"#387ef5",scss:"$positive"},{label:"Calm",value:"#11c1f3",scss:"$calm"},{label:"Balanced",value:"#33cd5f",scss:"$balanced"},{label:"Energized",value:"#ffc900",scss:"$energized"},{label:"Assertive",value:"#ef473a",scss:"$assertive"},{label:"Royal",value:"#886aea",scss:"$royal"},{label:"Dark",value:"#444444",scss:"$dark"}];r.colors=angular.copy(u),r.headerBackgroundTheme=p.Themes.settings.headerBackgroundTheme,r.backButtonShowTitle=p.getById("nav1").get("showBackTitle",!1),r.sideMenuHeaderBackgroundTheme=p.Themes.settings.sideMenuHeaderBackgroundTheme,r.linkTheme=p.Themes.settings.linkTheme,r.pageBackgroundColor=p.Themes.settings.pageBackgroundColor,r.textColor=p.Themes.settings.textColor,r.iosFont=p.Themes.settings.iosFont,r.androidFont=p.Themes.settings.androidFont,r.$watch("backButtonShowTitle",function(e){p.getById("nav1").set("showBackTitle",r.backButtonShowTitle),p.save()});for(var f=0;f<r.colors.length;f++){var v=r.colors[f].scss;v in p.Themes.settings.custom_scss_variables&&(r.colors[f].value=p.Themes.settings.custom_scss_variables[v])}r.conflicts=p.Themes.variableConflicts(l()),r.showingTooltip={},r.setShowTooltip=function(t,n,i){e(function(){r.showingTooltip[n]=i;
},t)},r.saveSCSSText=function(){r.cssLoading=!0,r.saveButtonMessage="",r.showSaveButtonMessage=!1,r.saveButtonMessageIcon="",r.saveButtonMessageColor="";var i=c.getCursorPosition();p.Themes.updateCursorPosition(i),p.Themes.rememberSection(r.section);for(var o=0;o<r.colors.length;o++)if(""==r.colors[o].value){r.colors[o].value=u[o].value.toUpperCase(),p.Themes.updateSCSSVariable(r.colors[o].scss,null);var a=angular.element($("#"+r.colors[o].label+"-color-picker-ele").find("input")).scope();a.update()}else r.colors[o].value.trim().toLowerCase()!==u[o].value.trim().toLowerCase()?p.Themes.updateSCSSVariable(r.colors[o].scss,r.colors[o].value):p.Themes.updateSCSSVariable(r.colors[o].scss,null);if("positive"!=r.linkTheme?p.Themes.updateSCSSVariable("$link-color","$"+r.linkTheme):p.Themes.updateSCSSVariable("$link-color",null),""==r.pageBackgroundColor&&(r.pageBackgroundColor="#FFFFFF",angular.element($("#theme-page-bg-color").find("input")).scope().update()),""==r.textColor&&(r.textColor="#333333",angular.element($("#theme-text-color").find("input")).scope().update()),r.customscsstext=c.getValue(),p.Themes.updateSCSSText(r.customscsstext),p.Themes.updateSetting("headerBackgroundTheme",r.headerBackgroundTheme),p.Themes.updateSetting("sideMenuHeaderBackgroundTheme",r.sideMenuHeaderBackgroundTheme),p.Themes.updateSetting("linkTheme",r.linkTheme),p.Themes.updateSetting("pageBackgroundColor",r.pageBackgroundColor),p.Themes.updateSetting("textColor",r.textColor),p.Themes.updateSetting("iosFont",r.iosFont),p.Themes.updateSetting("androidFont",r.androidFont),n.$emit("colorswatch.update"),n.$emit("component.redraw"),r.conflicts=p.Themes.variableConflicts(l()),p.Themes.settings.custom_scss_variables["$link-color"]){var d=p.Themes.settings.custom_scss_variables["$link-color"];d in p.Themes.settings.custom_scss_variables||p.Themes.updateSCSSVariable(d,s(d))}n.isSavingCSS=!0,g.updateCSS(t,p.Themes.settings.custom_scss_variables,p.Themes.settings.custom_scss_text,p.Themes.extraCSS()).then(function(t){r.saveButtonMessage="Theme Saved Successfully",r.saveButtonMessageIcon="ion-android-checkmark-circle",r.saveButtonMessageColor="#36be5b",r.showSaveButtonMessage=!0,p.Themes.updateSetting("validCompiledCSS",!0),e(function(){r.showSaveButtonMessage=!1},2500),r.cssLoading=!1,n.isSavingCSS=!1,n.$emit("newcss")},function(e){r.saveButtonMessage="Error Saving Theme",r.saveButtonMessageIcon="ion-alert",r.saveButtonMessageColor="#C00000",r.showSaveButtonMessage=!0,r.cssLoading=!1,n.isSavingCSS=!1,n.$emit("newcss"),console.log(e)})},r.cancel=function(){m.hideModal()},$(h).on("hidden.bs.modal",function(e){console.log("Hidden modal"),r.$destroy(),c&&c.destroy(),$(h).remove(),h=null}),m.showModal()},function(e){})};return m={show:function(e){d.t("Themes Modal Show",{}),v(e)},showModal:function(){h&&$(h).modal("show")},hideModal:function(){h&&$(h).modal("hide")}}}]),a.directive("appStatus",["$rootScope","$interval","Designer",function(e,t,n){return{restrict:"E",templateUrl:"designer/app-status.tmpl.html",scope:{},link:function(e,i,o){t(function(){e.currentTime=new Date},1e3);e.designer=n}}}]),a.directive("selectOnInit",["$timeout",function(e){return function(t,n,i){var o=e(function(){n[0].select(),n[0].focus()},1);t.$on("$destroy",function(){e.cancel(o)})}}]).directive("codeEditor",["$rootScope","Designer","$document","$timeout","JavaScriptSettingsModal","$interval","ThemesModal","Integrations",function(e,t,n,i,o,a,r,l){return{restrict:"E",templateUrl:"designer/code-editor.tmpl.html",scope:{},link:function(s,d,c){function u(e,t,n){var i;return function(){var o=this,a=arguments,r=function(){i=null,n||e.apply(o,a)},l=n&&!i;clearTimeout(i),i=setTimeout(r,t),l&&e.apply(o,a)}}function p(e){var n=t.Coding.settings.files.find(function(t){return t.id==e})||t.Coding.initController(e);"undefined"==typeof n.unsavedContents&&(n.unsavedContents=n.contents),C.setValue(n.unsavedContents,-1),"htmlPage"==n.type?S.setMode("ace/mode/html"):S.setMode("ace/mode/javascript")}function g(e,n){p(e),0!=n&&(C.moveCursorToPosition(t.Coding.settings.cursorPosition[e]||{row:0,column:0}),s.cancelTimeouts.push(i(function(){C.scrollToLine(t.Coding.settings.cursorPosition[e]&&t.Coding.settings.cursorPosition[e].row||0,!0,!0,function(){}),C.focus()},1)),S.setUndoManager(new ace.UndoManager))}function h(e){_=[],e.forEach(function(e){E[e]=d[0].querySelectorAll(e);for(var t=0;t<E[e].length;t+=1)_.push([e,t,E[e][t].style.cursor]),E[e][t].style.cursor="ns-resize"})}function m(){_.forEach(function(e){E[e[0]][e[1]].style.cursor=e[2]})}function f(e){e.pageY+s.offset>48&&$(window).height()-(e.pageY+s.offset)>31?(s.lastY=e.pageY+s.offset,T.style.top=e.pageY+s.offset+"px"):e.pageY+s.offset<=48?(s.lastY=49,T.style.top="49px"):$(window).height()-(e.pageY+s.offset)<=31&&(s.lastY=$(window).height()-32,T.style.top=$(window).height()-32+"px")}function v(){n.unbind("mousemove",f),n.unbind("mouseup",v),m();var e=$(window).height()-s.lastY;e>=32&&(t.Coding.setDragHeight(e),document.getElementById("code-editor").style.height=e+"px",d[0].querySelector(".editor").style.height=t.Coding.settings.dragHeight-29+"px",C.resize(),d[0].querySelector(".left-code-pane").style["min-height"]=t.Coding.settings.dragHeight-29+"px",d[0].querySelector(".pane-wrapper").style.height=t.Coding.settings.dragHeight-29+"px"),s.cancelTimeouts.push(i(function(){$(".nano").nanoScroller()},1)),T.style.display="none",k.style.display="none",Date.now()-I<200&&s.closeEditor()}s.designer=t,s.doThemes=function(){r.show(t.getProject().app_id)},s.showIntegrationsModal=function(){l.showModal()};var y=[];s.cancelTimeouts=[],s.$watchCollection("cancelTimeouts",function(e){var t=s.cancelTimeouts[e.length-1];t.then(function(){i.cancel(t)})}),t.Coding._setDefaultsIfNotExists();var w=t.getPages().map(function(e){return e.getId()});t.Coding.settings.files.forEach(function(e){"htmlPage"!=e.type&&"controller"!=e.type||-1!=w.indexOf(e.id.replace("-HTML",""))||t.Coding.removeFile(e.id)}),t.Coding.settings.scriptURLs=t.Coding.settings.scriptURLs.filter(function(e,t,n){return n.indexOf(e)==t}),t.Coding.settings.dragHeight<32&&t.Coding.setDragHeight(300),s.saving={single:!1,all:!1},y.push(e.$on("cmd-s",function(){s.saveAndAnimate("single",s.currentlyEditing)})),y.push(e.$on("document.doneSaving",function(){s.saving={single:!1,all:!1}})),y.push(e.$on("document.saveError",function(){s.saving={single:!1,all:!1}})),t.Coding.settings.dragHeight>=$(window).height()-48&&t.Coding.setDragHeight($(window).height()-49),d[0].querySelector(".editor").style.height=t.Coding.settings.dragHeight-29+"px",d[0].querySelector(".left-code-pane").style["min-height"]=t.Coding.settings.dragHeight-29+"px",d[0].querySelector(".pane-wrapper").style.height=t.Coding.settings.dragHeight-29+"px",s.cancelTimeouts.push(i(function(){$(".nano").nanoScroller()},1)),s.showSettingsModal=function(e){o.show(e)},s.isSelected=function(e){return s.currentlyEditing==e},s.setSelected=function(e,n){null!==s.currentlyEditing&&(s.saveCursorPosition(s.currentlyEditing),s.saveContents(s.currentlyEditing,!1,!0)),s.currentlyEditing=e,t.Coding.updateSetting("currentlyEditing",e),g(e,n)};var b=u(function(){t.Coding._save()},250);ace.require("ace/ext/language_tools");var C=ace.edit(d[0].querySelector(".editor"));C.renderer.setScrollMargin(10,10);var S=C.getSession(),D=0;document.querySelector("div.editor").onclick=function(){D=(new Date).getTime()},C.on("change",function(){s.saveContents&&s.saveContents(s.currentlyEditing,!1,!1),b()}),s.saveAndAnimate=function(e,n){s.saving[e]=!0,t.Coding.settings.hasBeenSaved=!0,"single"==e&&s.saveContents(n,!0,!1),"all"==e&&s.saveAllContents()},s.editingTitle=null,s.currentlyEditing=null,s.docPages=t.getPages().map(function(e){return{title:e.get("title"),id:e.getId(),type:"controller","abstract":e.get("abstract")&&!e.get("sidemenu",!1)}}),s.docHTMLPages=t.getPages().filter(function(e){return 1==e.get("htmlBased")}).map(function(e){return{title:e.get("title"),id:e.getId()+"-HTML",type:"htmlPage"}}),s.files=t.Coding.settings.files.map(function(e){return{title:e.filename,id:e.id,type:e.type}}),s.savedStatus={};var x=a(function(){t.Coding.settings.files.forEach(function(e){s.savedStatus[e.id]=e.contents==e.unsavedContents})},500);y.push(e.$on("page.newTitle",function(){s.cancelTimeouts.push(i(function(){s.docPages.forEach(function(e){var n=t.getPages().find(function(t){return t.getId()==e.id});e.title=n.get("title")}),s.docHTMLPages.forEach(function(e){var n=t.getPages().find(function(t){return t.getId()+"-HTML"==e.id});e.title=n.get("title")})},1))})),y.push(e.$on("editor.reloadContents",function(e,t){g(t.pageId,!1)})),s.setSelected(t.Coding.settings.currentlyEditing||s.docPages[0].id),i(function(){document.getElementById("coding-"+t.Coding.settings.currentlyEditing||s.docPages[0].id).scrollIntoView()},1),y.push(e.$on("setselected",function(e,n){s.setSelected(t.Coding.settings.currentlyEditing||s.docPages[0].id),i(function(){document.getElementById("coding-"+t.Coding.settings.currentlyEditing||s.docPages[0].id).scrollIntoView()},1)})),y.push(e.$on("removepage",function(e,t){var n=s.docPages.findIndex(function(e){return e.id==t.id});n>=0&&s.docPages.splice(n,1),s.currentlyEditing==t.id&&s.setSelected(s.docPages[Math.max(0,n-1)].id);var n=s.docHTMLPages.findIndex(function(e){return e.id==t.id+"-HTML"});n>=0&&s.docHTMLPages.splice(n,1),s.currentlyEditing==t.id&&s.setSelected(s.docPages[0].id),s.cancelTimeouts.push(i(function(){$(".nano").nanoScroller()},1))})),y.push(e.$on("addpage",function(e,t){if(s.docPages.push({title:t.title,id:t.id,type:"controller","abstract":!1}),t.htmlBased){var n=s.docHTMLPages.filter(function(e){return e.id==t.id+"-HTML"}).length>0;!n&&s.docHTMLPages.push({title:t.title,id:t.id+"-HTML",type:"htmlPage"})}t.htmlBased?s.setSelected(t.id+"-HTML",!0):s.setSelected(t.id,!0),s.cancelTimeouts.push(i(function(){$(".nano").nanoScroller()},1))})),y.push(e.$on("pageconvert",function(e,t){s.docHTMLPages.push({title:t.title,id:t.id+"-HTML",type:"htmlPage"}),s.cancelTimeouts.push(i(function(){$(".nano").nanoScroller()},1))})),s.newJS=function(e){e.stopPropagation();for(var n=0,o=0;n>=0;){var a="untitled"+(o||"")+".js";n=t.Coding.settings.files.findIndex(function(e){return e.filename==a}),o+=1}n=t.Coding.initGenericJS(a),s.files.push({title:a,id:n.id,type:"js"}),s.setSelected(n.id,!1),s.editItem(n.id,a,!0),s.cancelTimeouts.push(i(function(){$(".nano").nanoScroller()},1))},s.newSCSS=function(){for(var e=0,n=0;e>=0;){var i="untitled"+(n||"")+".scss";e=t.Coding.settings.files.findIndex(function(e){return e.filename==i}),n+=1}e=t.Coding.initSCSS(i),s.files.push({title:i,id:e.id,type:"scss"}),s.setSelected(e.id,!1),s.editItem(e.id,i,!0)},s.editItem=function(e,t,n){"undefined"==typeof n&&(n=!1);var i=s.files.findIndex(function(t){return t.id==e});s.editingTitle={newText:String(t),ref:s.files[i],firstEdit:n}},s.deleteItem=function(e){var n=s.files.findIndex(function(t){return t.id==e});if(s.files.splice(n,1),t.Coding.removeFile(e),s.currentlyEditing==e){var o=s.files.filter(function(e){return"js"==e.type||"scss"==e.type}).length;o>0?s.setSelected(s.files[Math.max(0,n-1)].id):s.setSelected(s.docPages[s.docPages.length-1].id)}s.cancelTimeouts.push(i(function(){$(".nano").nanoScroller()},1))},s.saveTitle=function(e,n){if(s.editingTitle){var o=t.Coding.settings.files.findIndex(function(e){return e.filename==s.editingTitle.newText});if(-1==o)s.editingTitle.ref.title=String(s.editingTitle.newText),t.Coding.updateFilename(s.editingTitle.ref.id,s.editingTitle.newText);else if(0==n&&1==s.editingTitle.firstEdit&&s.editingTitle.newText==s.editingTitle.ref.title){var a=s.editingTitle.ref.id;s.cancelTimeouts.push(i(function(){var e=(new Date).getTime();console.log(e,D,e-D),e-D>=100&&s.deleteItem(a)},1))}s.editingTitle=null,1==e&&C.focus()}s.cancelTimeouts.push(i(function(){$(".nano").nanoScroller()},1))},C.setTheme("ace/theme/monokai"),S.setUseWrapMode(!0),C.setShowPrintMargin(!1),s.saveCursorPosition=function(e){var n=C.getCursorPosition();t.Coding.updateCursorPosition(e,n)},s.saveContents=function(e,n,i){t.Coding.updateContents(e,C.getValue(),i),n&&t.Coding.saveFile(e)},s.saveAllContents=function(){var e=!1;s.docPages.forEach(function(n){0==s.savedStatus[n.id]&&(n.id==s.currentlyEditing?s.saveContents(n.id,!0,!1):t.Coding.saveFile(n.id),e=!0)}),s.docHTMLPages.forEach(function(n){0==s.savedStatus[n.id]&&(n.id==s.currentlyEditing?s.saveContents(n.id,!0,!1):t.Coding.saveFile(n.id),e=!0)}),s.files.forEach(function(n){0==s.savedStatus[n.id]&&(n.id==s.currentlyEditing?s.saveContents(n.id,!0,!1):t.Coding.saveFile(n.id),e=!0)}),e||s.cancelTimeouts.push(i(function(){s.saving={single:!1,all:!1}},500))};var P=angular.element(d[0].querySelector(".dragbar")),T=document.getElementById("codeBorder"),k=document.getElementById("coverup"),I=(document.getElementById("code-editor"),null),_=[],E={};P.on("mousedown",function(e){e.preventDefault(),I=Date.now(),n.on("mousemove",f),n.on("mouseup",v),T.style.display="inline",k.style.display="block",h([".editor",".left-code-pane","[class^='ace_']"]),T.style.top=$(window).height()-t.Coding.settings.dragHeight+"px",s.lastY=$(window).height()-t.Coding.settings.dragHeight,s.offset=s.lastY-e.pageY}),s.closeEditor=function(){s.saveCursorPosition(s.currentlyEditing),s.saveContents(s.currentlyEditing,!1,!0),t.Coding.toggle(),s.$destroy()},e.$on("controller.contentschanged",function(e,t){s.currentlyEditing===t.id&&(C.setValue(t.contents),C.moveCursorToPosition({row:0,column:0}))}),e.$on("coding.fileadded",function(e,t){s.files.push({title:t.filename,id:t.id,type:t.type}),s.cancelTimeouts.push(i(function(){$(".nano").nanoScroller()},1))}),s.$on("$destroy",function(){y.forEach(function(e){e()}),a.cancel(x),C.destroy(),angular.element(d[0].querySelector(".editor")).remove(),$(".nano").nanoScroller({destroy:!0}),$(".nano").remove(),d.remove()})}}}]),a.directive("codeQuickBar",["$rootScope","Designer","$timeout","PaywallModal","StandardModal","FeatureFence",function(e,t,n,i,o,a){return{restrict:"E",templateUrl:"designer/code-quick-bar.tmpl.html",scope:{},link:function(e,n,r){e.openEditor=function(){return a.hasAccess("codeEditing",window.Designer.getProject().team_id)?1==t.featureCheck("ionic2")?void o.show({message:"Code editing is not yet supported for Ionic 3.x projects.",title:"No Code Support",height:"200px"}):(t.Coding.toggle(),e.$destroy(),void n.remove()):void i.show("code-editing")}}}}]),a.directive("appComponents",["$rootScope","ComponentTypes","Designer","DragHandler","PaywallModal","Stats","FeatureFence",function(e,t,n,i,o,a,r){return{restrict:"E",scope:{component:"="},templateUrl:"designer/app-components.tmpl.html",link:function(l,s,d){s.on("click","a",function(e){return!1}),s.on("dblclick","a",function(e){return!1}),l.Designer=n,i.setElement(s);var c=t.getSortedInstances();l.proRequired={};var u=[];for(var p in c)for(var g=c[p],h=0;h<g.length;h++)u.push(g[h]),!r.hasAccess("proComponents",n.getProject().team_id)&&g[h].data.obj&&g[h].data.obj.proRequired?l.proRequired[g[h].type]=!0:l.proRequired[g[h].type]=!1;l.componentGroups=c,l.components=u,l.proPaywall=function(e){l.proRequired[e]&&(a.t("Pro Component Click"),o.show("code-editing"))},l.openPage=function(){n.Coding.settings.currentlyEditing=n.getActivePage().getId()+"-HTML",n.Coding.settings.open!==!0?n.Coding.toggle():e.$emit("setselected")}}}}]),a.directive("focusMe",["$timeout","$parse",function(e,t){return{link:function(n,i,o){var a=t(o.focusMe);n.$watch(a,function(t){t===!0&&e(function(){i[0].focus()})})}}}]),a.directive("formErrors",["$rootScope","$compile",function(e,t){return{restrict:"A",scope:{formErrors:"="},link:function(e,t,n){var i,o=t,a=t.find("input"),r=_.debounce(function(e){13!=e.which&&i&&(o.removeClass("has-error"),i.hide())},10);a.on("keyup change",function(e){r(e)}),e.$watch("formErrors",function(e,t){e?(o.addClass("has-error"),i||(i=$('<span class="help-block">'+e[0]+"</span>"),o.children().length>=1?i.insertAfter(o.children()[0]):i.appendTo(o)),i.show()):(i&&i.hide(),o.removeClass("has-error"))})}}}]),a.constant("REDRAW_FREQ",300).directive("appPreview",["DocumentRenderer","Designer","Themes","DropHandler","$timeout","$compile","$rootScope","REDRAW_FREQ","$sce",function(e,t,n,i,o,a,r,l,s){return{restrict:"E",replace:!0,templateUrl:"app-frame.tmpl.html",scope:{doc:"="},link:function(a,d,c){function u(){$(m.document.head).find("link[id=android-default-font]").remove(),$(m.document.head).find("link[id=ios-default-font]").remove(),"default"==t.Themes.settings.androidFont&&$(m.document.head).append("<link id='android-default-font' rel='text/css' href='/css/android-default-font.css'>"),"default"==t.Themes.settings.iosFont&&$(m.document.head).append("<link id='ios-default-font' rel='text/css' href='/css/ios-default-font.css'>"),t.Themes.hasCustomStyles()&&t.Themes.settings.validCompiledCSS?$(m.document.head).find("link[id=ionicstyle]").attr("href",n.getCSSURL(t.getProject().app_id,t.Themes.settings.version)):$(m.document.head).find("link[id=ionicstyle]").attr("href","/lib/ionic/release/css/ionic.css")}function p(n){return h=n,m=v[0].contentWindow,1==t.Device.settings.statusBar&&(m.document.body.className+=" header-hack"),r.$emit("iframe.ready",m),f=new i(m.document),h.element(m.document).injector().invoke(["$compile","$rootScope","$document",function(t,n,i){e.setFrameInjectables(t,n,m.document,h,m)}]),u(),t}a.ionicons="ionicons",window.Designer.featureCheck("ionic2")&&(a.ionicons="ionicons3");var g,h,m,f,v,y=r,w=[];d.on("$destroy",function(){f&&f.destroy(),w.forEach(function(e){e()}),a.$destroy()}),w.push(r.$on("document.propertyChanged",function(e,t,n){"undefined"!=typeof n&&(n.isPlaceholder||(n.canRedrawSingle===!1?P(n):T(n)))})),w.push(r.$on("component.redraw",function(e,t){D()})),w.push(r.$on("component.childAdded",function(e,t,n){n.isPlaceholder||t.isPage||D()})),w.push(r.$on("component.childRemoved",function(e,t,n){n.isPlaceholder||D()})),w.push(r.$on("designer.statusbartoggle",function(e,t){m.document.body.className=m.document.body.className.replace(" header-hack",""),1==t&&(m.document.body.className+=" header-hack")})),a.$watch(function(){return t.getMode()},function(e,t){b(e)}),a.$watch(function(){return t.getActivePage()},function(e,t){e!==g&&(g=e,D())}),a.trustSrc=function(e){return s.trustAsResourceUrl(e)};var b=function(e){"design"===e?f&&f.enable():"preview"===e&&f&&f.disable()};w.push(r.$on("newcss",function(e){u()}));var C=function(e){var n,i,o,a,r=e.querySelectorAll("[data-componentid]");for(console.log("Identifying",r.length,"components"),i=r.length,n=0;i>n;n++){a=r[n];var o=t.getById(a.getAttribute("data-componentid"));if(a.dataset.tapDisabled=!0,o){o.$rendered=a;var l=m.angular.element;o.replaceRendered(a,l),o.onRender(h,t.getDocument(),t)}else"app1"!==a.getAttribute("data-componentid")&&console.error("Couldn't identify component for",a.getAttribute("data-componentid"))}window.Designer.select(window.Designer.selectedComponent)},S=function(n,i){o(function(){var i=e.renderAsNode(t.getDocument(),t.getActivePageId(),n.document,h),o=function(){var o;o=n.document.body,o.innerHTML="",h.element(n.document).injector().invoke(["$compile","$rootScope","$document","$timeout","$ionicViewService","$state",function(n,o,r,l,s,d){d.$current.provided=e.renderChildTree(t.getActivePage()),d.$current.provided&&d.$current.provided.setAttribute("hide-back-button","true");var c=n(i)(o);if(r[0].body.appendChild(c[0]),hideHeader=!1,t.getActivePage()&&t.getActivePage().get("hideHeader",!1))hideHeader=!0;else if(t.getActivePage()&&1==t.getActivePage().get("htmlBased",!1)){var u=t.Coding.getContents(t.getActivePage().id+"-HTML");(u.indexOf('hide-nav-bar="true"')>0||u.indexOf("hide-nav-bar='true'")>0)&&(hideHeader=!0)}hideHeader?r[0].$ionicNavBarDelegate.showBar(!1):r[0].$ionicNavBarDelegate.showBar(!0),setTimeout(function(){a.$apply(function(){if(C(r[0].body),!t.getActivePage()||!t.getActivePage().get("hideHeader",!1)){var e=h.element(r[0].querySelector("ion-view")).controller("ionView");e.beforeEnter(null,{viewId:"ion1",historyId:"root",stateId:"page",stateName:"page",transition:"ios",navBarTransition:"ios",direction:"none",shouldAnimate:!1,transitionId:1,fromCache:!1,enableBack:!1,renderStart:!0,renderEnd:!0})}var n=r.find("ion-content");n.on("scroll",function(e){y.prevScrollPosition=n.scrollTop(),y.$emit("contentScroll")}),n.scrollTop(y.prevScrollPosition||0)})},10)}])};"complete"!==n.document.readyState?h.element(n.document).ready(function(){o()}):o()})},D=_.debounce(function(){return m&&h?void S(m):void setTimeout(function(){D()},50)},5),x=function(t){if(!m||!h)return void D();if(t.canRedrawSingle===!1)return void D();var n=(m.angular.element,e.renderChildTree(t,null,!0)),i=m.document.querySelector('[data-componentid="'+t.getId()+'"]');$(i).replaceWith(n),t.setRendered(n)},P=_.debounce(function(e){x(e)},l),T=_.debounce(function(e){x(e)},1),v=d.find("iframe");v.ready(function(e){function t(){v[0].contentWindow.sendAngular?v[0].contentWindow.sendAngular(function(e){p(e)}):setTimeout(t,100)}t()})}}}]),a.directive("livePreview",["$rootScope","$compile","Designer","Themes","DocumentExporter","StandardModal","$q",function(e,t,n,i,o,a,r){var l=function(i,o){function a(){setTimeout(function(){e.$apply(function(){x[0].setAttribute("style","display:block;"),1==n.Device.settings.statusBar&&(P.contentWindow.document.body.className+=" header-hack"),T.style["margin-top"]="-0px",e.loadingIndicator=!1})},10)}o.empty();var r,l=28;r="android"==n.Device.settings.os&&1==n.Device.settings.statusBar?(n.Device.settings.height+20)*n.Device.settings.scaleVal:n.Device.settings.height*n.Device.settings.scaleVal;var s=n.Device.settings.width*n.Device.settings.scaleVal,d=document.getElementById("live-preview-table").offsetHeight,c=document.getElementById("live-preview-table").offsetWidth-20,u=n.Device._calculateSkinMetrics(n.Device.skinDimensions[n.Device.settings.type]),p=0,g=0,h="none";1==n.Device.settings.skin&&("vertical"==n.Device.settings.orientation?(p=u.widthMultiple*s,g=u.heightMultiple*r,h='url("'+n.Device.skinDimensions[n.Device.settings.type].urlVertical+'")'):"horizontal"==n.Device.settings.orientation&&(p=u.heightMultiple*s,g=u.widthMultiple*r,h='url("'+n.Device.skinDimensions[n.Device.settings.type].urlHorizontal+'")'));var m=0,f=0;Math.max(r,g)<d?(m=parseInt((d-Math.max(r,g))/2)+l/2,f=-9999999):(m=30+l,f=-1*l);var v=u.verticalCenterOffsetPercentage*p/2,y=0;"horizontal"==n.Device.settings.orientation&&(y-=v);var w=c,b=Math.abs(y)+(c-p)/2+"px 0px",C=document.createElement("div");C.style.height=r+"px",C.style.width=w+"px",C.style["margin-top"]=m+"px",C.style["margin-bottom"]=Math.max(0,m+f)+"px",C.style["margin-left"]=y+"px",C.style["background-image"]=h,1==n.Device.settings.skin&&(C.style["background-repeat"]="no-repeat",C.style["background-position"]=b,C.style["background-size"]=p+"px "+(g+"px"),C.style.height=g+"px",C.style["padding-top"]="1px",d>g+55?C.style["margin-top"]=parseInt((d-g)/2)-5+l/2+"px":(C.style["margin-top"]=25+l+"px",C.style["margin-bottom"]="30px"));var S=document.createElement("div");if(S.className="device",S.style["margin-bottom"]="0px",S.style.width=n.Device.settings.width+"px",S.style.height=n.Device.settings.height+"px",S.style.transform="scale("+n.Device.settings.scaleVal+")",S.style["transform-origin"]="center top",1==n.Device.settings.skin){var D,g,u=n.Device._calculateSkinMetrics(n.Device.skinDimensions[n.Device.settings.type]);"vertical"==n.Device.settings.orientation?(p=u.widthMultiple*s,g=u.heightMultiple*r,D=u.pushDownPercentage*g):"horizontal"==n.Device.settings.orientation&&(p=u.heightMultiple*s,g=u.widthMultiple*r,D=u.pushLeftPercentage*g),S.style["margin-top"]=D+"px"}var x=t("<app-status></app-status>")(e),P=document.createElement("iframe");P.setAttribute("style","display:none;"),x[0].setAttribute("style","display:none;"),$(S).append(x),$(S).append(P);var T=document.createElement("div");T.className="scroll-container",T.style["margin-right"]="10px",T.style.height=document.getElementById("designer").offsetHeight+"px",T.style["margin-top"]="-10000px",$(T).append(C),$(C).append(S),o.append(T);var k="ionicons";window.Designer.featureCheck("ionic2")&&(k="ionicons3"),i=i.replace("</body>",'<script> ionic && ionic.Platform && ionic.Platform.setPlatform("'+n.Device.settings.os+'") </script><script> window.iconset = "'+k+'"; </script></body>'),i=i.replace(".config(function($stateProvider, $urlRouterProvider) {",".config(function($ionicConfigProvider) {$ionicConfigProvider.scrolling.jsScrolling(false);}) .config(function($stateProvider, $urlRouterProvider) {"),P.setAttribute("style","display:block;"),P.contentWindow.document.open(),P.contentWindow.document.write(i),P.contentWindow.document.close(),window.logger.disable(),P.onload=a;var I=P.contentDocument||P.contentWindow.document;"complete"==I.readyState&&a()};return{restrict:"E",scope:{},link:function(t,i,o){e.loadingIndicator=!0,r(function(t,n){if(0!=e.previewLock||0!=e.isSaveDebouncing||0!=e.isSavingCSS&&"undefined"!=typeof e.isSavingCSS)if(e.isSavingCSS)var i=e.$on("newcss",function(e,n){i(),t()});else var i=e.$on("previewlock.end",function(e,n){i(),t()});else t()}).then(function(){if(n.featureCheck("!automagic-navigation")){var t=n.getActivePage(),o="";if(1==t.get("abstract")){var r=t.get("pages",{pages:[]});if(!r)return console.error("No pages for abstract"),a.hideModal(),void a.show({message:"In order to preview this page, it must have at least one viable child.<br /><br />For Side Menus that means at least one page must be linked inside the Side Menu.<br /><br />For Tabs that means the first Tab must have at least one Inner Page.",title:"No Preview Available",cancel:"OK",callback:function(e){n.mode="design"}});0==r.pages.length&&(r=t.children[0].children[0].get("pages")),r?o=n.getById(r.pages[0].id).getFullPageUrl():(console.error("No pages for abstract"),a.hideModal(),a.show({message:"In order to preview this page, it must have at least one viable child.<br /><br />For Side Menus that means at least one page must be linked inside the Side Menu.<br /><br />For Tabs that means the first Tab must have at least one Inner Page.",title:"No Preview Available",cancel:"OK",callback:function(e){n.mode="design"}}))}else o=t.getFullPageUrl()}else{var s=n.getActivePage(),o="";if(1==s.get("abstract",!1)){var d=s.get("previewPage","");if(""==d)return console.error("No pages for abstract"),a.hideModal(),void a.show({message:"In order to preview this page, it must have at least one viable child. For Side Menus that means at least one page must be linked inside the Side Menu. For Tabs that means at least one Tab must have its Default Page set.",title:"No Preview Available",cancel:"OK",callback:function(e){n.mode="design"}});s=n.getById(d)}if(""==s.get("parentState","")||s.get("disableParenting",!1))o=s.get("url");else{o=n.getById(s.get("parentState")).get("url");var c=s.get("routeViews","");if(""==c)o+=s.get("url");else{var u="";if(c.length>1)for(var p=0;p<c.length;p++)0==p&&(u="/"+c[0]),n.getById(c[p]).get("defaultPage")==s.id&&(u="/"+c[p]);o=o+u+s.get("url")}}}var g=n.getProject(),h=JSON.parse(g.html).singleHTML;h=h.replace(/\$urlRouterProvider.otherwise\('(.*)'\)/g,"$urlRouterProvider.otherwise('"+o+"')"),l(h,i),i.on("$destroy",function(){e.loadingIndicator=!1,window.logger.enable()})})}}}]),a.directive("appOutline",["$rootScope","$compile","DocumentIterator","Designer","PageTemplates","$timeout","StandardModal","Features",function(e,t,n,i,o,a,r,l){return{restrict:"E",scope:{app:"="},templateUrl:"designer/app-outline.tmpl.html",link:function(o,a,s){var d=a[0].querySelector(".content"),c=_.debounce(function(e){if("undefined"!=typeof e){var t,n=d.querySelector('[data-componentid="'+e.getId()+'"]');n&&(t=n.querySelector(".t"),t&&(t.innerHTML=e.getTitle()))}},100),u=_.debounce(function(){var e=Date.now();console.log("APP OUTLINE",e);var a,r,s,c=document.createElement("ul");c.className="scroll-inner";var u=0;s=c,n.traverse(i.getDocument().getPageContainer(),function(e,t,n){if(a=document.createElement("li"),a.setAttribute("data-componentid",e.getId()),liInnerHTML='<a style="padding-left: '+16*n+'px" ng-click="select($event, \''+e.getId()+'\')"><div class="page-icon page-icon-'+(e.get("outlineIcon")||e.type)+'"></div> <span class="t">'+e.getTitle()+"</span>",e.info||e.get("info")){var s=e.info||e.get("info");"undefined"==typeof s.list&&(liInnerHTML=liInnerHTML+"<span ng-click=\"setStartingPage($event, '"+e.getId()+'\');" class="selected-icon info" data-toggle="tooltip" data-placement="bottom" title="" data-delay="400" data-original-title="'+s+'" data-nocontainer="body"></span>')}if("page"==e.type){var p=!0;l.check("ionic2")?e.get("sidemenu",!1)&&(p=!1):e.get("abstract",!1)&&(p=!1),p&&(i.getExtra("startingPage","")==e.getId()?liInnerHTML=liInnerHTML+"<span ng-click=\"setStartingPage($event, '"+e.getId()+'\');" class="selected-icon pin on" data-toggle="tooltip" data-placement="bottom" title="" data-delay="400" data-original-title="This page is the default page of your app." data-nocontainer="body"></span>':liInnerHTML=liInnerHTML+"<span ng-click=\"setStartingPage($event, '"+e.getId()+'\');" class="selected-icon pin" data-toggle="tooltip" data-placement="bottom" title="" data-delay="400" data-original-title="Pin this page as the default page in your app." data-nocontainer="body"></span>')}if(e.get("abstract")||e.canDelete===!1||(liInnerHTML=liInnerHTML+'<span class="selected-icon duplicate" ng-click="clone($event, \''+e.getId()+'\');" data-toggle="tooltip" data-placement="bottom" title="" data-delay="400" data-original-title="Duplicate" data-nocontainer="body"></span>'),e.canDelete===!1||e.get("abstract")&&0!=l.check("automagic-navigation")||(liInnerHTML=liInnerHTML+'<span class="selected-icon trash" ng-click="delete($event, \''+e.getId()+'\');" data-toggle="tooltip" data-placement="bottom" title="" data-delay="400" data-original-title="Delete" data-nocontainer="body"></span>'),liInnerHTML+="</a>",a.innerHTML=liInnerHTML,e.isPage&&o.activePage&&e.getId()==o.activePage.getId()&&a.classList.add("expanded"),e==i.getSelectedComponent()){var g=d.querySelector(".selected");g&&g.classList.remove("selected"),a.classList.add("selected")}if(console.log(n+" "+new Array(n).join(" "),e.getId()),e.children.length&&$(a).children().first().prepend('<span class="caret"></span>'),n>u)r=document.createElement("ul"),c.appendChild(r),c=r,u=n;else if(u>n){for(;u-->n;){if(!c.parentNode){r=document.createElement("ul"),c.appendChild(r),c=r;break}c=c.parentNode}u=n}c.appendChild(a)});var p=t(s)(o);$(d).empty().append(p),console.log("APP OUTLINE END",Date.now()-e)},1),p=[];p.push(e.$on("outline.refresh",function(){u()})),p.push(e.$on("component.childAdded",function(){u()})),p.push(e.$on("component.childRemoved",function(){u()})),p.push(e.$on("document.propertyChanged",function(e,t,n){c(n)})),p.push(e.$on("designer.selected",function(e,t){c(t);var n=d.querySelector('[data-componentid="'+t.getId()+'"]'),i=d.querySelector(".selected");if(i&&i.classList.remove("selected"),n){n.classList.add("selected"),h();for(var o=n;o&&o.classList.contains("ng-scope")===!1;)"ul"===o.nodeName.toLowerCase()?(o=o.previousSibling,o&&o.classList.add("expanded")):"li"===o.nodeName.toLowerCase()&&o.nextSibling&&"ul"===o.nextSibling.nodeName.toLowerCase()&&o.classList.add("expanded"),o&&(o=o.parentNode);m(n)}}));var g=function(e,t){var n=d.querySelector('[data-componentid="'+e+'"]');n&&n.classList.add("expanded"),t&&(n=d.querySelector('[data-componentid="'+t+'"]'),n&&n.classList.remove("expanded"))};o.selectPage=function(e){console.log("Selecing page",e),e&&i.setActivePageId(e.getId(),!0)},o.$watch(function(){return i.getActivePage()},function(e,t){e&&(o.activePage=e,o.activePageName=e.get("title"),g(e.getId(),t&&t.getId()||null))}),o.$watch(function(){return i.getPages()},function(e,t){o.pages=e});var h=function(){for(var e=d.querySelectorAll(".expanded"),t=0;t<e.length;t++)e[t].classList.remove("expanded")},m=function(e){};o.setStartingPage=function(e,t){var n=a[0].querySelectorAll(".selected-icon.on");
n.length>0&&$(n[0]).removeClass("on");var o=$(e.target).closest(".selected-icon");o.addClass("on"),o[0].setAttribute("data-original-title","This page is the default page of your app."),i.setExtra("startingPage",t),i.AppGraph._save()},o.clone=function(e,t){var n=i.getById(t),o=n.clone();n.getParent().insertChild(o,n.getIndex()+1),i.AppGraph._save(),o.isPage&&i.setActivePageId(o.getId(),!0),i.selectById(o.getId()),e.stopPropagation()},o["delete"]=function(e,t){i.getById(t).isPage?(r.hideModal(),r.show({message:"Are you sure you want to delete this page?",title:"Delete Page",cancel:"Cancel",warning:"Delete Page",height:"240px",callback:function(e){"warning"===e&&i.removeSelectedComponent(!0)}})):i.removeSelectedComponent(!0),e.stopPropagation()},o.select=function(e,t){var n,r=i.getById(t);if(r){r.isPage&&o.selectPage(r),i.selectById(t);for(var l=Array.prototype.slice.call(a[0].querySelectorAll(".selected")),s=0;s<l.length;s++)$(l[s]).removeClass("selected");n=$(e.target).closest("li"),n.addClass("selected")}},u(),a.on("$destroy",function(){p.forEach(function(e){e()}),o.$destroy()})}}}]),a.directive("pageTemplates",["$rootScope","$compile","DocumentIterator","Designer","PageTemplates","PaywallModal","FeatureFence",function(e,t,n,i,o,a,r){return{restrict:"E",scope:{app:"="},templateUrl:"designer/page-templates.tmpl.html",link:function(e,t,n){e.templates=o.all(),e.pro=r.hasAccess("codeEditing",window.Designer.getProject().team_id),e.add=function(t){return console.log("Adding type",t.id),t.pro&&!e.pro?void a.show("code-editing"):void i.addNewTemplatedPage(t.id)}}}}]),a.directive("componentProperties",["$rootScope","$timeout","PropertyRenderer","Designer","StandardModal",function(e,t,n,i,o){return{restrict:"E",scope:{component:"="},templateUrl:"designer/component-properties.tmpl.html",link:function(a,r,l){a.designer=i;var s,d,c=r[0].querySelector("#properties-form");r.on("click",".category-toggle",function(e){$(this).closest(".category").toggleClass("expanded")}),e.$on("designer.deselected",function(e){$(c).empty()}),a.deleteComponent=function(){o.hideModal(),o.show({message:"Are you sure you want to delete this page?",title:"Delete Page",cancel:"Cancel",warning:"Delete Page",height:"240px",callback:function(e){"warning"===e&&i.removeSelectedComponent(!0)}})},a.selectComponent=function(e){i.select(e)};var u=function(e,o,r){t(function(){if(o&&(o!=d||r)){a.typeName=window.componentTypes[o.type].data.name,o.parent?(a.typeNameParent=window.componentTypes[o.parent.type].data.name,"Nav"==a.typeNameParent&&(a.typeNameParent=""),o.parent.parent&&(a.typeNameParentParent=window.componentTypes[o.parent.parent.type].data.name,("Nav"==a.typeNameParentParent||"App"==a.typeNameParentParent)&&(a.typeNameParentParent=""),o.parent.parent.parent&&(a.typeNameParentParentParent=window.componentTypes[o.parent.parent.parent.type].data.name,("Nav"==a.typeNameParentParentParent||"App"==a.typeNameParentParentParent)&&(a.typeNameParentParentParent="")))):a.typeNameParent=!1,a.newProps=!1,1==o.get("newProps",!1)&&(a.newProps=!0),d=o;var e=n.render(o,a);s&&s(),o.isPage&&(i.featureCheck("!automagic-navigation")||0==o.get("abstract",!1))?a.showDeleteButton=!0:a.showDeleteButton=!1,$(c).html(e)}})};e.$on("designer.refresh-properties",function(e,t){u(e,t,!0)}),e.$on("designer.selected",function(e,t){u(e,t)})}}}]),a.directive("toggle",["$rootScope",function(e){return{restrict:"E",template:'<span class="left-text" ng-bind="leftText"></span><div class="track"><div class="handle"></div></div><span class="right-text" ng-bind="rightText"></span>',require:"?ngModel",scope:{onValue:"@",offValue:"@",leftText:"@",rightText:"@"},link:function(e,t,n,i){t.on("click",function(n){t.addClass("animate"),e.onValue?i.$viewValue===e.onValue?(t.removeClass("active"),i.$setViewValue(e.offValue)):(t.addClass("active"),i.$setViewValue(e.onValue)):i.$viewValue===!0?(t.removeClass("active"),i.$setViewValue(!1)):(t.addClass("active"),i.$setViewValue(!0)),e.$apply()}),i.$render=function(){e.onValue?i.$viewValue===e.onValue?t.addClass("active"):t.removeClass("active"):i.$viewValue===!0?t.addClass("active"):t.removeClass("active")}}}}]),a.factory("Coupon",["Config","$resource",function(e,t){var n=e.get("creator_api_url");return t(n+"/stripe/coupon/:couponId",{couponId:"@coupon_id"},{check:{method:"GET"}})}]),a.factory("Invoice",["Config","$q","$http","Stats",function(e,t,n,i){var o=e.get("creator_api_url");return{get:function(e){var i=t.defer();return n.get(o+"/invoice/"+e).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise},all:function(){var e=t.defer();return n.get(o+"/user/invoices").then(function(t){e.resolve(t.data)},function(t){e.reject(t)}),e.promise}}}]),a.factory("Project",["Config","$resource",function(e,t){var n=e.get("creator_api_url");return t(n+"/creator/:appId",{appId:"@app_id"},{all:{method:"GET",url:n+"/creatorapps",isArray:!0},clone:{method:"POST",url:n+"/creator/:appId/clone",params:{appId:"@app_id"}},move:{method:"POST",url:n+"/creator/:appId/move/:teamId",params:{appId:"@app_id"}},del:{method:"DELETE"}})}]),a.factory("SecurityProfile",["Config","$resource",function(e,t){var n=e.get("creator_api_url");return t(n+"/creator/:appId/security/profiles",{appId:"@app_id"},{all:{method:"GET",isArray:!0},create:{method:"POST"}})}]).factory("SecurityCredential",["Config","$resource",function(e,t){var n=e.get("creator_api_url");return t(n+"/creator/:appId/security/profiles/:profileTag/credentials",{appId:"@app_id"},{create:{method:"POST",transformRequest:l,headers:{"Content-Type":void 0}}})}]);var l=function(e){if(void 0===e)return e;var t=new FormData;return angular.forEach(e,function(e,n){e instanceof FileList?1==e.length?t.append(n,e[0]):angular.forEach(e,function(e,i){t.append(n+"_"+i,e)}):t.append(n,e)}),t};a.factory("Team",["Config","$q","$http","Stats",function(e,t,n,i){var o=e.get("creator_api_url");return{create:function(e,t){return t=t.replace(/(?:\r\n|\r|\n)/g,",").replace(/\s/g,""),i.t("Team Created",{num_emails:t.split(",").length}),n.post(o+"/teams",{name:e,emails:t})},removeMember:function(e,i,a){var r=t.defer();return n.post(o+"/team/"+e.id+"/uninvite",{id:i,is_invitee:a}).then(function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise},invite:function(e,i){var a=t.defer();return n.post(o+"/team/"+e.id+"/invite",{emails:i}).then(function(e){a.resolve(e.data)},function(e){a.reject(e)}),a.promise},get:function(e){var i=t.defer();return n.get(o+"/team/"+e).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise},all:function(){var e=t.defer();return n.get(o+"/teams").then(function(t){e.resolve(t.data.teams)},function(t){e.reject(t)}),e.promise}}}]),a.factory("User",["$state","$rootScope","$http","$q","Config","Stats","$timeout","ABTesting",function(e,t,n,i,o,a,r,l){function s(e){a.id(e.id),a.register({$first_name:e.name,$email:e.email,$created:e.date_joined})}var d=o.get("creator_api_url"),c=o.get("api_url");return{isKnown:function(){return t.user},getGravatar:function(){return t.user?"https://www.gravatar.com/avatar/"+md5(t.user.email)+"?s=64&d=identicon":""},getFirstName:function(){if(!t.user)return"";var e=t.user.name.split(/\s+/);return e[0]},signup:function(e){var t=i.defer();return n({method:"POST",url:d+"/signup",headers:{"Content-Type":"application/json"},data:e}).then(function(e){s(e.data),r(function(){t.resolve(e.data)},100)},function(e){return t.reject(e)}),t.promise},login:function(e){var o=i.defer();return n({method:"POST",url:d+"/login",headers:{"Content-Type":"application/json"},data:e}).then(function(e){console.log(e),s(e.data),a.t("Login",{user:e.data,source:e.data.source},!1,["bigquery"]),t.user=e.data.user,t.proToken=e.data.token,r(function(){o.resolve(e.data.user)},100)},function(e){return o.reject(e)}),o.promise},logout:function(){a.t("Logout",{user:t.user}),e.go("logout")},get:function(){var e=i.defer();return t.user?e.resolve(t.user):n({method:"GET",url:d+"/user",headers:{"Content-Type":"application/json"}}).then(function(n){console.log("success reg",n),t.user=n.data,e.resolve(n.data)},function(n){t.user=null,e.reject(n),t.$emit("auth.loggedOut",n)}),e.resolve(),e.promise},getCreatorUser:function(e){var o=i.defer();return"undefined"==typeof e&&(e=!1),t.creatorUser&&!e?(s(t.creatorUser),o.resolve(t.creatorUser)):n.get(d+"/user").then(function(e){t.creatorUser=e.data,l.get("welcome_emails",[!0,!1]),s(t.creatorUser),o.resolve(e.data)},function(e){t.creatorUser=null,o.reject(e)}),o.promise},getOrRedirectTo:function(t){var n=e.current;console.log(e),this.get().then(function(t){console.log("Has user, old current state was",n),e.transitionTo(e.current,e.$current.params,{reload:!0,inherit:!0,notify:!0})},function(t){e.go("login",{loggedOut:!0})})},update:function(e){t.user&&angular.extend(t.user,e)},save:function(e,o){var a=i.defer();if(t.user){var r=angular.extend(angular.copy(t.user),e);return o&&(r.simpleFields=!0),n.post(c+"/user",r).then(function(e){t.user=e.data,a.resolve(e.data)},function(e){a.reject(e),console.error("Cant update user",e,e.data)}),a.promise}}}}]),SelectProperty=function(e,t){return["Designer","$timeout",function(n,i){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><select class="form-control-borderless" ng-change="change()" ng-model="model"><option ng-show="hideEmpty" value="">{{emptyText}}</option><option ng-if="item.value!=\'\'" ng-repeat="item in items track by item.value" value="{{item.value}}" ng-selected="model==item.value">{{item.text}}</option></select>',link:function(o,a,r,l){angular.element(a[0].querySelector("select"));o.emptyText=o.property.emptyText||e.getEmptyText()||"None",o.hideEmpty=!o.property.hideEmpty,i(function(){o.model=l.$viewValue,o.change=function(){var e,n=o.model;e=n?o.model:"",l.$setViewValue(e),o.$eval(r.ngChange),"undefined"!=typeof t&&t(o.$parent.component,e)},o.items=e.getItems(o,n,l)}),a.on("$destroy",function(){o.$destroy()})}}}]},a.directive("propertyList",SelectProperty({getEmptyText:function(){return"Default"},getItems:function(e,t,n){return e.property.options}})),Select2Property=function(e){return["$timeout","$compile",function(t,n){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" ng-class="{\'full-width\': property.fullwidth}"><label for="">{{property.title}}<help-icon></help-icon></label><input class="form-control-borderless" /></div>',link:function(n,i,o,a){var r=$(i[0].querySelector("input"));"undefined"==typeof e&&(e={});var l=n.property.options||e.options,s=n.property.formatter||e.formatter,d=n.property.formatterSelection||e.formatterSelection,c=n.property.search||e.search,u=function(e){return e.text};"undefined"!=typeof s&&(u=s);var p=u;"undefined"!=typeof d&&(p=d);var g=!1;"undefined"!=typeof c&&(g=c),a.$render=function(){var e={formatResult:u,formatSelection:p,data:l};g||(e.minimumResultsForSearch=1/0),$(r).select2(e).val(a.$viewValue).on("change",function(){return null==$(this).val()?void t(function(){null!=a.$viewValue&&r.val(a.$viewValue).trigger("change")},100):void a.$setViewValue($(this).val())}).trigger("change")},a.$viewChangeListeners.push(function(){n.$eval(o.ngChange)}),i.on("$destroy",function(){n.$destroy(),$(r).select2("destroy")})}}}]},a.Select2Property=Select2Property,a.directive("propertyList2",Select2Property()),a.directive("propertyAlign",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><div class="alignment-icon-container"><div class="alignment-box left" ng-click="setv(\'left\');" ng-class="{\'on\': property.value==\'left\', \'text\': property.text == true}"><span class="alignment-icon"></span></div><div class="alignment-box inline" ng-click="setv(\'center\');" ng-class="{\'on\': property.value==\'center\', \'text\': property.text == true}"><span class="alignment-icon"></span></div><div class="alignment-box right" ng-click="setv(\'right\');" ng-class="{\'on\': property.value==\'right\', \'text\': property.text == true}"><span class="alignment-icon"></span></div><div class="alignment-box justify text" ng-if="property.text == true" ng-click="setv(\'justify\');" ng-class="{\'on\': property.value==\'justify\'}"><span class="alignment-icon"></span></div></</div>',link:function(e,t,n,i){e.setv=function(e){i.$setViewValue(e)},t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyAngularDirective",["PaywallModal","$rootScope","$timeout","DocumentRenderer","DirectivePlacementModal","FeatureFence",function(e,t,n,i,o,a){return{restrict:"E",require:"?ngModel",template:'<div class="directive-input full-width" ng-repeat="dir in directives"><input id="name_input_{{$index}}" type="text" class="directive-name-input form-control" ng-keyup="save($index)" placeholder="directive" ng-model="dir.directiveName" /><input id="value_input_{{$index}}" type="text" class="directive-value-input form-control" ng-keyup="save($index)" placeholder="value" ng-model="dir.directiveValue" /><i class="icon ion-code-working choose-button" ng-click="openModal(dir.directiveName, dir.directiveValue, $index)"></i><i class="icon ion-close-circled delete-button" ng-click="deleteDirective(dir.directiveName, dir.directiveValue)"></i></div><div ng-click="addDirective()" class="directive-add-button"><i class="icon ion-plus-circled"></i> Add</div>',link:function(t,i,r,l){function s(e){var t=document.querySelector("#name_input_"+e),i=String(t.style.border);t.style.setProperty("border","1px solid red","important"),n(function(){t.style.setProperty("border",i)},1e3)}t.openModal=function(e,n,i){return 0==e.trim().length?void s(i):void o.show(t.component,e,n).then(function(i){if(i){var o=t.directives.findIndex(function(t){return t.directiveName==e&&t.directiveValue==n});o>=0&&(t.directives[o].selector=i.selector,t.directives[o].selectorIndex=i.index),l.$setViewValue(angular.copy(t.directives))}})},t.directives=[],l.$render=function(){t.directives=angular.copy(l.$viewValue).filter(function(e){return e.directiveName.trim().length>0})},t.save=function(e){n(function(){var n=angular.element(document.querySelector("#name_input_"+e)),i=angular.element(document.querySelector("#value_input_"+e));(n.val()||"").indexOf("=")>=0?(n.val(n.val().replace("=","")),i.focus()):l.$setViewValue(angular.copy(t.directives).map(function(e){return{directiveName:e.directiveName.replace("=",""),directiveValue:e.directiveValue,selector:e.selector,selectorIndex:e.selectorIndex}}))},1)},t.addDirective=function(){return a.hasAccess("codeEditing",window.Designer.getProject().team_id)?(t.directives.push({directiveName:"",directiveValue:""}),void t.save()):void e.show("code-editing")},t.deleteDirective=function(e,n){var i=t.directives.findIndex(function(t){return t.directiveName==e&&t.directiveValue==n});i>=0&&t.directives.splice(i,1),l.$setViewValue(angular.copy(t.directives))},l.$viewChangeListeners.push(function(){t.$eval(r.ngChange)}),i.on("$destroy",function(){t.$destroy()})}}}]).factory("DirectivePlacementModal",["$state","$rootScope","$http","$compile","$document","$timeout","$q","Config","Stats","DocumentRenderer","$q",function(e,t,n,i,o,a,r,l,s,d,r){var c,u,c,u,p="/tmpl/designer/directive-placement.tmpl.html",g=function(e,a,r,l,s){function g(e){for(var t,n=!1,i=!1,o=null,a=[],r=[],l=0;l<e.length;l+=1)"<"==e[l]&&0==n&&(a.push(l),l>0&&0==i&&(t=e.substring(a[a.length-2]+1,a[a.length-1]),t.trim().length>0&&r.push(t.trim())),i=!0),'"'!=e[l]&&"'"!=e[l]||"\\"===e[l-1]||0!=n?n&&e[l]==o&&"\\"!==e[l-1]&&(n=!1,o=null):(n=!0,o=e[l]),">"==e[l]&&0==n&&(a.push(l),r.push(e.substring(a[a.length-2],a[a.length-1]+1)),i=!1);return r}function h(e){return e=e.trim(),-1==e.indexOf("<")?"text":"<"==e[0]&&"/"!==e[1]?"open":"<"==e[0]&&"/"==e[1]?"close":null}var m=t.$new(),f=null,v=function(e){window.compiling=!0;var t=d.renderAsHtml(e,e).replace(/\sid\=\"[^\"]*\"/g,"");return window.compiling=!1,t};m.saveAndClose=function(){l(f),u.hideModal()},m.cancel=function(){s(null),u.hideModal()},m.dirName=a,m.dirValue=r,m.updateDirective=function(e){if(1!=e.endTag&&1!=e.regularText){f={selector:e.selector,index:e.index},y=y.replace(a+'="'+r+'"',"");var t=document.createElement("div");t.innerHTML=y,t.querySelectorAll(e.selector)[e.index].setAttribute(a,r),y=t.innerHTML,m.chunkObjs=b(y)}},m.isSelectable=function(e){return 0==e.endTag&&0==e.regularText},m.splitChunk=function(e,t){var n=e.split(t);return 2==n.length?[n[0],t,n[1]]:[e,"",""]};var y,w=new RegExp(/\t*<\/?([\w-]+)(\s|>)/),b=function(e){for(var t,n,i,o,l,s,d,c=g(e),u=[],p={},m=0;m<c.length;m++)i=String(c[m]),d=s,s=h(i),("open"==s||"close"==s)&&(o=i.match(w)[0].replace(">","").replace("<","").replace(" ","").replace("/",""),o in p?"open"==s&&(p[o]+=1):p[o]=0),0==u.length?t=0:"text"!=s&&"open"!=s||"open"!=d?"close"==s&&"open"==d||("close"==s&&"text"==d?t-=1:"open"==s&&"text"==d||("open"!=s&&"text"!=s||"close"!=d)&&"close"==s&&"close"==d&&(t-=1)):t+=1,l=i.indexOf(a+'="'+r+'"')>=0?!0:!1,-1==i.indexOf("</")?u.push({text:i,selector:o,index:p[o],endTag:!1,indent:t,selected:l,regularText:-1==i.indexOf("<"),dirText:a+'="'+r+'"'}):u.push({text:i,selector:o,index:p[o],endTag:!0,indent:t,selected:l,regularText:-1==i.indexOf("<"),dirText:a+'="'+r+'"'}),n=i;return u};y=v(e),m.chunkObjs=b(y);n.get(p).then(function(e){var t=i(e.data)(m);c=t,o[0].body.appendChild(t[0]),$(c).on("hidden.bs.modal",function(e){console.log("Hidden modal"),m.$destroy(),$(c).remove(),c=null}),u.showModal()},function(e){})};return u={show:function(e,t,n){return r(function(i,o){g(e,t,n,i,o)})},showModal:function(){c&&$(c).modal("show")},hideModal:function(){c&&$(c).modal("hide")}}}]),a.directive("propertyBoolean",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><toggle ng-model="val"></toggle>',link:function(e,t,n,i){e.val=e.property.value,e.$watch("val",function(t,n){i.$setViewValue(t),"undefined"!=typeof e.property.onchange&&t!=n&&e.property.onchange()});var o=angular.element(t[0].querySelector("input"));i.$render=function(){i.$viewValue?o.attr("checked","checked"):o.removeAttr("checked")},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),o.on("click change",function(){var t=o.is(":checked");e.$apply(function(){i.$setViewValue(t)})}),t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyButton",[function(){return{restrict:"E",require:"?ngModel",template:'<div style="padding:10px;"><button ng-click="property.exec($parent.component);" class="btn btn-block {{property.class}}">{{property.title}}</button></div>',link:function(e,t,n,i){angular.element(t[0].querySelector("button"));t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyClass",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><div style="float:right;width:200px;"><div style="inline-block;width:200px;"><input name="class" style="width:100%;" class="form-control" placeholder="" ng-model="classNames" ng-change="updateVal()"></div></div></div>',link:function(e,t,n,i){e.classNames="",i.$render=function(){"undefined"!=typeof i.$viewValue?e.classNames=i.$viewValue:e.classNames=""},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),e.updateVal=function(){i.$setViewValue(angular.copy(e.classNames))},t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyThemeColor",a.Select2Property({options:[{id:"light",text:"Light",color:"light"},{id:"stable",text:"Stable",color:"stable"},{id:"dark",text:"Dark",color:"dark"},{id:"positive",text:"Positive",color:"positive"},{id:"balanced",text:"Balanced",color:"balanced"},{id:"assertive",text:"Assertive",color:"assertive"},{id:"calm",text:"Calm",color:"calm"},{id:"energized",text:"Energized",color:"energized"},{id:"royal",text:"Royal",color:"royal"}],formatter:function(e){return'<div style="line-height:20px;"><span class="color-square '+e.color+"-bg "+e.color+'-border space-right"></span> '+e.text+"</div>"},formatterSelection:function(e){return'<div><span class="color-square '+e.color+"-bg "+e.color+'-border space-right" style="margin-top:-3px;"></span> '+e.text+"</div>"}})).directive("propertyThemeColorAllowNone",a.Select2Property({options:[{id:"none",text:"No Theme",color:""},{id:"light",text:"Light",color:"light"},{id:"stable",text:"Stable",color:"stable"},{id:"dark",text:"Dark",color:"dark"},{id:"positive",text:"Positive",color:"positive"},{id:"balanced",text:"Balanced",color:"balanced"},{id:"assertive",text:"Assertive",color:"assertive"},{id:"calm",text:"Calm",color:"calm"},{id:"energized",text:"Energized",color:"energized"},{id:"royal",text:"Royal",color:"royal"}],formatter:function(e){return'<div style="line-height:20px;"><span class="color-square '+e.color+"-bg "+e.color+'-border space-right"></span> '+e.text+"</div>"},formatterSelection:function(e){return'<div><span class="color-square '+e.color+"-bg "+e.color+'-border space-right" style="margin-top:-3px;"></span> '+e.text+"</div>"}})).directive("propertyColorPicker",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><color-picker ng-model="tempColor" color-picker-format="\'hex\'" color-picker-alpha="false" ng-model-options="{ debounce: 400 }"></color-picker>',link:function(e,t,n,i){e.tempColor="",e.ready=!1,i.$render=function(){e.ready=!0,e.tempColor=i.$viewValue,e.$watch("tempColor",function(){i.$setViewValue(e.tempColor)})},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyConvertpage",["ConvertPageToHTMLModal","PaywallModal","$rootScope","Stats","FeatureFence",function(e,t,n,i,o){return{restrict:"E",require:"?ngModel",template:'<div style="padding:10px;padding-bottom:5px;"><button ng-click="openModal()" class="btn btn-block" style="background-color: white;box-shadow: none;border: 1px solid #3a7ef5;color: #3a7ef5;">Convert to HTML<span ng-if="!$root.FeatureFence.hasAccess(\'codeEditing\', $root.designer.getProject().team_id)" class="badge" style="background-color:#4E8EF7;height: 18px;font-size: 11px;margin-left:5px;"><span class="ion-star" style="font-size: 11px;color:white;"></span> PRO</span></button></div>',link:function(n,a,r,l){n.openModal=function(){return i.t("Convert Page to HTML Button"),o.hasAccess("codeEditing",window.Designer.getProject().team_id)?void e.show(n.component):void t.show("code-editing")}}}}]).factory("ConvertPageToHTMLModal",["$state","$rootScope","$http","$compile","$document","$timeout","$q","Config","Stats","DocumentRenderer","Designer",function(e,t,n,i,o,a,r,l,s,d,c){var u,p,u,p,g="/tmpl/designer/convert-page-to-html.tmpl.html",h=function(e){var a=t.$new();a.data={},window.compiling=!0;var r=d.renderAsHtml(e);window.compiling=!1,r=r.replace(/\sid\=\"[^\"]*\"/g,""),a.confirmConvert=function(){for(c.Coding.initHTMLPage(r,e.getId()+"-HTML",e.get("title")),e.set("htmlBased",!0),c.Coding.settings.currentlyEditing=e.getId()+"-HTML",c.Coding.settings.open!==!0?c.Coding.toggle():t.$emit("setselected");0!==e.getChildren().length;)e.removeChild(e.getChildren()[0]);window.Designer.AppGraph.updateTextLinks(e.getId()+"-HTML",r),t.$emit("pageconvert",{id:e.getId(),title:e.get("title")}),t.$emit("designer.refresh-properties",e),p.hideModal()};n.get(g).then(function(e){var t=i(e.data)(a);u=t,o[0].body.appendChild(t[0]);var n=ace.edit(t[0].querySelector(".editor"));n.setTheme("ace/theme/monokai"),n.getSession().setMode("ace/mode/html"),n.getSession().setUseWrapMode(!0),n.renderer.setShowGutter(!1),n.setValue(r),n.setReadOnly(!0),n.getSession().selection.clearSelection(),$(u).on("hidden.bs.modal",function(e){console.log("Hidden modal"),a.$destroy(),n.destroy(),$(u).remove(),u=null}),p.showModal()},function(e){})};return p={show:function(e){s.t("Convert Page To HTML Show"),h(e)},showModal:function(){u&&$(u).modal("show")},hideModal:function(){u&&$(u).modal("hide")}}}]),a.directive("propertyConverthtml",["ConvertToHTMLModal","PaywallModal","$rootScope","Stats","FeatureFence",function(e,t,n,i,o){return{restrict:"E",require:"?ngModel",template:'<div style="padding:10px;padding-bottom:5px;"><button ng-click="openModal()" class="btn btn-block" style="background-color: white;box-shadow: none;border: 1px solid #3a7ef5;color: #3a7ef5;">Convert to HTML<span ng-if="!$root.FeatureFence.hasAccess(\'codeEditing\', $root.designer.getProject().team_id)" class="badge" style="background-color:#4E8EF7;height: 18px;font-size: 11px;margin-left:5px;"><span class="ion-star" style="font-size: 11px;color:white;"></span> PRO</span></button></div>',link:function(n,a,r,l){n.openModal=function(){return i.t("Convert to HTML Button"),o.hasAccess("codeEditing",window.Designer.getProject().team_id)?void e.show(n.component):void t.show("code-editing")}}}}]).factory("ConvertToHTMLModal",["$state","$rootScope","$http","$compile","$document","$timeout","$q","Config","Stats","DocumentRenderer",function(e,t,n,i,o,a,r,l,s,d){var c,u,c,u,p="/tmpl/designer/convert-to-html.tmpl.html",g=function(e){var a=t.$new();a.data={},window.compiling=!0;var r=d.renderAsHtml(e);window.compiling=!1,r=r.replace(/\sid\=\"[^\"]*\"/g,""),a.confirmConvert=function(){var t=e.create("html");t.set("content",r),e.getParent().insertChild(t,e.getIndex()),e.getParent().removeChild(e),window.Designer.select(t),window.Designer.AppGraph.updateTextLinks(t.id,r),u.hideModal()};n.get(p).then(function(e){var t=i(e.data)(a);c=t,o[0].body.appendChild(t[0]);var n=ace.edit(t[0].querySelector(".editor"));n.setTheme("ace/theme/monokai"),n.getSession().setMode("ace/mode/html"),n.getSession().setUseWrapMode(!0),n.renderer.setShowGutter(!1),n.setValue(r),n.setReadOnly(!0),n.getSession().selection.clearSelection(),$(c).on("hidden.bs.modal",function(e){console.log("Hidden modal"),a.$destroy(),n.destroy(),$(c).remove(),c=null}),u.showModal()},function(e){})};return u={show:function(e){s.t("Move Project Show"),g(e)},showModal:function(){c&&$(c).modal("show")},hideModal:function(){c&&$(c).modal("hide")}}}]),a.directive("propertyDimension",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><input type="text" class="form-control" id="" placeholder="{{property.placeholder}}" value="{{property.value}}"></div>',link:function(e,t,n,i){var o=angular.element(t[0].querySelector("input"));i.$render=function(){o.val(i.$viewValue)},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),o.on("blur keyup change",function(){var t=o.val();e.$apply(function(){i.$setViewValue(t)})}),t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyEditor",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group auto"><label for="">{{property.title}}<help-icon></help-icon></label><div class="markdown-editor-container"><div class="editor" style="width: 263px; height: 250px;"></div></div></div>',link:function(e,t,n,i){var o=ace.edit(t[0].querySelector(".editor"));o.setTheme("ace/theme/textmate"),o.getSession().setMode("ace/mode/"+e.property.language),o.getSession().setUseWrapMode(!0),e.showGutter||o.renderer.setShowGutter(!1),o.on("change",function(e){i.$setViewValue(o.getValue())}),i.$render=function(){o.setValue(i.$viewValue)},t.on("$destroy",function(){e.$destroy(),o.destroy()})}}}]),a.directive("helpIcon",[function(){return{restrict:"E",template:'<a class="nav-icon icon-help" ng-if="property.help" style="margin:0px 0px 0px 5px;" data-toggle="tooltip" data-placement="right" title="" data-delay="400" data-original-title="{{property.help}}" data-nocontainer="body"></a>',link:function(e,t,n){t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyHtml",["PopoutCodeModal",function(e){return{restrict:"E",require:"?ngModel",template:'<div class="form-group unfloat-inputs full-width" style="padding-bottom:0px;"><label for="">{{property.title}}<help-icon></help-icon></label><div class="editor" style="width: 100%; height: 250px"></div><div><button ng-click="popout()" type="button" class="btn btn-block btn-link"><span class="ion-android-open"></span> Popout</button></div><p><b>How to Link to a Page</b></p><p>Page Routes are generated dynamically based on their title and will be automatically updated for you if they change. To see a pages current navigation code, choose it below.</p><select class="form-control-borderless" ng-change="changePage()" ng-model="data.chosenPage" style="margin-top:0px;margin-bottom:12px;"><option value="">Select a Page</option><option ng-if="item.value!=\'\'" ng-repeat="item in pageItems track by item.value" value="{{item.value}}" ng-selected="model==item.value">{{item.text}}</option></select><div ng-show="data.pageExample"><code style="display:block;margin-bottom:12px;white-space: normal;word-break: break-word;">&lt;a ui-sref="{{data.pageExample}}"&gt;Link&lt;/a&gt;</code></div><p><b>HTML gets wrapped in &lt;div&gt; tag</b></p><p>Due to how the Creator renderer works, your HTML content gets wrapped inside of a "&lt;div&gt;" tag.</p></div>',link:function(t,n,o,a){var r=ace.edit(n[0].querySelector(".editor"));r.setTheme("ace/theme/monokai"),r.getSession().setMode("ace/mode/html"),r.getSession().setUseWrapMode(!0),r.on("change",function(e){a.$setViewValue(r.getValue()),Designer.AppGraph.updateTextLinks(t.$parent.component.id,r.getValue())}),a.$render=function(){r.setValue(a.$viewValue)},n.on("$destroy",function(){t.$destroy(),r.destroy()}),t.popout=function(){e.show(r.getValue()).then(function(e){a.$setViewValue(e),r.setValue(e),Designer.AppGraph.updateTextLinks(t.$parent.component.id,r.getValue())},function(){})},t.data={chosenPage:"",pageExample:""},t.changePage=function(){if(t.data.pageExample="",""!=t.data.chosenPage){var e=Designer.getById(t.data.chosenPage),n=e.getUISref();t.data.pageExample=n}};var l=Designer.getPages(),s=[{value:"",text:"None"}];for(i=0;i<l.length;i++)p=l[i],p.get("url")===a.$viewValue&&!function(e){$timeout(function(){$(select).val(e.get("url"))})}(p),0==p.get("abstract",!1)&&s.push({value:p.getId(),text:p.get("title")+" - "+p.get("url"),page:p,pageId:"("+p.getId()+")"});t.pageItems=s}}}]).factory("PopoutCodeModal",["$state","$rootScope","$http","$compile","$document","$q",function(e,t,n,i,o,a){var r,l,s="/tmpl/designer/code-modal.tmpl.html",d=function(e){var d=a.defer(),c=t.$new();n.get(s).then(function(t){var n=i(t.data)(c);r=n,o[0].body.appendChild(n[0]);var a=ace.edit(n[0].querySelector(".editor"));a.setTheme("ace/theme/monokai"),a.getSession().setMode("ace/mode/html"),a.getSession().setUseWrapMode(!0),a.setValue(e),c.cancel=function(){d.reject(),l.hideModal()},c.save=function(){d.resolve(a.getValue()),l.hideModal()},$(r).modal("show")},function(e){});return d.promise};return l={show:function(e){return d(e)},hideModal:function(){r&&$(r).modal("hide")}}}]),a.factory("IconSet",["$q","$http","$rootScope","$timeout",function(e,t,n,i){var o={};return{load:function(n){function a(e){var t=document.createElement("link");t.href=e,t.type="text/css",t.rel="stylesheet",t.media="screen,print",document.getElementsByTagName("head")[0].appendChild(t)}var r=e.defer();return n in o?i(function(){r.resolve(o[n])}):("ionicons3"==n?a("/lib/ionicons3/css/ionicons.min.css"):"ionicons"==n&&a("https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"),t.get("/tmpl/icons/"+n+".json").then(function(e){o[n]=e.data,o[n].splice(0,0,{name:"No Icon"}),r.resolve(o[n])},function(e){r.reject(e)})),r.promise}}}]).directive("propertyIcon",["IconSet","$rootScope","$timeout",function(e,t,n){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" ng-class="{\'full-width\': property.fullwidth}"><label for="">{{property.title}}<help-icon></help-icon></label><select class="form-control-borderless"></select></div>',link:function(i,o,a,r){function l(e,t){var n=document.createElement("option");n.value=e,n.innerHTML=t,
s.append(n)}var s=$(o[0].querySelector("select")),d=function(e){return'<i class="'+e.text+' icon-in-select"></i> '+e.id},c=_.debounce(function(){$(s).select2({formatResult:d,formatSelection:d}).val(r.$viewValue).on("change",function(){return null==$(this).val()?void n(function(){null!=r.$viewValue&&s.val(r.$viewValue).trigger("change")},100):void r.$setViewValue($(this).val())}).trigger("change")},10);r.$render=function(){s.val(r.$viewValue).trigger("change")},r.$viewChangeListeners.push(function(){i.$eval(a.ngChange)}),i.icons=[];var u="ionicons";window.Designer.featureCheck("ionic2")&&(u="ionicons3"),e.load(u).then(function(e){n(function(){for(var t in e)"ionicons3"==u?l(e[t].name,e[t]["class"]):l(e[t].name,e[t].name);c()})},function(e){t.$emit("iconset.error",e)}),o.on("$destroy",function(){i.$destroy(),$(s).select2("destroy")})}}}]),a.directive("propertyPages",["Designer",function(e){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">Inner Pages<help-icon></help-icon></label><div ng-repeat="innerpage in property.value.pages" style="padding-bottom:10px;position:relative;"><select class="form-control-borderless" ng-model="innerpage.id" ng-change="saveChanges()" style="width: 80%;display: inline-block;"><option value="">- Select a Page -</option><option ng-repeat="page in pageData" value="{{page.id}}" ng-selected="innerpage.id==page.id">{{page.title}}</option></select><button class="btn btn-danger" style="width: 18%;padding: 6px 0px 3px 0px;right: 0px;position: absolute;" ng-click="removePage($index)"><span class="ion-trash-b" style="font-size: 20px;line-height: 20px;"><span></button></div><button class="btn btn-block btn-primary" ng-click="addPage()">Assign Page</button></div>',link:function(t,n,i,o){var a=e.getPages();t.pageData=[];for(var r=0;r<a.length;r++)0==a[r].get("disableParenting")&&t.pageData.push({id:a[r].id,title:a[r].get("title")});o.$render=function(){"object"!=typeof o.$viewValue&&o.$setViewValue({pages:[]}),t.gotModel=!0},t.saveChanges=function(){for(var n=[],i=0;i<o.$viewValue.pages.length;i++){var r=o.$viewValue.pages[i].id,l=e.getById(r),s=l.get("parentView","");if(n.push(r),""!=s&&s!=t.$parent.component.id){var d=e.getById(s);if("undefined"!=typeof d){for(var c=d.get("pages"),u=[],i=0;i<c.pages.length;i++)c.pages[i].id!=r&&u.push(c.pages[i]);d.set("pages",{pages:u})}}l.set("parentState",t.$parent.component.getParentPage().id),l.set("parentView",t.$parent.component.id)}for(var i=0;i<a.length;i++)a[i].get("parentView")==t.$parent.component.id&&-1==n.indexOf(a[i].id)&&(a[i].set("parentState",""),a[i].set("parentView",""));e.save()},t.removePage=function(e){o.$viewValue.pages.splice(e,1),t.saveChanges()},t.addPage=function(){o.$viewValue.pages.push({id:""}),o.$setViewValue(o.$viewValue)},n.on("$destroy",function(){t.$destroy()})}}}]),a.directive("propertyInt",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><span class="int-unit" ng-show="property.unit" ng-click="focus()">{{property.unit}}</span><input type="number" class="form-control" id="" placeholder="{{property.placeholder}}" value="{{property.value}}" ng-class="{\'unit-button-fix\': property.unit}"></div>',link:function(e,t,n,i){var o=angular.element(t[0].querySelector("input"));e.focus=function(){o.focus()},i.$render=function(){o.val(i.$viewValue)},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),o.on("blur keyup change",function(){var t=o.val();e.$apply(function(){i.$setViewValue(t)})}),t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyListButtons",["$rootScope","$timeout",function(e,t){return{restrict:"E",require:"?ngModel",template:'<div class="directive-input full-width" ng-repeat="button in buttons"><input id="name_input_{{$index}}" type="text" class="directive-name-input form-control" ng-keyup="save($index)" placeholder="Text" ng-model="button.text" style="vertical-align:top;" /><property-theme-color class="list-buttons-form-group" ng-model="button.theme" ng-change="save($index)"></property-theme-color><i class="icon ion-close-circled delete-button" ng-click="deleteButton($index)"></i></div><div ng-click="addButton()" class="directive-add-button"><i class="icon ion-plus-circled"></i> Add</div>',link:function(e,n,i,o){e.directives=[],o.$render=function(){e.buttons=angular.copy(o.$viewValue).filter(function(e){return e.text.trim().length>0})},e.save=function(n){t(function(){o.$setViewValue(angular.copy(e.buttons).map(function(e){return{text:e.text,theme:e.theme}}))},1)},e.addButton=function(){e.buttons.push({text:"",theme:"positive"}),e.save()},e.deleteButton=function(t){t>=0&&e.buttons.splice(t,1),o.$setViewValue(angular.copy(e.buttons))},o.$viewChangeListeners.push(function(){e.$eval(i.ngChange)}),n.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyMargin",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><div class="flex"><input type="text" class="form-control form-control-inline" id="" placeholder="{{property.placeholder}}" value="{{property.value.top}}"><input type="text" class="form-control form-control-inline" id="" placeholder="{{property.placeholder}}" value="{{property.value.right}}"><input type="text" class="form-control form-control-inline" id="" placeholder="{{property.placeholder}}" value="{{property.value.bottom}}"><input type="text" class="form-control form-control-inline" id="" placeholder="{{property.placeholder}}" value="{{property.value.left}}"></div></div>',link:function(e,t,n,i){var o=t[0].querySelectorAll("input"),a=angular.element(o[0]),r=angular.element(o[1]),l=angular.element(o[2]),s=angular.element(o[3]);i.$render=function(){a.val(i.$viewValue.top),r.val(i.$viewValue.right),l.val(i.$viewValue.bottom),s.val(i.$viewValue.left)},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),t.on("blur keyup change","input",function(){var t={top:a.val(),right:r.val(),bottom:l.val(),left:s.val()};e.$apply(function(){i.$setViewValue(t)})}),t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyMove",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" style="height:65px;"><label for="" style="line-height:40px;">{{property.title}}<help-icon></help-icon></label><div style="float:right;"><button ng-click="property.left($parent.component);" class="btn btn-primary ion-arrow-left-a"></button> <button ng-click="property.right($parent.component);" class="btn btn-primary ion-arrow-right-a"></button></div></div>',link:function(e,t,n,i){t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyMyhtmltemplate",["$rootScope","$timeout",function(e,t){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" style="padding-bottom:0px;height:auto;"><label for="">{{property.title}}<help-icon></help-icon></label><code style="display: inline-block;margin-left: 25px;max-width: 200px;white-space: normal;word-break: break-word;vertical-align: middle;">{{data.htmltemplate}}</code></div>',link:function(t,n,i,o,a){t.data={htmltemplate:""},t.updateValue=function(){function e(){var n=t.$parent.component,i=n.get("idName");return i?void(t.data.htmltemplate="templates/"+i+".html"):void a(e,100)}t.$parent&&e()},o.$render=function(){t.updateValue()};var r=e.$on("page.newTitle",function(){a(function(){t.updateValue()})});n.on("$destroy",function(){t.$destroy(),r()})}}}]),a.directive("propertyMyuisref",["$rootScope","$timeout",function(e,t){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" style="padding-bottom:0px;height:auto;"><label for="" style="float:left;">{{property.title}}<help-icon></help-icon></label><div style="margin-left:79px;margin-top:6px;"><span ng-show="data.has_children" style="margin-left:14px;color:#a8aeb7;font-size:12px;font-weight:500;">Navigate from Current Tab:</span><code style="display: inline-block;margin-left: 14px;max-width: 200px;white-space: normal;word-break: break-word;vertical-align: middle;">{{data.uisref}}</code><div ng-repeat="n in data.uisref_children"><span style="margin-left:14px;color:#a8aeb7;font-size:12px;font-weight:500;">Open in {{n.title}}:</span><code style="display: inline-block;margin-left: 14px;max-width: 200px;white-space: normal;word-break: break-word;vertical-align: middle;">{{data.uisref}}_{{n.id}}</code></div></div></div>',link:function(n,i,o,a){n.data={uisref:"",uisref_children:[],has_children:!1},n.updateUISref=function(){if(n.$parent){var e=n.$parent.component;if(e.getUISref){var t=e.getUISref();n.data.uisref=t;var i=e.get("routeViews",[]);if(n.data.has_children=!1,i.length>1){n.data.children=[],n.data.has_children=!0;for(var o=0;o<i.length;o++)n.data.uisref_children.push({id:i[o],title:window.Designer.getById(i[o]).get("title")})}}}},a.$render=function(){n.updateUISref()};var r=e.$on("page.newTitle",function(){t(function(){n.updateUISref()})});i.on("$destroy",function(){n.$destroy(),r()})}}}]),a.directive("propertyRadius",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group full-number"><label for="">{{property.title}}<help-icon></help-icon></label><span class="int-unit" ng-show="property.unit" ng-click="focus()">{{property.unit}}</span><span class="radius-all" ng-click="updateR(\'all\');" ng-class="{\'on\': radiusSettings.active==\'all\'}"></span><span class="radius-topleft" ng-click="updateR(\'topleft\');" ng-class="{\'on\': radiusSettings.active==\'topleft\'}"></span><span class="radius-topright" ng-click="updateR(\'topright\');" ng-class="{\'on\': radiusSettings.active==\'topright\'}"></span><span class="radius-bottomright" ng-click="updateR(\'bottomright\');" ng-class="{\'on\': radiusSettings.active==\'bottomright\'}"></span><span class="radius-bottomleft" ng-click="updateR(\'bottomleft\');" ng-class="{\'on\': radiusSettings.active==\'bottomleft\'}"></span><input type="number" class="form-control" id="" placeholder="{{property.placeholder}}" value="{{property.value}}" ng-class="{\'unit-button-fix\': property.unit}"></div>',link:function(e,t,n,i){function o(){var t=a.val();e.radiusSettings[e.radiusSettings.active+"_val"]=t,"all"==e.radiusSettings.active&&"undefined"!=typeof e.radiusSettings.all_val&&""!==e.radiusSettings.all_val&&(e.radiusSettings.topleft_val=t,e.radiusSettings.topright_val=t,e.radiusSettings.bottomright_val=t,e.radiusSettings.bottomleft_val=t);var n={all:e.radiusSettings.all,all_val:e.radiusSettings.all_val,topleft_val:e.radiusSettings.topleft_val,topright_val:e.radiusSettings.topright_val,bottomright_val:e.radiusSettings.bottomright_val,bottomleft_val:e.radiusSettings.bottomleft_val};console.info("HERES MY RADIUS",n),i.$setViewValue(n)}var a=angular.element(t[0].querySelector("input"));e.focus=function(){a.focus()},e.radiusSettings={all:!0,all_val:void 0,active:void 0,topleft_val:void 0,topright_val:void 0,bottomright_val:void 0,bottomleft_val:void 0};var r=["topleft","topright","bottomright","bottomleft"];i.$render=function(){"undefined"==typeof i.$viewValue||"undefined"==typeof e.radiusSettings.all?e.radiusSettings.active="all":(e.radiusSettings.all=i.$viewValue.all,e.radiusSettings.all_val=i.$viewValue.all_val,e.radiusSettings.topleft_val=i.$viewValue.topleft_val,e.radiusSettings.topright_val=i.$viewValue.topright_val,e.radiusSettings.bottomright_val=i.$viewValue.bottomright_val,e.radiusSettings.bottomleft_val=i.$viewValue.bottomleft_val,e.radiusSettings.all?(e.radiusSettings.active="all",a.val(i.$viewValue.all_val)):(e.radiusSettings.active="topleft",a.val(i.$viewValue.topleft_val)))},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),e.updateR=function(t){if(a.val(e.radiusSettings[t+"_val"]),"all"==t?e.radiusSettings.all=!0:e.radiusSettings.all=!1,"all"==t&&"all"!==e.radiusSettings.active){for(var n=!0,i=e.radiusSettings.topleft_val,l=1;l<r.length;l++)if(i!=e.radiusSettings[r[l]+"_val"]){n=!1;break}n?(e.radiusSettings.all_val=e.radiusSettings.topleft_val,a.val(e.radiusSettings.all_val)):(e.radiusSettings.all_val=void 0,a.val(void 0))}e.radiusSettings.active=t,o()},a.on("blur keyup change",function(){e.$apply(function(){o()})}),t.on("$destroy",function(){e.$destroy()})}}}]),a.run(["Action",function(e){e.register("modifyProperty",{perform:function(e){e.set(e.propertyName,e.newPropertyValue)},revert:function(e){e.set(e.propertyName,e.oldPropertyValue)}})}]).factory("PropertyRenderer",["$compile","$rootScope","PaywallModal","Integrations","FeatureFence",function(e,t,n,i,o){var a=function(a,r){var l,s,d,c,u,g=[],h=a.getSortedProperties(),m={};if("page"==a.componentType&&1==a.get("htmlBased")&&(h=h.filter(function(e){return["Title","Routing URL","State (sref)","Disable Parenting"].indexOf(e.title)>=0||["Route Parameters"].indexOf(e.category)>=0})),1==a.get("abstract",!1)&&(h=h.filter(function(e){return"convertpage"!==e.type})),r.designer=window.Designer,r.propertyValueChanged=function(e,n,i){t.$emit("document.propertyChanged",e,a)},r.openCodePaywall=function(e){return o.hasAccess("codeEditing",t.designer.getProject().team_id)?void 0:(n.show("code-editing"),e.stopPropagation(),!1)},r.installAddon=function(e){i.showModal(e)},!a.addonRequired||Designer.getExtra("addons",{})[a.addonRequired]){for(l=0;l<h.length;l++)p=h[l],p.show!==!1&&(c=p.category?p.category:"",m[c]||(m[c]=[]),m[c].push(p));for(var f in m){if(f){var v='<div class="category expanded"><h4',y=!1;if(("Angular Directives"==f||"Route Parameters"==f)&&(y=!0,v+=' ng-click="openCodePaywall($event)"'),v=v+' class="category-toggle"><span class="caret"></span> '+f+'</h4><div class="content"></div></div>',u=e(v)(r),("Angular Directives"==f||"Route Parameters"==f)&&u.find(".category-toggle").append(e('<span ng-if="!$root.FeatureFence.hasAccess(\'codeEditing\', $root.designer.getProject().team_id)" class="badge" style="background-color:#4E8EF7;height: 18px;font-size: 11px;margin-left:5px;"><span class="ion-star" style="font-size: 11px;color:white;"></span> PRO</span>')(r)),"Angular Directives"==f){var w=r.$new();w.tip='Here you can include any directive (custom and Angular) and a corresponding value. For example: "ng-repeat" and "x in y" or "custom-directive" and "myvar".',u.find(".category-toggle").append(e('<a class="nav-icon icon-help" style="margin:0px 0px 0px 5px;" data-toggle="tooltip" data-placement="right" title="" data-delay="400" data-original-title="{{tip}}" data-nocontainer="body"></a>')(w))}if("Route Parameters"==f){var w=r.$new();w.tip='Here you can add URL Route Parameters to your page. For instance if you had a Profile page, one parameter may be "userid". The value passed then becomes available via $stateParams. Values can be passed via any linkable element (like a button) as raw ("123") or a template variable ("{{u.id}}").',u.find(".category-toggle").append(e('<a class="nav-icon icon-help" style="margin:0px 0px 0px 5px;" data-toggle="tooltip" data-placement="right" title="" data-delay="400" data-original-title="{{tip}}" data-nocontainer="body"></a>')(w))}}else u=$('<div class="category expanded"><div class="content"></div></div>');for(l=0;l<m[f].length;l++){p=m[f][l],s=p.type||"string",d=r.$new(),d.property=p,d.name=p.type||"string";var b=!0;p.feature&&(window.Designer.featureCheck(p.feature)||(b=!1));var C="";p.ngShow&&(C=' ng-show="property.ngShow($parent.component)"'),b&&u.find(".content").append(e("<property-"+p.type+' ng-model="property.value"'+C+' ng-change="propertyValueChanged(property, newValue, oldValue)"></property-'+p.type+">")(d)),d.$apply(function(){})}g.push(u)}}else{var S=i.get(a.addonRequired);g.push(e('<div class="category expanded"><h4 class="category-toggle"><span class="caret"></span> Addon Required</h4><div style="background-color:'+S.color+';text-align:center;padding:10px;margin-bottom:10px;"><img src="'+S.logo+'" style="height:50px;" /></div><div class="content" style="padding-left:15px;padding-right:15px;padding-bottom:10px;"><p>In order to use this component you must first install the <b>'+S.name+"</b> Addon.</p><button ng-click=\"installAddon('"+S.title+'\')" class="btn btn-block" style="background-color: white;box-shadow: none;border: 1px solid #3a7ef5;color: #3a7ef5;">Install Addon</button></div></div>')(r))}return g};return{render:function(e,t){return a(e,t)}}}]),a.directive("propertyRouteParameters",["PaywallModal","$rootScope","FeatureFence",function(e,t,n){return{restrict:"E",require:"?ngModel",template:'<div class="parameter-input full-width" ng-repeat="p in parameters"><div style="float:right;display:inline-block;"><input type="text" ng-class="{invalid:!isValid(p.name)}" class="parameter-name-input form-control" ng-change="save()" ng-model="p.name" placeholder="Param name..." style="float:none;" /><input type="text" class="parameter-name-input form-control" ng-change="save()" ng-model="p.defaultForPreview" placeholder="Default value" style="margin-right:23px;float:none;" /></div><i class="icon ion-close-circled delete-button" ng-click="deleteParameter(p.name)"></i></div><div ng-click="addParameter()" class="parameter-add-button"><i class="icon ion-plus-circled"></i> Add</div>',link:function(t,i,o,a){t.parameters=[],t.invalid=!1,t.isValid=function(e){return e.replace(/\W+/g,"")===e},a.$render=function(){t.parameters=angular.copy(a.$viewValue).filter(function(e){return e.name.trim().length>0})},t.save=function(){var e=t.parameters.map(function(e){return{name:e.name.replace(/\W+/g,"").trim(),defaultForPreview:e.defaultForPreview}}).filter(function(e){return e.name.length>0});a.$setViewValue(e),window.Designer.AppGraph._save()},t.addParameter=function(){return n.hasAccess("codeEditing",window.Designer.getProject().team_id)?(t.parameters.push({name:"",defaultForPreview:""}),void t.save()):void e.show("code-editing")},t.deleteParameter=function(e){var n=t.parameters.findIndex(function(t){return t.name==e});n>=0&&t.parameters.splice(n,1),t.save()},a.$viewChangeListeners.push(function(){t.$eval(o.ngChange)}),i.on("$destroy",function(){t.$destroy()})}}}]);var s=function(e,t){return["Designer","$timeout",function(n,i){return{restrict:"E",require:"?ngModel",template:'<div class="form-group unfloat-inputs auto" ng-class="{\'full-width\': property.fullwidth}"><label for="">{{property.title}}<help-icon></help-icon></label><select class="form-control-borderless" ng-change="change()" ng-model="model" style="float:right;"><option value="">{{emptyText}}</option><option ng-if="item.value!=\'\'" ng-repeat="item in items track by item.value" value="{{item.value}}" ng-selected="model==item.value">{{item.text}}</option></select><input ng-change="inputChange(\'url\');" id="url-input" class="form-control" placeholder="http://othersite.com" ng-model="vals.url" style="margin-top:12px;"><input ng-change="inputChange(\'tel\');" type="tel" class="form-control" placeholder="5551234567" ng-model="vals.tel" style="margin-top:12px;"><input ng-change="inputChange(\'mailto\');" type="email" class="form-control" placeholder="someone@email.com" ng-model="vals.mailto" style="margin-top:12px;">',link:function(o,a,r,l){var s=(angular.element(a[0].querySelector("select")),{});s.url=angular.element(a[0].querySelector("#url-input")),s.tel=angular.element(a[0].querySelector('input[type="tel"]')),s.mailto=angular.element(a[0].querySelector('input[type="email"]')),s.url.hide(),s.tel.hide(),s.mailto.hide(),o.emptyText=o.property.emptyText||e.getEmptyText()||"None",o.vals={url:"",tel:"",mailto:""},l.$render=function(){if(o.items=e.getItems(o,n,l,i),0==l.$viewValue.indexOf("tel"))o.model="tel",o.vals.tel=l.$viewValue.replace("tel:",""),s.tel.show();else if(0==l.$viewValue.indexOf("mailto"))o.model="mailto",o.vals.mailto=l.$viewValue.replace("mailto:",""),s.mailto.show();else if(""==l.$viewValue)o.model=l.$viewValue;else{for(var a=!1,d=0;d<o.items.length;d++)if(o.items[d].value==l.$viewValue){a=!0;break}a?o.model=l.$viewValue:(o.model="url",o.vals.url=l.$viewValue,s.url.show())}o.change=function(){var e,n=o.model;e=n?o.model:"","url"!=e&&"tel"!=e&&"mailto"!=e?(s.url.hide(),s.tel.hide(),s.mailto.hide(),l.$setViewValue(e),o.$eval(r.ngChange),"undefined"!=typeof t&&t(o.$parent.component,e)):(s.url.hide(),s.tel.hide(),s.mailto.hide(),s[e].show(),o.inputChange(e),o.$eval(r.ngChange),"undefined"!=typeof t&&t(o.$parent.component,e))},o.inputChange=function(e){var n="";switch(e){case"url":n=s.url.val();break;case"tel":n="tel:"+s.tel.val();break;case"mailto":n="mailto:"+s.mailto.val()}l.$setViewValue(n),o.$eval(r.ngChange),"undefined"!=typeof t&&t(o.$parent.component,n)}},a.on("$destroy",function(){o.$destroy()})}}}]},d=function(e,t){return["Designer","$timeout",function(n,i){return{restrict:"E",require:"?ngModel",template:'<div class="form-group unfloat-inputs auto" ng-class="{\'full-width\': property.fullwidth}"><label for="" style="display:inline-block;">{{property.title}}<help-icon></help-icon></label><div class="options-toggle-container options-25-percent"><div class="options-toggle-box left" ng-click="change(\'\')" ng-class="{\'on\': model != \'tel\' && model != \'mailto\' && model != \'url\'}"><div class="alignment-icon link-icon link-icon-page"></div></div><div class="options-toggle-box middle" ng-click="change(\'url\')" ng-class="{\'on\': model == \'url\'}"><div class="alignment-icon link-icon link-icon-url"></div></div><div class="options-toggle-box middle" ng-click="change(\'mailto\')" ng-class="{\'on\': model == \'mailto\'}"><div class="alignment-icon link-icon link-icon-mailto"></div></div><div class="options-toggle-box right" ng-click="change(\'tel\')" ng-class="{\'on\': model == \'tel\'}"><div class="alignment-icon link-icon link-icon-tel"></div></div></div><select class="form-control-borderless" ng-change="change()" ng-model="model" style="margin-top:12px;"><option value="">{{emptyText}}</option><option ng-if="item.value!=\'\'" ng-repeat="item in items track by item.value" value="{{item.value}}" ng-selected="model==item.value">{{item.text}}</option></select><input ng-change="inputChange(\'url\');" id="url-input" class="form-control" placeholder="http://othersite.com" ng-model="vals.url" style="margin-top:11px;"><input ng-change="inputChange(\'tel\');" type="tel" class="form-control" placeholder="5551234567" ng-model="vals.tel" style="margin-top:11px;"><input ng-change="inputChange(\'mailto\');" type="email" class="form-control" placeholder="someone@email.com" ng-model="vals.mailto" style="margin-top:11px;"><select class="form-control-borderless" ng-change="change()" ng-if="viewsNeeded" ng-model="vals.view" style="margin-top:12px;"><option ng-repeat="view in views" value="{{view.id}}" ng-selected="vals.view == view.id">Open in {{view.title}}</option></select><div class="form-group" ng-repeat="p in vals.route_params" style="margin-top:5px;"><label for="" style="display: block;float: left;margin-left: -5px;">{{p.name}}</label><input type="text" ng-model="p.val" ng-change="changeParam(p);" style="width: 200px;float: right;margin-right: -10px;" class="form-control" placeholder="Enter value or template string" /></div>',link:function(o,a,r,l){var s,d=(angular.element(a[0].querySelector("select")),{});d.url=angular.element(a[0].querySelector("#url-input")),d.tel=angular.element(a[0].querySelector('input[type="tel"]')),d.mailto=angular.element(a[0].querySelector('input[type="email"]')),d.route=angular.element(a[0].querySelector("select")),d.url.hide(),d.tel.hide(),d.mailto.hide(),o.emptyText=o.property.emptyText||e.getEmptyText()||"None",o.vals={url:"",tel:"",mailto:"",view:"",route_params:[]};var c=function(){var e=n.getById(o.model);if(e)var t=e.get("parameters","NO");else var t="NO";if("NO"!=t){o.vals.route_params=t;var i=o.$parent.component.get("linkobj","");""==i&&(i={params:{}});for(var a=0;a<o.vals.route_params.length;a++)o.vals.route_params[a].val=i.params[o.vals.route_params[a].name]}else o.$parent.component.set("linkobj",""),n.save(),o.vals.route_params=[]};o.changeParam=function(e){var t=e.val,i=o.$parent.component.get("linkobj","");""==i&&(i={params:{}}),i.params[e.name]=t,o.$parent.component.set("linkobj",i),n.save()},o.viewsNeeded=!1,o.views=[],l.$render=function(){if(s=o.$parent.component.get("newProps",!1),s&&d.route.hide(),o.items=e.getItems(o,n,l,i),0==l.$viewValue.indexOf("tel"))o.model="tel",o.vals.tel=l.$viewValue.replace("tel:",""),d.tel.show();else if(0==l.$viewValue.indexOf("mailto"))o.model="mailto",o.vals.mailto=l.$viewValue.replace("mailto:",""),d.mailto.show();else if(""==l.$viewValue)o.model=l.$viewValue,d.route.show();else{for(var t=!1,a=0;a<o.items.length;a++)if(o.items[a].value==l.$viewValue){t=!0;break}if(t){o.model=l.$viewValue,d.route.show(),c();var r=window.Designer.getById(o.model).get("routeViews",[]),u=o.$parent.component.getParentPage().get("routeViews",[]);if(r.length>1&&0==u.length){o.viewsNeeded=!0,o.views=[];for(var a=0;a<r.length;a++){var p=window.Designer.getById(r[a]);r[a]==o.$parent.component.get("linkView","")&&(o.vals.view=r[a]),o.views.push({id:r[a],title:p.get("title")})}}}else o.model="url",o.vals.url=l.$viewValue,d.url.show()}},o.change=function(e){"undefined"==typeof e?e=o.model:o.model=e;var n;if(n=e?o.model:"","url"!=n&&"tel"!=n&&"mailto"!=n){if(d.url.hide(),d.tel.hide(),d.mailto.hide(),d.route.show(),window.Designer.getById(n)){var i=window.Designer.getById(n).get("routeViews",[]),a=o.$parent.component.getParentPage().get("routeViews",[]);if(i.length>1&&0==a.length){if(!o.viewsNeeded){var u=!1;o.views=[];for(var p=0;p<i.length;p++){var g=window.Designer.getById(i[p]);g.get("defaultPage","")==n&&(o.vals.view=i[p],u=!0),o.views.push({id:i[p],title:g.get("title")})}u||(o.vals.view=o.views[0].id),o.viewsNeeded=!0}}else o.viewsNeeded=!1,o.vals.view=""}else o.viewsNeeded=!1,o.vals.view="";c(),o.$parent.component.set("linkView",o.vals.view),l.$setViewValue(n),o.$eval(r.ngChange),"undefined"!=typeof t&&t(o.$parent.component,n)}else d.url.hide(),d.tel.hide(),d.mailto.hide(),o.vals.route_params=[],s&&d.route.hide(),d[n].show(),o.inputChange(n),o.$eval(r.ngChange),"undefined"!=typeof t&&t(o.$parent.component,n)},o.inputChange=function(e){var n="";switch(e){case"url":n=d.url.val();break;case"tel":n="tel:"+d.tel.val();break;case"mailto":n="mailto:"+d.mailto.val()}l.$setViewValue(n),o.$eval(r.ngChange),"undefined"!=typeof t&&t(o.$parent.component,n)},a.on("$destroy",function(){o.$destroy()})}}}]};a.directive("propertyRoute",d({getEmptyText:function(){return"Not linked"},getItems:function(e,t,n,o){var a=t.getPages(),r=[{value:"",text:"None"}];for(i=0;i<a.length;i++)p=a[i],p.get("url")===n.$viewValue&&!function(e){o(function(){$(select).val(e.get("url"))})}(p),0==p.get("abstract",!1)&&e.$parent.component.getParentPage().getId()!=p.getId()&&r.push({value:p.getId(),text:p.get("title")+" - "+p.get("url"),page:p,pageId:"("+p.getId()+")"});return 0==e.$parent.component.get("newProps",!1)&&(r.push({value:"url",text:"External URL"}),r.push({value:"tel",text:"Phone Number"}),r.push({value:"mailto",text:"Email Address"})),r}},function(e,t){e.getParentPage().updateChildLinks(),window.Designer.AppGraph.addLink(e)})).directive("propertyDefaultpage",s({getEmptyText:function(){return"Not linked"},getItems:function(e,t,n,o){var a=t.getPages(),r=[{value:"",text:"None"}];for(i=0;i<a.length;i++)p=a[i],p.get("url")===n.$viewValue&&!function(e){o(function(){$(select).val(e.get("url"))})}(p),0==p.get("abstract",!1)&&r.push({value:p.getId(),text:p.get("title")+" - "+p.get("url"),page:p,pageId:"("+p.getId()+")"});return r}},function(e,t){e.getParentPage().updateChildLinks(),window.Designer.AppGraph.addLink(e)})),a.directive("propertySize",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group full-number" style="height:55px;"><label for="">{{property.title}}<help-icon></help-icon></label><div style="float:right;width:200px;"><div style="inline-block;width:85px;float:left;"><input name="width" style="width:85px;text-align:left;" class="form-control light-blue-select" placeholder="" ng-model="sizeSettings.width" ng-focus="select($event)" ng-keydown="keyDown($event)" ng-change="updateVal()"></div><div style="inline-block;width:30px;float:left;padding-left:9px;padding-top:8px;"><i class="icon ion-close" style="color:#a8aeb7;"></i></div><div style="inline-block;width:85px;float:left;"><input name="height" style="width:85px;text-align:left;" class="form-control light-blue-select" placeholder="" ng-model="sizeSettings.height" ng-focus="select($event)" ng-keydown="keyDown($event)" ng-change="updateVal()"></div><span style="position:absolute;top:32px;left:129px;"><label>Width</label></span><span style="position:absolute;top:32px;left:245px;"><label>Height</label></span></div></div><div style="margin-left:105px;margin-bottom:5px;margin-top:10px;" ng-hide="property.hideFullWidth" class="checkbox"><label style="color:#333;font-weight:400;font-size:14px;"><input type="checkbox" ng-model="sizeSettings.fullWidth" ng-change="checkFullWidth();updateVal()">Make full width</label></div>',link:function(e,t,n,i){function o(e){return"38"==e.keyCode||"40"==e.keyCode?(e.target.select(),e.preventDefault(),!1):void 0}e.sizeSettings={};var a=angular.element(t[0].querySelector("input[name=width]")),r=angular.element(t[0].querySelector("input[name=height]"));e.checkFullWidth=function(){1==e.sizeSettings.fullWidth&&(e.sizeSettings.width="100%")},i.$render=function(){"undefined"!=typeof i.$viewValue?e.sizeSettings={width:String(i.$viewValue.width),height:String(i.$viewValue.height),fullWidth:Boolean(i.$viewValue.fullWidth)}:e.sizeSettings={width:e.property.defaultWidth||"100px",height:e.property.defaultHeight||"100px",fullWidth:!1}},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),e.updateVal=function(){"100%"!==e.sizeSettings.width&&(e.sizeSettings.fullWidth=!1),i.$setViewValue(angular.copy(e.sizeSettings))},getIncrement=function(e,t){var n=e.replace(/[^\d]+$/,""),i=e.replace(n,"");return parseInt(n)+t+i},e.keyDown=function(t){var n=null;"38"==t.keyCode&&(n=1),"40"==t.keyCode&&(n=-1),null!==n&&0==t.currentTarget.value.replace(/[^\d]+$/,"").replace(/\d+/,"").replace(/^\-{1}$/,"").length&&t.currentTarget.value.replace(/[^\d]+/,"").length>0&&(t.currentTarget.value=getIncrement(t.currentTarget.value,n),e.sizeSettings.width=a.val(),e.sizeSettings.height=r.val(),e.updateVal())},e.select=function(e){e.currentTarget.select()},t[0].querySelector("input[name=width]").addEventListener("keydown",o),t[0].querySelector("input[name=height]").addEventListener("keydown",o),t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyEditingSlide",["Plans","$rootScope",function(e,t){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" ng-class="{\'full-width\': property.fullwidth}" style="height:auto;"><label for="">{{property.title}}<help-icon></help-icon></label><select ng-model="currentSlide" ng-change="updateSlide()" class="form-control-borderless"><option value="{{slide.id}}" ng-selected="slide.id == currentSlide" ng-repeat="slide in slides">{{slide.properties.title.value}}</option></select></div>',link:function(e,t,n,i){var o=null;e.currentSlide="",i.$render=function(){o=e.$parent.component,o&&("slide2"==o.componentType&&(o=o.getParent()),e.slides=o.children,e.currentSlide=o.get("selectedSlide"),""==e.currentSlide&&e.slides.length>0&&(e.currentSlide=e.slides[0].getId()))},e.updateSlide=function(){""!=e.currentSlide&&e.currentSlide!=o.get("selectedSlide")&&window.Designer.selectById(e.currentSlide)},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyString",["PaywallModal","$rootScope","FeatureFence",function(e,t,n){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" ng-class="{\'full-width\': property.fullwidth}" style="height:auto;min-height:44px;"><label for="">{{property.title}}<help-icon></help-icon></label><input ng-hide="property.pro && !isPro" type="text" class="form-control" id="" placeholder="{{property.placeholder}}" value="{{property.value}}" pattern="^(?!(\\{\\{.+\\}\\})$).*$" title="This is invalid" /><span ng-if="property.pro && !isPro" class="badge" ng-click="openPaywall()" style="background-color:#4E8EF7;height: 18px;font-size: 11px;margin-left:5px;float:right;margin-top:10px;cursor:pointer;"><span class="ion-star" style="font-size: 11px;color:white;"></span> PRO</span><div ng-if="!stringValid" style="font-size:12px;color:darkred;margin-top:5px;">You cannot include Angular templating code { { and } }. Use <code>title</code> as a directive for title manipulation.</div></div>',
link:function(t,i,o,a){var r=angular.element(i[0].querySelector('input[type="text"]'));a.$render=function(){r.val(a.$viewValue)},a.$viewChangeListeners.push(function(){t.$eval(o.ngChange)}),t.stringValid=!0,r.on("keyup",function(){var e=r.val();if(t.property.noTemplating){if(-1!=e.indexOf("{{")&&-1!=e.indexOf("}}"))return void(t.stringValid=!1);t.stringValid=!0}t.$apply(function(){a.$setViewValue(e),t.property.onchange&&t.property.onchange()})}),i.on("$destroy",function(){t.$destroy()}),n.hasAccess("codeEditing",window.Designer.getProject().team_id)?t.isPro=!0:t.isPro=!1,t.openPaywall=function(){e.show("code-editing")}}}}]),a.directive("propertyTextlist",["Designer",function(e){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" ng-class="{\'auto\': property.autoheight, \'full-width\': property.fullwidth}"><label for="">Options<help-icon></help-icon></label><div ng-repeat="option in property.value.options" style="padding-bottom:10px;position:relative;"><input type="text" ng-change="saveChanges()" class="form-control" id="" placeholder="Option" ng-model="option.value" style="width:220px;float:none;"><button class="btn btn-danger" style="width: 18%;padding: 6px 0px 3px 0px;right: 0px;position: absolute;top:0px;min-height:32px;" ng-click="removeOption($index)"><span class="ion-trash-b" style="font-size: 20px;line-height: 20px;"><span></button></div><button class="btn btn-block btn-primary" ng-click="addOption()">Add Option</button></div>',link:function(t,n,i,o){function a(){("undefined"==typeof o.$viewValue.options.length||typeof o.$viewValue.options!=typeof[])&&o.$setViewValue({options:[]})}o.$render=function(){a()},o.$viewChangeListeners.push(function(){t.$eval(i.ngChange)}),t.saveChanges=function(){o.$setViewValue(o.$viewValue),t.$eval(i.ngChange),e.save()},t.removeOption=function(e){o.$viewValue.options.splice(e,1),t.saveChanges()},t.addOption=function(){a(),o.$viewValue.options.push({value:""}),t.saveChanges()},n.on("$destroy",function(){t.$destroy()})}}}]),a.directive("propertyTutorialVideo",["Tutorials",function(e){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" style="height:auto;padding:0px;"><center ng-click="openTutorial()"><span class="ion-social-youtube-outline"></span> Watch a tutorial</center></div>',link:function(t,n,i,o){n.on("$destroy",function(){t.$destroy()}),t.openTutorial=function(){e.show(t.property.tutorialid)}}}}]),a.directive("propertySlashurl",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><input type="url" class="form-control" id="" placeholder="{{property.placeholder}}" value="{{property.value}}"></div>',link:function(e,t,n,i){var o=angular.element(t[0].querySelector("input"));i.$render=function(){o.val(i.$viewValue)},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),o.on("blur keyup change",function(){var t=o.val();e.$apply(function(){0!==t.indexOf("/")&&(t="/"+t,o.val(t)),i.$setViewValue(t),window.Designer.AppGraph._save()})}),t.on("$destroy",function(){e.$destroy()})}}}]).directive("propertyUrl",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><input type="url" class="form-control" id="" placeholder="{{property.placeholder}}" value="{{property.value}}"></div>',link:function(e,t,n,i){var o=angular.element(t[0].querySelector("input"));i.$render=function(){o.val(i.$viewValue)},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),o.on("blur keyup change",function(){var t=o.val();e.$apply(function(){i.$setViewValue(t)})}),t.on("$destroy",function(){e.$destroy()})}}}]).directive("propertyUrlupload",[function(){return{restrict:"E",require:"?ngModel",template:'<div class="form-group" ng-class="{\'auto\': property.autoheight, \'full-width\': property.fullwidth}"><label for="" ng-if="property.title" ng-class="{\'force-title\': property.forcetitle}">{{property.title}}<help-icon></help-icon></label><button class="btn btn-primary btn-block" ng-click="uploadFile()" ng-if="!property.value && mode==\'upload\'">{{property.uploadText}}</button><div ng-if="property.value && mode==\'upload\'"><div class="form-control" style="float:none;"><div class="image-square" ng-style="{\'background-image\': \'url(\'+property.value+\')\'}"></div><span class="image-title">{{fileName}}</span><div class="image-remove ion-ios-trash-outline" ng-click="removeImage();"></div></div></div><input ng-show="mode==\'text\'" type="text" class="form-control" id="" placeholder="Enter a URL or Template Tag" value="{{property.value}}" style="float:none;" /><center style="color:#4E8EF7;margin-top:5px;cursor:pointer;" ng-click="toggleMode();" ng-if="mode==\'upload\'"><span class="ion-code-working"></span> Switch to text input</center><center style="color:#4E8EF7;margin-top:5px;cursor:pointer;" ng-click="toggleMode();" ng-if="mode==\'text\'"><span class="ion-code-working"></span> Switch to upload mode</center></div>',link:function(e,t,n,i){var o=angular.element(t[0].querySelector("input"));e.fileName="",e.mode="upload",i.$render=function(){o.val(i.$viewValue),""!==i.$viewValue&&-1==i.$viewValue.indexOf("https://s3.amazonaws.com/ionic-io-static/")&&(e.mode="text"),e.fileName=i.$viewValue.replace("https://s3.amazonaws.com/ionic-io-static/",""),e.fileName=e.fileName.replace(/^.+_/,"")},e.removeImage=function(){i.$setViewValue(""),e.fileName=""},e.toggleMode=function(){"upload"==e.mode?e.mode="text":e.mode="upload"},e.uploadFile=function(){filepicker.setKey("AabgSObTT8yIzUSh8zMNAz"),filepicker.pickAndStore({mimetype:"image/*",customCss:"https://creator.ionic.io/css/filepicker.css",location:"S3",services:["COMPUTER","GOOGLE_DRIVE","DROPBOX","BOX","URL","WEBCAM","IMAGE_SEARCH"]},{location:"S3"},function(t){t.length>0&&(i.$setViewValue("https://s3.amazonaws.com/ionic-io-static/"+t[0].key),e.fileName=i.$viewValue.replace("https://s3.amazonaws.com/ionic-io-static/",""),e.fileName=e.fileName.replace(/^.+_/,""))})},i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)}),o.on("blur keyup change",function(){var t=o.val();e.$apply(function(){i.$setViewValue(t)})}),t.on("$destroy",function(){e.$destroy()})}}}]),a.directive("propertyAndroidWebfont",a.Select2Property({options:[{id:"default",text:"Default (Android System Font)"},{id:"muli",text:"Muli"},{id:"lato",text:"Lato"},{id:"notosans",text:"Noto Sans"},{id:"raleway",text:"Raleway"},{id:"opensans",text:"Open Sans"},{id:"roboto",text:"Roboto"},{id:"montserrat",text:"Montserrat"},{id:"poppins",text:"Poppins"},{id:"crimsontext",text:"Crimson Text"},{id:"lora",text:"Lora"}],formatter:function(e){return'<div style="line-height:20px;" class="select2-font-'+e.id+'">'+e.text+"</div>"},formatterSelection:function(e){return'<div class="select2-font-'+e.id+'">'+e.text+"</div>"}})).directive("propertyIosWebfont",a.Select2Property({options:[{id:"default",text:"Default (iOS System Font)"},{id:"muli",text:"Muli"},{id:"lato",text:"Lato"},{id:"notosans",text:"Noto Sans"},{id:"raleway",text:"Raleway"},{id:"opensans",text:"Open Sans"},{id:"roboto",text:"Roboto"},{id:"montserrat",text:"Montserrat"},{id:"poppins",text:"Poppins"},{id:"crimsontext",text:"Crimson Text"},{id:"lora",text:"Lora"}],formatter:function(e){return'<div style="line-height:20px;" class="select2-font-'+e.id+'">'+e.text+"</div>"},formatterSelection:function(e){return'<div class="select2-font-'+e.id+'">'+e.text+"</div>"}})),a.directive("propertyFontWeight",["Designer","$timeout",function(e,t){return{restrict:"E",require:"?ngModel",template:'<div class="form-group"><label for="">{{property.title}}<help-icon></help-icon></label><select class="form-control-borderless small" ng-change="change()" ng-model="model.weight"><option ng-if="item.value!=\'\'" ng-repeat="item in items track by item.value" value="{{item.value}}" ng-selected="model.weight==item.value">{{item.text}}</option></select><div class="options-toggle-container options-weight"><div class="options-toggle-box left" ng-class="{\'on\': !model.italic}" ng-click="change(false);"><div class="alignment-icon not-italic"></div></div><div class="options-toggle-box right" ng-class="{\'on\': model.italic}" ng-click="change(true);"><div class="alignment-icon italic"></div></div></div>',link:function(e,t,n,i){angular.element(t[0].querySelector("select"));e.emptyText=e.property.emptyText||"Normal",e.hideEmpty=!e.property.hideEmpty,i.$render=function(){null===i.$viewValue&&(i.$setViewValue({weight:e.property["default"]||"400",italic:!1}),e.$eval(n.ngChange)),e.model=i.$viewValue,e.change=function(t){"undefined"==typeof t&&(t=e.model.italic),e.model.italic=t;var o,a=e.model.weight;o=a?e.model.weight:"",i.$setViewValue({weight:o,italic:t}),e.$eval(n.ngChange),"undefined"!=typeof changeFunc&&changeFunc(e.$parent.component,o)},e.items=[{value:"lighter",text:"200 - Extra Light"},{value:"300",text:"300 - Light"},{value:"400",text:"400 - Normal"},{value:"500",text:"500 - Medium"},{value:"600",text:"600 - Semi Bold"}]},t.on("$destroy",function(){e.$destroy()})}}}]),a.run(["$templateCache",function(e){}]).provider("Config",[function(){var e={};return{set:function(t,n){e[t]=n},init:function(t){e=t},get:function(t){return e[t]},$get:function(){return{set:function(t,n){return e[t]=n,n},get:function(t,n){return e[t]||n}}}}}]);var u="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",g=u.split(" ").map(function(e){return parseInt(e,16)});a.factory("$exceptionHandler",[function(){return function(e,t){if(!window.compiling)throw e;var n="",i="";n+='Exception: "'+e.toString()+'"\n',n+="Caused by: "+t+"\n";var o=e.message?"Message: "+e.message+"\n":"";i+=o;var a=e.fileName?"File Name: "+e.fileName+"\n":"";i+=a;var r=e.lineNumber?"Line Number: "+e.lineNumber+"\n":"";i+=r;var l=e.stack?"Stack Trace: "+e.stack+"\n":"";i+=l,i&&(n+=i),console.error(n),window.Stats.t("Error",{type:"save",message:n,ex_message:o,ex_fileName:a,ex_lineNumber:r,ex_stack:l}),window.StandardModal.hideModal(),window.StandardModal.show({message:n,template:"/tmpl/designer/error-saving-modal.tmpl.html",callback:function(){}}),window.compiling=!1}}]).factory("Designer",["$state","$rootScope","$timeout","Document","DocumentExporter","PageTemplates","DocumentRenderer","ComponentFactory","Stats","Action","Project","StandardModal","Tutorials","Features","PromptParameters","$q","$http","Config","Ionic2Exporter","IconSet",function(e,i,a,r,l,s,d,c,u,p,g,h,m,f,v,y,w,b,C,S){var D,x,P,T,k=!1,I=!1,E={},A=!1,M=null;i.previewLock=!1,i.track=function(e){u.t(e)};var F,L;window.StandardModal=h,window.Stats=u,p.register("cut",{perform:function(e){e.oldParent.removeChild(e.child,e.isQuiet)},revert:function(e){e.oldParent.insertChild(e.child,e.oldIndex)}}),p.register("paste",{perform:function(e){var t=e.child.clone();e.parent.appendChild(t),e.child=t,a(function(){B.select(t)},100)},revert:function(e){e.parent.removeChild(e.child)}});var B={$rootScope:i,mode:"design",upgrade:function(t){u.t(t),e.go("dashboard.upgrade")},doneSaving:function(){return 1==i.isSaveDebouncing?void(A=!0):void i.$emit("document.doneSaving")},_inner_save:function(t){try{if("undefined"==typeof t&&(t=!1),console.log("DESIGNER: SAVING",P),!P)return;if(P.starting_page="page10","undefined"==typeof d.$frameDocument&&!i.ignoreFrameDocument)return A=!0,void this.save();i.ignoreFrameDocument=!1;var a=Date.now();console.log("START COMPILE"),l.toSinglePageHTML(x).then(function(r){return console.log("END SINGLE PAGE COMPILE",Date.now()-a),1==i.isSaveDebouncing?void(A=!0):(a=Date.now(),void l.toMultiPageHTML(x).then(function(s){function d(){s.singleHTML=r,P.document=l.toJson(x,T),P.html=JSON.stringify(s),P.lock_session=window.sessionId,P.lock_user=""+i.user.id,P.force_save=t;var a=b.get("creator_api_url"),d=JSON.parse(JSON.stringify(P)),c=["document","html","lock_user","lock_session","app_icon_url"],u=o(c,M),p=n(JSON.sortify(u)),g=o(c,P),m=jsondiffpatch.diff(u,g);w.post(a+"/creator/"+P.app_id,{force_save:t,lock_timestamp:P.lock_timestamp,lock_user:P.lock_user,lock_session:P.lock_session,crc:p,delta:m}).then(function(e){P.lock_timestamp=e.data.lock_timestamp,P.last_modified=e.data.last_modified,d.lock_timestamp=e.data.lock_timestamp,d.last_modified=e.data.last_modified,M=d,B.doneSaving()},function(t){var n={multiple_windows:"It looks like you may have multiple tabs or windows with this project open, would you like this tab to take editing control?",other_user:"Another user may be <a href=''>editing</a> this app. Are you sure you would like to save these changes?",out_of_date:"You are working on an older version of this project. Please reload for the newest version."},o=n[t.data.reject||""];"undefined"!=typeof o&&("other_user"==t.data.reject&&(o='It looks like <img src="https://www.gravatar.com/avatar/'+md5(t.data.user.email)+'?s=64&d=identicon" style="height:28px;border-radius:50%;" /> <b>'+t.data.user.name+"</b> may be editing this project. Would you like to take over editing control? <i>This will kick "+t.data.user.name+" out of the project.</i>"),"out_of_date"==t.data.reject?(h.hideModal(),h.show({message:o,title:"Project out of date",cancel:"Go Back to Dashboard",warning:"Reload Project",template:"/tmpl/designer/unlock-modal.tmpl.html",height:"275px",callback:function(t){"warning"===t?location.reload():e.go("dashboard")}})):(h.hideModal(),h.show({message:o,title:"Project is already being edited",cancel:"Go Back to Dashboard",warning:"Take over Editing",template:"/tmpl/designer/unlock-modal.tmpl.html",height:"275px",callback:function(t){"warning"===t?w.post("/api/v1/creator/"+P.app_id+"/unlock",{lock_session:window.sessionId,lock_user:""+i.user.id,force_unlock:!0}).then(function(){location.reload()}):e.go("dashboard")}}))),i.$emit("document.saveError")})}return 1==i.isSaveDebouncing?void(A=!0):(i.previewLock=!1,i.$emit("previewlock.end"),console.log("END MULTI PAGE COMPILE",Date.now()-a),void(f.check("ionic2")?C.generateProjectJSON(x).then(function(e){T.ionic2json=e,d()},function(){i.$emit("document.saveError")}):d()))},function(e){i.$emit("document.saveError")}))},function(e){i.$emit("document.saveError")})}catch(r){console.error("SAVING ERROR",r),h.hideModal(),h.show({message:r.toString(),template:"/tmpl/designer/error-saving-modal.tmpl.html",callback:function(){}})}},debounce_save:_.debounce(function(){if("saved"!=i.saveCode&&"error"!=i.saveCode){if(!A)return void B.save();A=!1}i.previewLock=!0,i.$emit("document.saving"),i.isSaveDebouncing=!1,B._inner_save()},500),save:function(){i.isSaveDebouncing=!0,B.debounce_save()},send:function(e,t){i.$emit(e,t)},saveDelayed:function(){return B.save()},undo:function(){p.undo()},redo:function(){p.redo()},_pushAction:function(e){p.push(e)},editLock:function(){I=!0},releaseEditLock:function(){I=!1},isEditing:function(){return I},loadProject:function(t){i.projectLoaded=!1,u.t("Load Project",{id:t.app_id}),e.go("app",{appId:t.app_id},{reload:!0})},setProject:function(e){function n(){w.post("/api/v1/creator/"+e.app_id+"/unlock",{lock_session:window.sessionId,lock_user:""+i.user.id}),window.onbeforeunload=function(){}}M=JSON.parse(JSON.stringify(e)),delete M.force_save,delete M.starting_page,console.info("PREVIOUSLY SAVED PROJECT",M),window.sessionId=t(),window.dontUnlock=!1,window.onbeforeunload=function(){return n(),0!=i.isSaveDebouncing&&"saved"!=i.saveCode&&"error"!=i.saveCode?"Your app is still saving, are you sure you want to leave and lose your changes?":void 0},i.$on("$stateChangeSuccess",function(e,t,i,o,a){n(),window.onbeforeunload=function(){}}),P=e,this.newDocument(P.app_id),x.fromJson(P.document),T=x.extraFromJson(P.document);var o=!1;T.fromTemplate&&(o=!0,"sidemenutabs"==T.fromTemplate?(this.addNewTemplatedPage("ionic_tabs",!1),this.addNewTemplatedPage("ionic_root_sidemenu",!1)):(this.addNewTemplatedPage(T.fromTemplate,!1),"ionic_blank"==T.fromTemplate&&this.setExtra("startingPage","page1")),this.setExtra("fromTemplate",null)),x.getPageContainer()&&x.getPageContainer().children.length>0&&this.setActivePageId(x.getPage(0).getId());try{JSON.parse(P.html)}catch(a){}f.init(x.getProperty("v")),f.check("ionic2")&&o&&(h.hideModal(),h.show({template:"/tmpl/designer/ionic2-alpha-modal.html",height:"275px"})),f.check("ionic2")?S.load("ionicons3"):S.load("ionicons"),this.project_version=x.getProperty("v"),"undefined"!=typeof T.device?(T.device.scaleTransition="0s ease out",this.Device.settings=T.device):this.Device.settings=angular.copy(this.Device.defaultSettings),"undefined"!=typeof T.themes?this.Themes.settings=T.themes:this.Themes.settings=angular.copy(this.Themes.defaultSettings),"undefined"!=typeof T.coding?this.Coding.settings=T.coding:(this.Coding.settings=angular.copy(this.Coding.defaultSettings),this.Coding._save()),i.$emit("colorswatch.update"),i.$emit("newcss"),i.projectLoaded=!0},getProject:function(){return P},newDocument:function(e){x=new r(e),E={},E[x.getRoot().getId()]=x.getRoot()},init:function(){this.deselect(),k||(k=!0,i.$on("addpage",function(e,t){B.AppGraph.updatePageRoutes()}),i.$on("document.modified",function(e){B.saveDelayed()}),i.$on("document.propertyChanged",function(e){B.saveDelayed()}),i.$on("component.childAdded",function(e,t,n){E[t.getId()]=t,c.markId(t.getId())}),i.$on("component.childRemove",function(e,t,n){E[t.getId()]=void 0,delete E[t.getId()]}),i.$on("component.childReplaced",function(e,t,n){E[n.getId()]=n}),i.$on("component.registerChild",function(e,t,n){E[t.getId()]=t}),i.$on("colorswatch.update",function(e){B.Themes.colorSwatchUpdate()}),i.$on("page.newTitle",function(e,t){var n=B.Coding.getContents(t.pageId+"-HTML");if(n.length>0){var o=B.Coding.settings.files.find(function(e){return e.id==t.pageId+"-HTML"});o.contents=o.contents.replace(/(<ion-view[^\>]*title\s*=\s*")([^"]*)("[^\>]*>)/,"$1"+t.pageTitle+"$3"),o.unsavedContents=o.unsavedContents.replace(/(<ion-view[^\>]*title\s*=\s*")([^"]*)("[^\>]*>)/,"$1"+t.pageTitle+"$3"),B.Coding._save(),B.Coding.settings.currentlyEditing==t.pageId+"-HTML"&&i.$emit("editor.reloadContents",{pageId:t.pageId+"-HTML"})}}))},setMode:function(e,t,n){function o(){if(t===!1){var n=x.getPageById(D).get("parameters",[]).filter(function(e){return""==e.defaultForPreview.trim()}).length;0==n&&(this.mode=e,1==B.Coding.settings.hasBeenSaved&&u.t("Preview After Code Save"),i.$emit("designer.modeChanged",e))}else this.mode=e,1==B.Coding.settings.hasBeenSaved&&u.t("Preview After Code Save"),i.$emit("designer.modeChanged",e)}"design"==e?(this.mode=e,i.$emit("designer.modeChanged",e)):"preview"==e&&(1!=B.Coding.hasUnsavedCode()||n?o.call(this):h.show({message:"You have unsaved changes in your code editor. Save all files now?",title:"Unsaved Changes",cancel:"No",ok:"Yes",height:"240px",callback:function(t){"ok"===t?(B.Coding.saveAllFiles(),B.setMode(e)):"cancel"===t&&B.setMode(e,null,!0)}}))},getMode:function(){return this.mode},"export":function(){l.toJson(x,T)},addPage:function(){return u.t("Add Page"),x.addPage()},getPageDomFromRoute:function(e){if(""!=e){for(var t=this.getPages(),n=0;n<t.length;n++)if(t[n].get("url")==e)return d.renderAsHtml(t[n]);return console.error("No page found for route"),""}},addNewTemplatedPage:function(e,t){var n=y.defer(),i=this;("undefined"==typeof t||t)&&u.t("Add Page",{template:e});var o=s.get(e);return console.log("Adding from template info",o),c.createFromTemplate(o.url,i).then(function(e){console.log("Created child",e),p.exec({action:"appendChild",parent:x.getPageContainer(),child:e}),i.AppGraph._save(),i.setActivePageId(e.getId()),i.selectById(e.getId()),n.resolve(e)},function(e){console.error("Unable to create new child",e)}),n.promise},removePage:function(e){return x.removePage(e)},getPages:function(){return x.getPages()},getDocument:function(e){return x||(x=new r(e),E[x.getRoot().getId()]=x.getRoot()),x},onPageNavigation:function(e){var t,n=this.getPages();for(t=0;t<n.length;t++)if(n[t].get("url")===e)return console.log("Navigating to page",n[t]),this.setActivePageId(n[t].getId()),!1},setActivePageToFirst:function(e){var t=x.getPageContainer();if(!t)return null;var n=x.getPageContainer().children[0];n?(D=n.getId(),this.select(n)):this.addNewTemplatedPage("ionic_blank")},setActivePageId:function(e,t){console.info("SETTING ACTIVE PAGE",e),i.$emit("activepage",{newid:e,oldid:D}),D=e},getActivePageId:function(){return D},getActivePage:function(){return x&&D?x.getPageContainer().findChild(D):void 0},getPageById:function(e){return x.getPageById(e)},appendTypeToActive:function(e){var t,n=this.selectedComponent;n||(n=this.getActivePage()),n&&(t=c.create(e),n.appendChild(t))},selectById:function(e){console.log("Selecting",e);var t=E[e];t?this.select(t):console.error("No component found by id",e),a(function(){})},select:function(e){"undefined"!=typeof e&&null!==e&&(this.selectedComponent=e,this.selectedComponent.onSelect(e),i.$emit("designer.selected",e))},deselect:function(){var e=this.selectedComponent;this.selectedComponent=null,e&&i.$emit("designer.deselected",e)},getSelectedComponent:function(){return this.selectedComponent},getById:function(e){var t=E[e];if(t)return t},getComponentMap:function(){return E},removeSelectedComponent:function(e){if(this.selectedComponent&&(e||this.selectedComponent.canDelete!==!1&&this.selectedComponent.showSelectControls!==!1)){var t=this.selectedComponent.getParent();this.removeComponent(this.selectedComponent);for(var n=this.getPages(),o=0;o<n.length;o++)if(""!=n[o].get("parentState","")){var t=Designer.getById(n[o].get("parentState"));("undefined"==typeof t||null===t.parent||t.id==this.selectedComponent.id)&&(n[o].set("parentState",""),n[o].set("parentView",""))}if(this.selectedComponent&&"page"==this.selectedComponent.type){if(i.$emit("removepage",{id:this.selectedComponent.getId()}),Designer.Coding.removeFile(this.selectedComponent.getId()),Designer.Coding.removeFile(this.selectedComponent.getId()+"-HTML"),""!=this.selectedComponent.get("parentView","")){for(var t=Designer.getById(this.selectedComponent.get("parentView","")),a=t.get("pages"),r=[],o=0;o<a.pages.length;o++)a.pages[o].id!=this.selectedComponent.id&&r.push(a.pages[o]);t.set("pages",{pages:r})}this.deselect(),this.setActivePageToFirst(!0)}else this.select(t)}},removeComponent:function(e){p.exec({action:"removeChild",child:e,oldParent:e.parent,oldIndex:e.getIndex()})},duplicate:function(){if(this.selectedComponent&&this.selectedComponent.canDuplicate!==!1){var e=this.selectedComponent.clone(),t=this.selectedComponent.getIndex();p.exec({action:"insertChild",parent:this.selectedComponent.parent,child:e,index:t+1});var n=this;a(function(){n.select(e)})}},copy:function(){this.selectedComponent&&this.selectedComponent.canDuplicate!==!1&&(L=null,F=this.selectedComponent)},cut:function(){var e=this;if(this.selectedComponent&&this.selectedComponent.canDuplicate!==!1){F=null,L=this.selectedComponent;var t=L.parent;p.exec({action:"cut",child:L,oldParent:L.parent,oldIndex:L.getIndex()}),a(function(){e.select(t)},100)}},paste:function(){var e=this.selectedComponent,t=F||L;if(e&&t)do{if(e.acceptsChild(t))return void p.exec({action:"paste",parent:e,child:t});e=e.parent}while(e)},setExtra:function(e,t){T[e]=t,i.$emit("document.modified")},getExtra:function(e,t){return"undefined"==typeof T[e]?t:T[e]},featureCheck:function(e){return f.check(e)},openTutorial:function(e){m.show(e)},Themes:{settings:{custom_scss_text:"",custom_scss_variables:{},headerBackgroundTheme:"stable",sideMenuHeaderBackgroundTheme:"stable",linkTheme:"positive",pageBackgroundColor:"#FFFFFF",textColor:"#333333",version:"1",validCompiledCSS:!1,usingCustomStyles:!1,iosFont:"default",androidFont:"default",fontList:[],scssCursorPosition:{row:0,column:0},section:"theme"},defaultSettings:{custom_scss_text:"",custom_scss_variables:{},headerBackgroundTheme:"stable",sideMenuHeaderBackgroundTheme:"stable",linkTheme:"positive",pageBackgroundColor:"#FFFFFF",textColor:"#333333",version:"1",validCompiledCSS:!1,usingCustomStyles:!1,iosFont:"default",androidFont:"default",fontList:[],scssCursorPosition:{row:0,column:0},section:"theme"},fontFamily:{roboto:"Roboto, sans-serif",muli:"Muli, sans-serif",lato:"Lato, sans-serif",notosans:"'Noto Sans', sans-serif",raleway:"Raleway, sans-serif",opensans:"'Open Sans', sans-serif",lora:"Lora, serif",crimsontext:"'Crimson Text', serif",poppins:"'Poppins', sans-serif",montserrat:"Montserrat, sans-serif"},updateCursorPosition:function(e){B.Themes.settings.scssCursorPosition=e,B.Themes._save()},rememberSection:function(e){B.Themes.settings.section=e,B.Themes._save()},_setDefaultsIfNotExists:function(){Object.keys(B.Themes.defaultSettings).forEach(function(e){e in B.Themes.settings||(B.Themes.settings[e]=B.Themes.defaultSettings[e])})},extraCSS:function(){var e="";return B.Themes.settings.pageBackgroundColor&&"#FFFFFF"!=B.Themes.settings.pageBackgroundColor&&(e+="ion-view,.pane,.view{background-color:"+B.Themes.settings.pageBackgroundColor+";}"),B.Themes.settings.textColor&&"#333333"!=B.Themes.settings.textColor&&(e+="body{color:"+B.Themes.settings.textColor+";}"),B.Themes.settings.iosFont&&"default"!=B.Themes.settings.iosFont&&(e+="body.platform-ios{font-family:"+B.Themes.fontFamily[B.Themes.settings.iosFont]+";}",e+=".ionic-body.platform-ios{font-family:"+B.Themes.fontFamily[B.Themes.settings.iosFont]+";}"),B.Themes.settings.androidFont&&"default"!=B.Themes.settings.androidFont&&(e+="body.platform-android{font-family:"+B.Themes.fontFamily[B.Themes.settings.androidFont]+";}",e+=".ionic-body.platform-android{font-family:"+B.Themes.fontFamily[B.Themes.settings.androidFont]+";}"),(B.Themes.settings.androidFont&&"default"!=B.Themes.settings.androidFont||B.Themes.settings.iosFont&&"default"!=B.Themes.settings.iosFont)&&(e+="h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,.tab-item,input,button,select,textarea {font-family:inherit;}"),e},removeComments:function(e){return e=e.replace(/\n\s*\/\/[^\n]*\n/g,""),e=e.replace(/\/\*[^(?!\/\*)]*\*\//g,"")},updateSCSSText:function(e){B.Themes.settings.custom_scss_text=e,B.Themes._save()},updateSCSSVariable:function(e,t){null==t||void 0==t?delete B.Themes.settings.custom_scss_variables[e]:B.Themes.settings.custom_scss_variables[e]=t,B.Themes._save()},updateSetting:function(e,t){B.Themes.settings[e]=t,B.Themes._save()},hasCustomStyles:function(){var e=B.Themes.settings.custom_scss_text&&B.Themes.settings.custom_scss_text.trim().length>0,t=B.Themes.settings.custom_scss_variables&&Object.keys(B.Themes.settings.custom_scss_variables).length>0,n=B.Themes.settings.pageBackgroundColor&&"#FFFFFF"!=B.Themes.settings.pageBackgroundColor||B.Themes.settings.textColor&&"#333333"!=B.Themes.settings.textColor,i=B.Themes.settings.iosFont&&"default"!=B.Themes.settings.iosFont||B.Themes.settings.androidFont&&"default"!=B.Themes.settings.androidFont;return e||t||n||i},variableConflicts:function(e){var t={};for(var n in e){var i=e[n],o=new RegExp("\\$"+i.replace("$","")+"\\:([^;]+);"),a=B.Themes.removeComments(B.Themes.settings.custom_scss_text).match(o);a&&(t[i]=a[1].replace("!default","").replace("!important","").trim())}return t},generateFontList:function(){var e=[];"default"!=B.Themes.settings.iosFont&&e.push(B.Themes.settings.iosFont),"default"!=B.Themes.settings.androidFont&&-1===e.indexOf(B.Themes.settings.androidFont)&&e.push(B.Themes.settings.androidFont);for(var t in B.Themes.fontFamily)B.Themes.settings.custom_scss_text.toLowerCase().indexOf(t)>=0&&-1===e.indexOf(t)&&e.push(t);B.Themes.settings.fontList=e},colorSwatchUpdate:function(){var e=["light","stable","dark","positive","balanced","assertive","calm","energized","royal"],t={};for(index in e){var n=e[index];"$"+n in B.Themes.settings.custom_scss_variables&&(t[n]=B.Themes.settings.custom_scss_variables["$"+n]);var i=new RegExp("\\$"+n+"\\:([^;]+);"),o=B.Themes.removeComments(B.Themes.settings.custom_scss_text).match(i);o&&(t[n]=o[1].replace("!default","").replace("!important","").trim())}var a="";for(cr in t)a+=".color-square."+cr+"-bg { background-color:"+t[cr]+" !important; border-color:"+tinycolor(t[cr]).darken(10).toString()+" !important; }";$("#swatchCSS").remove(),$("head").append('<style id="swatchCSS">'+a+"</style>")},_save:function(){B.Themes._setDefaultsIfNotExists(),B.Themes.settings.version=String(parseInt(B.Themes.settings.version||"1")+1),B.Themes.generateFontList(),B.Themes.settings.usingCustomStyles=B.Themes.hasCustomStyles(),B.setExtra("themes",B.Themes.settings)}},Coding:{settings:{},defaultSettings:{open:!1,tab:"javascript",dragHeight:300,files:[{type:"js",id:"directives",contents:"angular.module('app.directives', [])\n\n.directive('blankDirective', [function(){\n\n}]);",unsavedContents:"angular.module('app.directives', [])\n\n.directive('blankDirective', [function(){\n\n}]);",filename:"directives.js"},{type:"js",id:"services",contents:"angular.module('app.services', [])\n\n.factory('BlankFactory', [function(){\n\n}])\n\n.service('BlankService', [function(){\n\n}]);",unsavedContents:"angular.module('app.services', [])\n\n.factory('BlankFactory', [function(){\n\n}])\n\n.service('BlankService', [function(){\n\n}]);",filename:"services.js"}],appDependencies:["app.directives","app.services"],scriptURLs:["js/directives.js","js/services.js"],cordovaPlugins:[],cordovaVariables:[],cursorPosition:{},currentlyEditing:null,hasBeenSaved:!1},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},addCordovaVariable:function(e,t,n){var i=B.Coding.settings.cordovaVariables.find(function(n){return n.plugin==e&&n.varName==t});i?i.varValue=n:B.Coding.settings.cordovaVariables.push({plugin:e,varName:t,varValue:n}),B.Coding._save()},removeCordovaVariable:function(e,t){var n=B.Coding.settings.cordovaVariables.findIndex(function(n){return n.plugin==e&&n.varName==t;
});n>=0&&B.Coding.settings.cordovaVariables.splice(n,1)},addCordovaPlugin:function(e){var t=B.Coding.settings.cordovaPlugins.indexOf(e);-1==t&&B.Coding.settings.cordovaPlugins.push(e),B.Coding._save()},removeCordovaPlugin:function(e){var t=B.Coding.settings.cordovaPlugins.indexOf(e);t>=0&&B.Coding.settings.cordovaPlugins.splice(t,1),B.Coding.settings.cordovaVariables=B.Coding.settings.cordovaVariables.filter(function(t){return t.plugin!==e}),B.Coding._save()},addExternalJS:function(e){var t=B.Coding.settings.scriptURLs.indexOf(e);console.log("CHECK",t),-1==t&&B.Coding.settings.scriptURLs.push(e),B.Coding._save()},removeExternalJS:function(e){var t=B.Coding.settings.scriptURLs.indexOf(e);t>=0&&B.Coding.settings.scriptURLs.splice(t,1),B.Coding._save()},renameExternalJS:function(e,t){var n=B.Coding.settings.scriptURLs.indexOf(e),i=B.Coding.settings.scriptURLs.indexOf(t);n>=0&&-1==i&&(B.Coding.settings.scriptURLs[n]=t),i>=0&&B.Coding.settings.scriptURLs.splice(n,1),B.Coding._save()},moveExternalJSUp:function(e){var t=B.Coding.settings.scriptURLs.indexOf(e);if(t>=1){var n=B.Coding.settings.scriptURLs[t-1];B.Coding.settings.scriptURLs[t-1]=B.Coding.settings.scriptURLs[t],B.Coding.settings.scriptURLs[t]=n}B.Coding._save()},moveExternalJSDown:function(e){var t=B.Coding.settings.scriptURLs.indexOf(e);if(t<B.Coding.settings.scriptURLs.length-1){var n=B.Coding.settings.scriptURLs[t+1];B.Coding.settings.scriptURLs[t+1]=B.Coding.settings.scriptURLs[t],B.Coding.settings.scriptURLs[t]=n}B.Coding._save()},addExternalDependency:function(e){var t=B.Coding.settings.appDependencies.indexOf(e);-1==t&&B.Coding.settings.appDependencies.push(e),B.Coding._save()},removeExternalDependency:function(e){var t=B.Coding.settings.appDependencies.indexOf(e);t>=0&&B.Coding.settings.appDependencies.splice(t,1),B.Coding._save()},getExternalJSList:function(e){return B.Coding.settings.scriptURLs.filter(function(t){return"undefined"==typeof e||0==e?!0:t.indexOf("//")>=0}).map(function(e){return'<script src="'+e+'"></script>'})},updateCursorPosition:function(e,t){B.Coding.settings.cursorPosition[e]=t,B.Coding._save()},setDragHeight:function(e){32>e||(B.Coding.settings.dragHeight=e,B.Coding._save())},toggle:function(){B.Coding.settings.open=!B.Coding.settings.open,B.Coding._save()},getContents:function(e){var t=B.Coding.settings.files.find(function(t){return t.id==e});return"undefined"==typeof t?"":t.contents},updateContents:function(e,t,n){var i=B.Coding.settings.files.find(function(t){return t.id==e});"undefined"!=typeof i&&(i.unsavedContents=t,n!==!1&&B.Coding._save())},saveFile:function(e,t){"undefined"==typeof t&&(t=!1);var n=B.Coding.settings.files.find(function(t){return t.id==e});if("undefined"!=typeof n){if("controller"!=n.type||t||B.AppGraph.updateTextLinks(n.id+"-CODE",n.unsavedContents),"htmlPage"==n.type&&!t){var o=n.unsavedContents.match(/<ion-view[^\>]*title\s*=\s*"([^"]*)"[^\>]*>/);o||(o=n.unsavedContents.match(/<ion-view[^\>]*title\s*=\s*'([^"]*)'[^\>]*>/)),o&&2==o.length&&(o=o[1]),B.getPageById(n.id.replace("-HTML","")).set("title",o),B.AppGraph.updateTextLinks(n.id,n.unsavedContents)}n.contents=n.unsavedContents,"htmlPage"==n.type&&i.$emit("component.redraw"),B.Coding._save()}},saveAllFiles:function(){B.Coding.settings.files.forEach(function(e){"controller"==e.type&&B.AppGraph.updateTextLinks(e.id+"-CODE",e.unsavedContents),"htmlPage"==e.type&&B.AppGraph.updateTextLinks(e.id,e.unsavedContents),e.contents=e.unsavedContents}),B.Coding._save()},hasUnsavedCode:function(){var e=B.Coding.settings.files.filter(function(e){return e.contents!==e.unsavedContents}).length;return e>0},updateFilename:function(e,t){B.Coding.settings.files.forEach(function(n){n.id==e&&(B.Coding.renameExternalJS("js/"+n.filename,"js/"+t),n.filename=t)}),B.Coding._save()},removeFile:function(e){var t,n=B.Coding.settings.files.findIndex(function(n){return n.id==e&&(t=n.filename),n.id==e});n>=0&&B.Coding.settings.files.splice(n,1),B.Coding.removeExternalJS("js/"+t),B.Coding._save()},updateSetting:function(e,t){B.Coding.settings[e]=t,B.Coding._save()},initController:function(e){return B.Coding.settings.files.push({type:"controller",id:e,contents:"// The following is the constructor function for this page's controller. See https://docs.angularjs.org/guide/controller\n// You can include any angular dependencies as parameters for this function\n// TIP: Access Route Parameters for your page via $stateParams.parameterName\nfunction ($scope, $stateParams) {\n\n\n}",unsavedContents:"// The following is the constructor function for this page's controller. See https://docs.angularjs.org/guide/controller\n// You can include any angular dependencies as parameters for this function\n// TIP: Access Route Parameters for your page via $stateParams.parameterName\nfunction ($scope, $stateParams) {\n\n\n}",filename:null}),B.Coding._save(),i.$emit("coding.initcontroller",e),B.Coding.settings.files[B.Coding.settings.files.length-1]},initGenericJS:function(e,t){return"undefined"==typeof t&&(t="/* !!! IMPORTANT: Rename \"mymodule\" below and add your module to Angular Modules above. */\n\nangular.module('mymodule', [])\n\n/* Ex.: \n\n.service('BlankService', [function(){\n\n}]);\n\n*/"),B.Coding.settings.files.push({type:"js",id:B.Coding.guid(),contents:t,unsavedContents:t,filename:e}),B.Coding.addExternalJS("js/"+e),B.Coding._save(),B.Coding.settings.files[B.Coding.settings.files.length-1]},initHTMLPage:function(e,t,n){var o='<ion-view title="Page">\n	<ion-content padding="true" class="has-header">\n\n	</ion-content>\n</ion-view>';B.Coding.settings.files.push({type:"htmlPage",id:t,contents:e||o,unsavedContents:e||o,filename:n}),B.Coding._save(),i.$emit("coding.inithtmlpage",t)},initSCSS:function(e){return B.Coding.settings.files.push({type:"scss",id:B.Coding.guid(),contents:"",unsavedContents:"",filename:e}),B.Coding._save(),B.Coding.settings.files[B.Coding.settings.files.length-1]},generateController:function(e){var t=B.Coding.settings.files.find(function(t){return t.id==e})||B.Coding.initController(e),n=new RegExp(/function\s*\(([^\)]*)\)/),i=t.contents.match(n),o=[];if(2==i.length){o=i[1].split(",").map(function(e){return e.trim()});var a=i[1].split(",").map(function(e){return"'"+e.trim()+"'"}).join(", ");return".controller('"+B.getPageById(e).get("idName")+"Ctrl', ["+a+", "+t.contents+"])"}return""},_setDefaultsIfNotExists:function(){var e=!1;Object.keys(B.Coding.defaultSettings).forEach(function(t){t in B.Coding.settings||(B.Coding.settings[t]=B.Coding.defaultSettings[t],e=!0)}),e&&B.Coding._save()},_forceDefaults:function(){Object.keys(B.Coding.defaultSettings).forEach(function(e){B.Coding.settings[e]=B.Coding.defaultSettings[e]}),B.Coding._save()},_save:function(){B.Coding._setDefaultsIfNotExists(),B.setExtra("coding",B.Coding.settings)}},Device:{settings:{type:"iphone",os:"ios",zoom:"1",scaleVal:1,orientation:"vertical",height:568,width:320,statusBar:!0,skin:!0,scaleTransition:"0s ease-out"},defaultSettings:{type:"iphone",os:"ios",zoom:"1",scaleVal:1,orientation:"vertical",height:568,width:320,statusBar:!0,skin:!0,scaleTransition:"0s ease-out"},deviceTypeOrder:["iphone","ipad","android","androidtablet"],deviceTypes:{iphone:{label:"iPhone",os:"ios",height:568,width:320},ipad:{label:"iPad",os:"ios",height:1024,width:768},android:{label:"Android Phone",os:"android",height:526,width:320},androidtablet:{label:"Android Tablet",os:"android",height:1024,width:768}},zoomLevels:{1:{label:"100%",scaleVal:1},2:{label:"90%",scaleVal:.9},3:{label:"75%",scaleVal:.75},4:{label:"50%",scaleVal:.5}},setScaleTransition:function(e){1==e?B.Device.settings.scaleTransition="0.25s ease-out":B.Device.settings.scaleTransition="0s ease-out"},_updateDimensions:function(){"vertical"==B.Device.settings.orientation?(B.Device.settings.height=B.Device.deviceTypes[B.Device.settings.type].height,B.Device.settings.width=B.Device.deviceTypes[B.Device.settings.type].width):"horizontal"==B.Device.settings.orientation&&(B.Device.settings.height=B.Device.deviceTypes[B.Device.settings.type].width,B.Device.settings.width=B.Device.deviceTypes[B.Device.settings.type].height),"android"==B.Device.settings.os&&1==B.Device.settings.statusBar&&(B.Device.settings.height-=20)},skinDimensions:{iphone:{urlVertical:"/img/iphone-skin.png",urlHorizontal:"/img/iphone-skin-horizontal.png",width:780,height:1540,viewportWidth:644,viewportHeight:1143,viewportVerticalStart:171,verticalCenterOffset:50},android:{urlVertical:"/img/android-skin.png",urlHorizontal:"/img/android-skin-horizontal.png",width:826,height:1600,viewportWidth:718,viewportHeight:1180,viewportVerticalStart:128,verticalCenterOffset:160},ipad:{urlVertical:"/img/ipad-skin.png",urlHorizontal:"/img/ipad-skin-horizontal.png",width:1740,height:2400,viewportWidth:1524,viewportHeight:2032,viewportVerticalStart:175,verticalCenterOffset:15},androidtablet:{urlVertical:"/img/android-tablet-skin.png",urlHorizontal:"/img/android-tablet-skin-horizontal.png",width:1716,height:2540,viewportWidth:1524,viewportHeight:2032,viewportVerticalStart:250,verticalCenterOffset:0}},_calculateSkinMetrics:function(e){return{pushDownPercentage:e.viewportVerticalStart/e.height,pushLeftPercentage:(e.width-e.viewportWidth)/2/e.width,widthMultiple:e.width/e.viewportWidth,heightMultiple:e.height/e.viewportHeight,verticalCenterOffsetPercentage:e.verticalCenterOffset/e.height}},_testStyle:function(){var e;e="android"==B.Device.settings.os&&1==B.Device.settings.statusBar?(B.Device.settings.height+20)*B.Device.settings.scaleVal:B.Device.settings.height*B.Device.settings.scaleVal;var t=B.Device.settings.width*B.Device.settings.scaleVal,n=document.getElementById("app-wrap"),i=n.offsetHeight,o=n.offsetWidth,a=B.Device._calculateSkinMetrics(B.Device.skinDimensions[B.Device.settings.type]),r=0,l=0,s="none";1==B.Device.settings.skin&&("vertical"==B.Device.settings.orientation?(r=a.widthMultiple*t,l=a.heightMultiple*e,s='url("'+B.Device.skinDimensions[B.Device.settings.type].urlVertical+'")'):"horizontal"==B.Device.settings.orientation&&(r=a.heightMultiple*t,l=a.widthMultiple*e,s='url("'+B.Device.skinDimensions[B.Device.settings.type].urlHorizontal+'")'));var d=0;d=Math.max(e+75,l+75)<i?parseInt((i-Math.max(e,l))/2):30;var c=0,u=o,p=B.Device.settings.scaleTransition;if(1==B.Device.settings.skin){var g="50% 0px";r>o?1==B.Device.settings.scaleVal||r>B.Device.settings.width?u=r+60:(u=B.Device.settings.width-(B.Device.settings.width-(r+60))/2,c=0-(B.Device.settings.width-(r+60))/2,g=Math.abs(c)+30+"px 0px"):B.Device.settings.width>o&&(u=B.Device.settings.width-(B.Device.settings.width-o)/2,c=0-(B.Device.settings.width-o)/2,g=Math.abs(c)+(o-r)/2+"px 0px")}else t>o?1==B.Device.settings.scaleVal?u=t+60:(u=t+(B.Device.settings.width-t)/2+30,c=0-(B.Device.settings.width-t)/2+30):B.Device.settings.width>o&&(c+=-1*(B.Device.settings.width-t)/2+(o-t)/2,u+=Math.abs(c));var h={height:e+"px",width:u-15+"px",overflow:"hidden",transition:p,"margin-top":d-5+"px","margin-bottom":d+"px","margin-left":c+"px","background-image":s};return 1==B.Device.settings.skin&&(h["background-repeat"]="no-repeat",h["background-position"]=g,h["background-size"]=r+"px "+(l+"px"),h.height=l,i>l+55?(h["margin-top"]=parseInt((i-l)/2)-5+"px",h["margin-bottom"]=parseInt((i-l)/2)+"px"):(h["margin-top"]="25px",h["margin-bottom"]="30px")),h},_appFrameStyle:function(){var e;e="android"==B.Device.settings.os&&1==B.Device.settings.statusBar?(B.Device.settings.height+20)*B.Device.settings.scaleVal:B.Device.settings.height*B.Device.settings.scaleVal;var t=B.Device.settings.width*B.Device.settings.scaleVal,n=document.getElementById("app-wrap"),i=(n.offsetHeight,n.offsetWidth),o=B.Device.settings.scaleTransition,a={height:B.Device.settings.height+"px",width:B.Device.settings.width+"px",transform:"scale3d("+B.Device.settings.scaleVal+","+B.Device.settings.scaleVal+",1)",transition:o,"transform-origin":"center top"};if(1==B.Device.settings.skin){var r,l,s,d=B.Device._calculateSkinMetrics(B.Device.skinDimensions[B.Device.settings.type]);if(s=0,"vertical"==B.Device.settings.orientation?(s=d.widthMultiple*t,l=d.heightMultiple*e,r=d.pushDownPercentage*l):"horizontal"==B.Device.settings.orientation&&(s=d.heightMultiple*t,l=d.widthMultiple*e,r=d.pushLeftPercentage*l),Math.max(B.Device.settings.skinWidth,t)>i,a["margin-top"]=r+"px","horizontal"==B.Device.settings.orientation){var c=d.verticalCenterOffsetPercentage*s;a["margin-left"]=0-c+"px"}}return a},setDevice:function(e){B.Device.settings.os==B.Device.deviceTypes[e].os?B.Device.setScaleTransition(!0):B.Device.setScaleTransition(!1),B.Device.settings.type=e,B.Device.settings.os=B.Device.deviceTypes[e].os,B.Device._updateDimensions(),B.Device._save(),i.$emit("designer.devicechange")},setZoom:function(e){var t=document.getElementById("app-wrap"),n=t.offsetWidth;B.Device.settings.width*B.Device.settings.scaleVal>n?B.Device.setScaleTransition(!1):B.Device.settings.width*B.Device.zoomLevels[e].scaleVal>n?B.Device.setScaleTransition(!1):B.Device.setScaleTransition(!0),B.Device.settings.zoom=e,B.Device.settings.scaleVal=B.Device.zoomLevels[e].scaleVal,B.Device._updateDimensions(),B.Device._save()},toggleOrientation:function(){B.Device.setScaleTransition(!0),B.Device.settings.orientation="vertical"==B.Device.settings.orientation?"horizontal":"vertical",B.Device._updateDimensions(),B.Device._save(),i.$emit("designer.orientationchange")},toggleStatusBar:function(){B.Device.settings.statusBar=!B.Device.settings.statusBar,B.Device._updateDimensions(),B.Device._save(),i.$emit("designer.statusbartoggle",B.Device.settings.statusBar)},toggleSkin:function(){B.Device.setScaleTransition(!1),B.Device.settings.skin=!B.Device.settings.skin,B.Device._save()},_save:function(){B.setExtra("device",B.Device.settings)}},AppGraph:{_defaultData:{entries:{},linkers:{}},getLastUpdated:function(){var e=B.AppGraph._load();return"undefined"==typeof e.last_updated?"none":e.last_updated},_save:function(e){B.featureCheck("automagic-navigation")&&("undefined"==typeof e&&(e=B.AppGraph._load()),e.last_updated=Date.now(),B.setExtra("appgraph",e))},_load:function(){return B.getExtra("appgraph",angular.copy(B.AppGraph._defaultData))},_ensureEntry:function(e,t){"undefined"==typeof t.entries[e]&&(t.entries[e]={from:{},to:{}})},_getID:function(e){return"string"==typeof e?e:e.id},updatePageRoutes:function(){function e(e,t,n){function i(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}return e.replace(new RegExp(i(t),"g"),n)}function t(t){var o=t.get("oldUISref"),a=t.getUISref();if(n.pageRoutes.byRoute[a]=t.id,n.pageRoutes.byID[t.id]=a,o!=a){if(""!==o){var r=n.pageRoutes.textTo[o];"undefined"==typeof r&&(r=[]),n.pageRoutes.textTo[a]=[];for(var l=0;l<r.length;l++){var s=r[l];if(n.pageRoutes.textTo[a].push(s),n.pageRoutes.textFrom[s][n.pageRoutes.textFrom[s].indexOf(o)]=a,s.indexOf("-CODE")>-1||s.indexOf("-HTML")>-1){var d=s.replace("-CODE",""),c=B.Coding.getContents(d);c=e(c,'"'+o+'"','"'+a+'"'),c=e(c,"'"+o+"'","'"+a+"'"),B.Coding.updateContents(d,c),B.Coding.saveFile(d,!0),i.$emit("controller.contentschanged",{id:d,contents:c})}else{var u=B.getById(s);if("undefined"!=typeof u){var p=u.get("content");p=e(p,'"'+o+'"','"'+a+'"'),p=e(p,"'"+o+"'","'"+a+"'"),u.set("content",p)}else n=B.AppGraph.removeLink(s,n)}}n.pageRoutes.textTo[o]=null,delete n.pageRoutes.textTo[o]}t.set("oldUISref",a)}}if(B.featureCheck("automagic-navigation")){var n=B.AppGraph._load();"undefined"==typeof n.pageRoutes&&(n.pageRoutes={byRoute:{},byID:{},textTo:{},textFrom:{}});var o=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0===+e?"":0==t?e.toLowerCase():e.toUpperCase()})},a=function(e){for(var t=[],n={},i=0;i<e.length;i++){s=e[i];var a=o(s.get("title",""));a=a.replace(/\W/g,""),""==a&&(a=s.id),t.indexOf(a)>-1?(n[a]++,a=a+""+n[a]):(t.push(a),n[a]=1),s.set("idName",a)}},r=B.getPages();a(r),n.pageRoutes.byRoute={},n.pageRoutes.byID={};for(var l=0;l<r.length;l++){var s=r[l];s.get("abstract")||t(s)}return B.AppGraph._save(n),n}},updateTextLinks:function(e,t){function n(){i=B.AppGraph.removeLink(e,i),i=B.AppGraph.addLink(o,i.pageRoutes.byRoute[l],e+"-"+i.pageRoutes.byRoute[l]),r.push(l),"undefined"==typeof i.pageRoutes.textTo[l]&&(i.pageRoutes.textTo[l]=[]),i.pageRoutes.textTo[l].push(e)}if(B.featureCheck("automagic-navigation")&&e){var i=B.AppGraph._load();if("undefined"==typeof i.pageRoutes&&(i=B.AppGraph.updatePageRoutes()),e.indexOf("-CODE")>-1||e.indexOf("-HTML")>-1)var o=e.replace("-CODE","").replace("-HTML","");else var o=B.getById(e).getParentPage().id;var a=i.pageRoutes.textFrom[e];"undefined"==typeof a&&(a=[]);var r=[];for(var l in i.pageRoutes.byRoute)a.indexOf(l)>-1?-1==t.indexOf('"'+l+'"')&&-1==t.indexOf("'"+l+"'")?(i=B.AppGraph.removeLink(e+"-"+i.pageRoutes.byRoute[l],i),i.pageRoutes.textTo[l].splice(e,1)):(i.linkers[e+"-"+i.pageRoutes.byRoute[l]]||n(),r.push(l)):(t.indexOf('"'+l+'"')>-1||t.indexOf("'"+l+"'")>-1)&&n();i.pageRoutes.textFrom[e]=r,i=B.AppGraph.updatePageRoutes(),B.AppGraph._save(i)}},addLink:function(e,t,n){if(B.featureCheck("automagic-navigation")){var i=B.AppGraph._load();if("undefined"==typeof t&&"undefined"==typeof n&&(n=e,e=n.getParentPage(),t=n.get("link",""),def=n.get("defaultPage",""),!B.getById(t))){if(!B.getById(def))return B.AppGraph.removeLink(n),i;t=def}var o=B.AppGraph._getID(e),a=B.AppGraph._getID(t),r=B.AppGraph._getID(n);B.AppGraph._ensureEntry(o,i),B.AppGraph._ensureEntry(a,i),B.AppGraph.removeLink(r,i);var l={from:o,to:a,linker:r};return i.entries[o].to[a+"-"+r]=l,i.entries[a].from[o+"-"+r]=l,i.linkers[r]={from:o,to:a},B.AppGraph._save(i),i}},removeLink:function(e,t){if(B.featureCheck("automagic-navigation")){"undefined"==typeof t&&(t=B.AppGraph._load());var n=B.AppGraph._getID(e);if(!t.linkers[n])return t;var i=t.linkers[n].from,o=t.linkers[n].to;if(delete t.entries[i].to[o+"-"+n],delete t.entries[o].from[i+"-"+n],delete t.linkers[n],n.indexOf("-CODE")>-1||n.indexOf("-HTML")>-1||0==n.indexOf("html")){var a=t.pageRoutes.textFrom[n];if("undefined"!=typeof a){for(var r=0;r<a.length;r++)"undefined"!=typeof t.pageRoutes.textTo[a[r]]&&t.pageRoutes.textTo[a[r]].splice(n,1);delete t.pageRoutes.textFrom[n]}}return B.AppGraph._save(t),t}},removePage:function(e){if(B.featureCheck("automagic-navigation")){var t=B.AppGraph._load(),n=B.AppGraph._getID(e);if(i.$emit("removepage",{id:n}),Designer.Coding.removeFile(n),Designer.Coding.removeFile(n+"-HTML"),"undefined"!=typeof t.entries[n])for(var o in t.entries[n].from){var a=t.entries[n].from[o].linker;B.AppGraph.removeLink(a,t),"undefined"!=typeof linker&&linker.set("link","")}B.AppGraph.updatePageRoutes()}}}};return window.Designer=B,B}]),a.factory("DragHandler",["$rootScope","ComponentTypes",function(e,t){var n,i,o=new Image;o.height=50,o.width=90;var a=t.getSortedInstances();for(var r in a)for(var l=a[r],s=0;s<l.length;s++){var d=new Image;d.src="/img/component-drag-"+l[s].type+".png"}var c=function(e){n=$(e.target).closest("li"),n.data("componentType")&&(o.src="/img/component-drag-"+n.data("componentType")+".png")},u=function(t){var n=$(t.target).closest("li");t.dataTransfer.setDragImage&&t.target.dataset.componentType&&t.dataTransfer.setDragImage(o,90,50),t.dataTransfer.effectAllowed="copy",t.dataTransfer.dropEffect="copy",t.dataTransfer.setData("text/plain",n.data("componentType")),i={type:n.data("componentType")},e.$emit("drag.start",t)},p=function(t){e.$emit("drag.end",t)};return{setElement:function(e){n=e[0],n.addEventListener("mousedown",c,!1),n.addEventListener("touchstart",c,!1),n.addEventListener("dragstart",u,!1),n.addEventListener("dragend",p,!1)},getActiveDrag:function(){return i}}}]),a.factory("FrameCoords",["DOM",function(e){return{getPoint:function(e,t,n){return[t,n]}}}]).factory("DropHandler",["Designer","DocumentRenderer","DragHandler","FrameCoords","Config","DOM","Action","$rootScope","$timeout","$interval","Stats",function(e,t,n,i,o,a,r,l,s,d,c){return function(u){var p,g,h,m,f,v,y,w,b,C,S,D,x,P,T,k,I,_,E,A,M,F,L,B=!1,j=!1,H=function(e,t){E=!0,A=[t.pageX,t.pageY],M=e,e.startResize(t)},R=function(t){if(E&&A&&M){var n=(t.pageX-A[0],t.pageY-A[1]);M.canResizeY&&!M.canResizeX&&M.resize(0,n),ie(M.getId()),e.save()}},V=function(e){M&&M.commitResize()},N=function(){f&&f.parentNode&&f.parentNode.removeChild(f),v&&v.parentNode&&v.parentNode&&v.parentNode.removeChild(v),v=null},U=function(t){var n;if(!t&&b&&B){n=b.getRendered();var n=b.getRendered();n.classList.remove("ic-dragging"),D&&(n.style.width=D.width,n.style.height=D.height,n.style.zIndex=D.zIndex),n.style.webkitTransform=n.style.transform=""}else t||N();e.getSelectedComponent()&&oe(e.getSelectedComponent().getId()),b=null,dragStartPoint=null,C=null,S=null,v=null,h=null,B=!1},O=function(e){var t;if(!e)return null;do e.getAttribute&&(t=e.getAttribute("data-componentid")),e=e.parentNode;while(!t&&e);return t},q=function(t,n){var i=e.getSelectedComponent(),o=e.getById(O(t));return o?i&&o.isChildOf(i)?i:o:void 0},z=function(t,n,i){var o=O(t);if(!o)return console.error("No such component found for the given node."),null;var a=e.getById(o);if(!a)return console.error("No such component found for the given node."),null;for(;a;){if(a.acceptsChild(n)&&(!i||a.getRendered()!==i))return a;a=a.parent}},G=function(e){return p.querySelector('[data-componentid="'+e+'"]')},W=function(n){var i,o=e.getDocument(),a=o.createComponent(n,!0,!0,!0);return i=t.renderChildTree(a,null,!0),i.classList.add("ic-placeholder-component"),i},J=function(){x&&(x.classList.remove("ic-select-remove"),$(x).detach())},Y=function(t){var n=$('<div class="ic-select-box"><div><div class="control-container"><a class="select-duplicate" href="#"></a><a class="select-remove" href="#"></a></div></div></div>');return t.canResizeY&&!t.canResizeX&&$(n.children()[0]).append('<div class="ic-drag-y"></div>'),n.on("mousedown",".ic-drag-y, .ic-drag-x, .ic-drag-xy",function(e){return H(t,e),!1}),n.on("mousemove",function(e){e.target.classList.contains("select-remove")?n.addClass("ic-select-remove"):n.removeClass("ic-select-remove"),e.target.classList.contains("select-duplicate")?n.addClass("ic-select-duplicate"):n.removeClass("ic-select-duplicate")}),n.on("mouseleave mouseout",function(){n.removeClass("ic-select-remove"),n.removeClass("ic-select-duplicate")}),n.find(".select-remove").on("click",function(t){e.removeSelectedComponent(),J()}),n.find(".select-duplicate").on("click",function(t){e.duplicate()}),n[0]},K=function(e,t,n,i){f&&f.parentNode&&f.parentNode.removeChild(f),f&&y===t||(f=W(t),y=t);var o=e.$rendered,r=e.getRenderedChildren(),l=o.querySelector(".ic-over");l&&l.classList.remove("ic-over"),o!==f&&(e.$rendered.classList.add("ic-over"),m=a.getIndexAtPoint(r,n,i),0>m?e.getRenderedTarget().appendChild(f):e.getRenderedTarget().insertBefore(f,r[m]))},X=function(){f&&f.parentNode&&f.parentNode.removeChild(f)},Z=function(e,t,n,i){v||(v=$(t.$rendered).clone(!0)[0],v.classList.add("ic-placeholder-component"));var o=e.$rendered,r=e.getRenderedChildren(),l=o.querySelector(".ic-over");l&&l.classList.remove("ic-over"),o!==v&&(e.$rendered.classList.add("ic-over"),$(v).detach(),m=a.getIndexAtPoint(r,n,i),0>m?e.getRenderedTarget().appendChild(v):e.getRenderedTarget().insertBefore(v,r[m]))},Q=function(t,n){var i=e.getDocument();if(!t)return void console.error("No active container to drop into");var o=i.createComponent(n,!0);c.t("Added Component",{type:n}),0>m?r.exec({action:"appendChild",parent:t,child:o}):r.exec({action:"insertChild",parent:t,child:o,index:m}),l.$emit("component.dropped",o),setTimeout(function(){oe(o.getId())},250),o.commitChildren()},ee=function(){var e=$('<div class="ic-hover-box"></div></div>');return e[0]},te=function(){I=null,_=null,P&&P.parentNode&&(P.classList.remove("active"),P.parentNode.removeChild(P))},ne=function(e,t){var n=e;"undefined"!=typeof t.icElement&&(n=t.icElement(e));var i=n.getBoundingClientRect();P||(P=ee()),e!==T&&(P.parentNode?(P.parentNode.removeChild(P),e.ownerDocument.body.appendChild(P)):e.ownerDocument.body.appendChild(P),P.classList.remove("active"),T=e),s.cancel(k),k=s(function(){P.classList.add("active")},10),P.style.width=i.width+"px",P.style.height=i.height+"px",P.style.webkitTransform=P.style.transform="translate3d("+i.left+"px, "+i.top+"px, 0)"},ie=function(t){s(function(){var n=e.getById(t),i=G(t);if(i){var o=p.querySelector(".ic-selected");o&&o.classList.remove("ic-selected"),i.classList.add("ic-selected");var a=i;"undefined"!=typeof n.icElement&&(a=n.icElement(i));var r=a.getBoundingClientRect();x&&x.parentNode&&x.parentNode.removeChild(x),x=Y(n),i.ownerDocument.body.appendChild(x),n.canDelete&&n.showSelectControls?x.classList.add("ic-select-box-can-delete"):x.classList.remove("ic-select-box-can-delete"),x.style.width=r.width+"px",x.style.height=r.height+"px",x.style.webkitTransform=x.style.transform="translate3d("+r.left+"px, "+r.top+"px, 0)"}},10)},oe=function(t){if(t&&!F){var n=e.getById(t);n&&n.canSelect&&(e.select(n),ie(t))}},ae=function(){J()},re=function(e,t){var n,i;b=t,i=t.getRendered(),i&&(n=i.getBoundingClientRect(),C=[n.left-e.pageX,n.top-e.pageY],dragStartPoint=[e.pageX,e.pageY])},le=function(e){if(b){B=!0,te(),ae();var t=b.getRendered(),n=t.getBoundingClientRect();point=[e.pageX+C[0],e.pageY+C[1]],Z(b.parent,b,point[0],point[1]);var i=e.target.ownerDocument,o=$(t).detach();o.appendTo(i.body),t.classList.add("ic-dragging"),D={width:t.style.width,height:t.style.height,zIndex:t.style.zIndex},t.style.width=n.width+"px",t.style.height=n.height+"px",t.style.zIndex=10,t.style.webkitTransform=t.style.transform="translate3d("+point[0]+"px, "+point[1]+"px, 0)"}},se=function(e){if(b){var t=b.getRendered();S||(S=[e.pageX,e.pageY]);var n=[e.pageX+C[0],e.pageY+C[1]],i=e.pageX-dragStartPoint[0],r=e.pageY-dragStartPoint[1],l=Math.sqrt(i*i+r*r);if(!w&&l>o.get("drag_min_distance",7))le(e);else if(!w)return;w=!0,n=[e.pageX+C[0],e.pageY+C[1]],t.style.webkitTransform=t.style.transform="translate3d("+n[0]+"px, "+n[1]+"px, 0) scale(0.95)";var s=a.getNodeAtPoint(e.target.ownerDocument,e.pageX,e.pageY);h=z(s,b.type,t),h&&Z(h,b,n[0],n[1]),S=[e.pageX,e.pageY]}},de=function(e){return E&&V(e),E=!1,w=!1,b?h&&B?(r.exec({action:"moveChild",oldParent:b.parent,oldIndex:b.getIndex(),newParent:h,newIndex:m,child:b}),void U(!0)):(B&&($(b.rendered).remove(),l.$emit("component.redraw",b.parent)),void U()):void U()},ce=function(e){return e.target.classList.contains("ic-placeholder-component")?!0:(e.preventDefault(),!1)},ue=function(e){var t;if(e.preventDefault(),!e.target.classList.contains("ic-placeholder-component")){var o=n.getActiveDrag();if(o)return g=i.getPoint(e.target.ownerDocument,e.pageX,e.pageY),t=a.getNodeAtPoint(e.target.ownerDocument,g[0],g[1]),h=z(t,o.type),h?(e.dataTransfer.effectAllowed="copy",e.dataTransfer.dropEffect="copy",K(h,o.type,g[0],g[1])):(e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none",X()),!0}},pe=function(e){return!0},ge=function(e){if(e.stopPropagation(),!h)return void N();var t=e.dataTransfer.getData("text/plain");return Q(h,t),j=!0,e.preventDefault(),!1},he=function(e){},me=function(e){if(!E&&!F&&3!=e.which){var t=q(e.target,!0);return t&&!t.disableDragging&&re(e,t),e.preventDefault(),!1}},fe=function(e){V(e),de(e)},ve=function(n){if(F&&0===n.detail)return injectSpace(n),void n.preventDefault();if(F){for(var i=n.target;null!=i;){if(i==L.$rendered)return!0;i=i.parentNode}endEditing()}var o=O(n.target);return null==o&&null==n.target.parentNode&&(o=O(t.$frameDocument.elementFromPoint(n.pageX,n.pageY))),o?(e.getById(o).onClick(),oe(o),n.preventDefault(),!1):void 0},ye=function(t){var n=t.target;if(!F){if(E)return void R(t);if(b)return se(t),void t.preventDefault();var i=O(n),o=e.getSelectedComponent(),a=o&&o.getId()||null;if(i&&i!==a){var r=e.getById(i),l=G(i);l||te(),r.canSelect&&(I=l,_=r,ne(l,r))}else te()}},we=function(e){te(),T=null};p=u,l.$on("drag.start",function(t,n){e.deselect(),J(),te()}),l.$on("drag.end",function(e,t){s(function(){j||N(),j=!1})}),l.$on("designer.devicechange",function(){te();var t=e.getSelectedComponent();if(t){var n=e.getSelectedComponent().getId();d(function(){oe(n)},10,30)}}),l.$on("designer.orientationchange",function(){te();var t=e.getSelectedComponent();if(t){var n=e.getSelectedComponent().getId();d(function(){oe(n)},10,30)}}),l.$on("designer.statusbartoggle",function(){te();var t=e.getSelectedComponent();if(t){var n=e.getSelectedComponent().getId();d(function(){oe(n)},10,30)}}),l.$on("contentScroll",function(t,n){I&&ne(I,_);var i=e.getSelectedComponent();i&&oe(e.getSelectedComponent().getId())}),l.$on("designer.selected",function(e,t){ie(t.getId())}),l.$on("designer.deselected",function(e,t){ae()}),l.$on("document.propertyChanged",function(t,n,i){s(function(){"undefined"!=typeof i&&i==e.getSelectedComponent()&&ie(i.getId())})});var be={enable:function(){$(p).on("scroll",function(e){},!1),p.addEventListener("dragenter",ce,!1),p.addEventListener("dragover",ue,!1),p.addEventListener("dragleave",pe,!1),p.addEventListener("drop",ge,!1),p.addEventListener("mousedown",me,!1),p.addEventListener("mouseup",fe,!1),document.addEventListener("mouseup",fe,!1),p.addEventListener("mousemove",ye,!1),p.addEventListener("mouseleave",we,!1),p.addEventListener("contextmenu",he,!1),p.addEventListener("click",ve,!1)},destroy:function(){this.disable()},disable:function(){p.removeEventListener("dragenter",ce),p.removeEventListener("dragover",ue),p.removeEventListener("dragleave",pe),p.removeEventListener("drop",ge),p.removeEventListener("mousedown",me),p.removeEventListener("mouseup",fe),document.removeEventListener("mouseup",fe),p.removeEventListener("mousemove",ye),p.removeEventListener("mouseleave",we),p.removeEventListener("contextmenu",he),p.removeEventListener("click",ve)}};return be.enable(),be}}]),a.directive("filesModel",function(){return{controller:["$parse","$element","$attrs","$scope",function(e,t,n,i){var o=e(n.filesModel);t.on("change",function(){o.assign(i,this.files),i.$apply()})}]}}).factory("Exporter",["$state","$rootScope","$compile","$http","$document","Document","DocumentExporter","Designer","Config","Stats","SecurityProfile","SecurityCredential","PlansModal","ComponentFactory","DocumentRenderer","Share","IconSplashModal","Features","FeatureFence",function(e,t,n,o,a,r,l,s,d,c,u,g,h,m,f,v,y,w,b){var C,S,D="/tmpl/designer/export-modal.tmpl.html",x=function(r){function l(){var e=s.getExtra("startingPage"),t=s.getById(e);if("undefined"==typeof t||"undefined"==typeof t.getParent()||"undefined"!=typeof t.getParent()&&null==t.getParent()){b.startingPage_required=!0;var n=s.getPages(),o=[];for(i=0;i<n.length;i++)p=n[i],0==p.get("abstract",!1)&&o.push({value:p.getId(),text:p.get("title")+" - "+p.get("url"),page:p,pageId:"("+p.getId()+")"});b.startingPage.pages=o}}function h(){u.all({appId:r.app_id}).$promise.then(function(e){b.securityprofiles=e,console.info("Security Profiles",e)},function(){console.error("Cant get security profiles")})}var b=t.$new();b.upgrade=function(){e.go("dashboard.upgrade"),S.hide()},b.regenMobileCode=function(){v.regenMobileCode(b.project).then(function(e){b.project.mobile_code=e.data.code})},b.Designer=s,r?b.project=r:(r=s.getProject(),b.project=r),b.startingPage_required=!1,b.startingPage={page:""},b.setStartingPage=function(){""!=b.startingPage.page&&(t.ignoreFrameDocument=!0,s.setExtra("startingPage",b.startingPage.page),s.AppGraph._save(),b.startingPage_required=!1,t.$emit("outline.refresh"))},("undefined"==typeof s.getProject()||r.id!==s.getProject().id)&&(s.init(),m.clearIdMap(),s.setProject(r),f.setFrameInjectables(n,t,document,angular,window)),l(),b.hasIcon=!1,b.hasSplash=!1;var x=s.getExtra("iconsplash");console.info("CHECK ICON",x),x&&x.icon&&(b.hasIcon=!0),x&&x.splash&&(b.hasSplash=!0),t.$on("iconsplash",function(){var e=s.getExtra("iconsplash");e&&e.icon&&(b.hasIcon=!0),e&&e.splash&&(b.hasSplash=!0)}),b.editIconSplash=function(e){y.show(r),e.stopPropagation()},h(),b.build={platform:"",build_mode:"",security_profile_tag:"",version_number:"0.0.1"};var P=s.getExtra("version_number","0.0.1");b.build.version_number=P,b.packageTab="build",
b.oldIdentifier=r.binary_identifier,b.setIdentifier=function(){r.$save().then(function(e){r.lock_timestamp=e.lock_timestamp,b.oldIdentifier=r.binary_identifier})},b.oldVersion=b.build.version_number,b.setVersion=function(){s.setExtra("version_number",b.build.version_number),b.oldVersion=b.build.version_number},b.cantPackage=function(){return""==b.build.platform||""==b.build.build_mode?!0:"android"==b.build.platform&&"debug"==b.build.build_mode?!1:"ios"==b.build.platform&&""==b.build.security_profile_tag?!0:"android"==b.build.platform&&"release"==b.build.build_mode&&""==b.build.security_profile_tag?!0:!1},b.setup=function(){b.packageTab="settings",b.showCredential=!1},b.profileRequired=function(){return"undefined"==typeof b.securityprofiles?!0:b.securityprofiles.length>0?!1:"android"==b.build.platform&&"release"==b.build.build_mode?!0:"ios"==b.build.platform?!0:!1},b.buildMessage="",b.packageProject=function(){b.buildMessage="",o.post(d.get("creator_api_url")+"/creator/"+r.app_id+"/package/builds",b.build).then(function(e){console.log("packageProject: resp:",e),console.log("SUCCESS",e),e.data&&e.data.data&&"QUEUED"==e.data.data.status?(b.buildMessage="Your build will be emailed to you.",c.t("Successfully Sent Build",{project:r.app_id}),b.build={platform:"",build_mode:"",security_profile_tag:""}):(c.t("Failed to Send Build",{project:r.app_id}),b.buildMessage="There was an error with your build.")},function(e){console.log("packageProject: resp:",e),c.t("Error with Build",{project:r.app_id}),b.buildMessage="There was an error with your build."})},b.showCredential=!1,b.showCredentialType="",b.showCredentialProfile=null,b.openCredential=function(e,t){b.showCredentialType=t,b.showCredentialProfile=e,b.showCredential=!0},b.hideCredential=function(){b.showCredential=!1},b.newSecurity={name:""},b.createSecurityProfile=function(){({name:b.newSecurity.name});u.create({appId:r.app_id},{name:b.newSecurity.name}).$promise.then(function(e){c.t("Created Security Profile",{project:r.app_id}),h()},function(e){c.t("Failed Security Profile",{project:r.app_id})}),b.newSecurity.name=""},b.newCredential={},b.newiOSCredential=function(e){b.newCredential.type="ios",b.showCredentialError=!1,g.create({appId:r.app_id,profileTag:e},b.newCredential).$promise.then(function(e){c.t("New iOS Credential",{project:r.app_id}),h(),b.newCredential={},b.showCredential=!1},function(e){c.t("Failed iOS Credential",{project:r.app_id}),b.showCredentialError=!0})},b.newAndroidCredential=function(e){b.newCredential.type="android",g.create({appId:r.app_id,profileTag:e},b.newCredential).$promise.then(function(e){c.t("New Android Credential",{project:r.app_id}),h(),b.newCredential={},b.showCredential=!1},function(e){c.t("Failed Android Credential",{project:r.app_id}),b.showCredentialError=!0})},b.downloadCordova=function(){if(c.t("Download Project ZIP",{project:r.app_id}),w.check("ionic2")){try{JSON.parse(r.html)}catch(e){return void(b.downloadError="You must load your project once before exporting due to system changes.")}c.t("Ionic 2 Project ZIP",{project:r.app_id}),window.open(d.get("creator_api_url")+"/creator/"+r.app_id+"/download/ionic2","_self")}else{try{JSON.parse(r.html)}catch(e){return void(b.downloadError="You must load your project once before exporting due to system changes.")}window.open(d.get("creator_api_url")+"/creator/"+r.app_id+"/download/cordova","_self")}};o.get(D).then(function(e){var t=n(e.data)(b);C=t,a[0].body.appendChild(t[0]),$(C).on("hidden.bs.modal",function(e){console.log("Hidden modal"),b.$destroy(),$(C).remove(),C=null}),S.show()},function(e){})};return S={"export":function(e){c.t("Export Modal Show",{}),x(e)},show:function(){C&&$(C).modal("show")},hide:function(){C&&$(C).modal("hide")}}}]),a.factory("FeatureFence",["$rootScope","Plans",function(e,t){function n(e,t){return r.features[e].indexOf(t)>=0}function i(e,t){return r.variables[e][t]}function o(e,t){if(e.has_pro)return"Pro";if(e.subscription){var n=e.subscription.plan_id_string;return 0==n.indexOf("team")||0==n.indexOf("agency")||0==n.indexOf("business")?"Team":0==n.indexOf("creator-basic")?"Basic":0==n.indexOf("creator-pro")||0==n.indexOf("pro")?"Pro":"Free"}return t?"Pro":"Free"}function a(e){return e.subscription?e.subscription.plan_id_string:null}var r={features:{codeEditing:["Pro","Team"],nativeExport:["Pro","Team"],privateProjects:["Basic","Pro","Team"],zipExport:["Free","Basic","Pro","Team"],creatorMobile:["Basic","Pro","Team"],createTeam:["Pro","Team"],liveSupport:["Pro","Team"],proComponents:["Pro","Team"]},variables:{projectLimit:{Inactive:0,Free:1,Pro:500,Basic:500,Team:500}}},l=[];t.getPlans().then(function(e){l=e});var s={hasAccess:function(t,i){var a=o(e.creatorUser,i);return n(t,a)},getVal:function(t){var n=o(e.creatorUser);return i(t,n)},getBillingFrequency:function(){return e.creatorUser.subscription?l.find(function(t){return t.plan_id==e.creatorUser.subscription.plan_id_string}).pricing_frequency:null},plan:function(t){return o(e.creatorUser,t)},planId:function(){return a(e.creatorUser)},hasPlan:function(t){return t==String(a(e.creatorUser)).replace(/\-\d*$/g,"").replace("-yearly","").replace("-monthly","")},showBilling:function(){return!(e.creatorUser.has_pro&&!e.creatorUser.subscription)},redirecter:function(t){var n=(o(e.creatorUser),t.name);if(e.creatorUser.has_pro&&!e.creatorUser.subscription&&(n.indexOf("dashboard.upgrade")>=0&&(window.location.href="/app/dashboard"),n.indexOf("dashboard.profile.billing")>=0&&(window.location.href="/app/dashboard/profile/edit")),!s.isPaid()&&"trial"!==s.phase()||"trial"==s.phase()&&"expired"==s.trialStatus()){if(n.indexOf("dashboard.profile")>=0)return;if(n.indexOf("dashboard.upgrade")>=0)return;if(n.indexOf("login")>=0)return;if(n.indexOf("signup")>=0)return;window.location.href="/app/dashboard/profile/billing"}},isPaid:function(){return e.creatorUser.subscription?!e.creatorUser.subscription.unpaid:!0},isLegacy:function(){return!e.creatorUser.post_pricing_change},trialDaysLeft:function(){var t=864e5,n=new Date(e.creatorUser.subscription.trial_end),i=new Date;return Math.round(Math.abs((n.getTime()-i.getTime())/t))},trialStatus:function(){return e.creatorUser?e.creatorUser.subscription?!e.creatorUser.subscription.trial_start!=!e.creatorUser.subscription.trial_end?"unknown":e.creatorUser.subscription.trial_start||e.creatorUser.subscription.trial_end?e.creatorUser.subscription.trial_start&&e.creatorUser.subscription.trial_end?new Date(e.creatorUser.subscription.trial_end)>new Date&&!e.creatorUser.subscription.paid_once_on_plan?"active":"expired":"unknown":"unused":e.creatorUser.trial_init?"expired":"unused":"unknown"},phase:function(){return-1==String(a(e.creatorUser)).indexOf("creator-")?null:e.creatorUser&&e.creatorUser.subscription&&e.creatorUser.subscription.paid_once_on_plan?"postTrial":e.creatorUser.trial_init?"trial":"postTrial"},hasCardOnFile:function(){return e.creatorUser.stripe_card_last_4&&e.creatorUser.stripe_card_last_4.length>0},canChooseBasic:function(t){if("trial"==s.phase())return!0;var n=o(e.creatorUser);return"Basic"==n&&t.replace("annually","yearly")!==s.getBillingFrequency()?!0:["Free","Pro"].indexOf(n)>=0},canChoosePro:function(t){if("trial"==s.phase())return!0;var n=o(e.creatorUser);return"Pro"==n&&t.replace("annually","yearly")!==s.getBillingFrequency()?!0:"pro"==String(a(e.creatorUser)).replace("-yearly","").replace("-monthly","").replace(/\d+$/,"")?!0:["Free","Basic"].indexOf(n)>=0}};return e.FeatureFence=s,s}]),a.factory("Features",["$rootScope",function(e){function t(e,t,n){function i(e){var t=e.indexOf("-");return-1!==t&&(e=e.substring(0,t)),e}function o(e){return(a?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}e=i(e),t=i(t);var a=n&&n.lexicographical,r=n&&n.zeroExtend,l=e.split("."),s=t.split(".");if(!l.every(o)||!s.every(o))return NaN;if(r){for(;l.length<s.length;)l.push("0");for(;s.length<l.length;)s.push("0")}a||(l=l.map(Number),s=s.map(Number));for(var d=0;d<l.length;++d){if(s.length==d)return 1;if(l[d]!=s[d])return l[d]>s[d]?1:-1}return l.length!=s.length?-1:0}function n(e,n,i){return t(e,n,i)>=0}var i="1.1.0",o={"automagic-navigation":{v:"1.1.0",compare:n},ionic2:{v:"2.0.0",compare:n}},a={},r={init:function(e){"undefined"==typeof e&&(e=i),a={};for(var t in o)a[t]=o[t].compare(e,o[t].v);console.info("FEATURES","V"+e,a)},check:function(e){var t=!0;return e?(0==e.indexOf("!")&&(e=e.replace("!",""),t=!1),a[e]===t):!0},newProjectVersion:i};return e.featureCheck=r.check,r}]),a.factory("FirstRun",["$state","$rootScope","$compile","$http","$document","Designer",function(e,t,n,i,o,a){var r,l="/tmpl/designer/first-run-modal.tmpl.html",s=function(){};return s(),{go:function(e){if(r)return void $(r).modal("show");i.get(l).then(function(t){var i=n(t.data)(e);r=i,o[0].body.appendChild(i[0]),$(r).modal({show:!0,backdrop:"static"})},function(e){})},hide:function(){r&&$(r).modal("hide")}}}]),a.filter("trusted",["$sce",function(e){var t=document.createElement("div");return function(n){return t.innerHTML=n,e.trustAsHtml(t.innerHTML)}}]).factory("StandardModal",["$state","$rootScope","$http","$compile","$document","$q",function(e,t,n,i,o,a){var r,l,s="/tmpl/designer/standard-modal.tmpl.html",d=function(e){var a=t.$new();a.data={message:e.message,cancel:e.cancel,ok:e.ok,warning:e.warning,title:e.title,requiredInput:e.requiredInput,actualRequiredInput:"",error:"",template:e.template,height:e.height||"400px"},a.options=e,a.SelectText=function(){var e,t,n="save-error-pre",i=document,o=i.getElementById(n);i.body.createTextRange?(e=document.body.createTextRange(),e.moveToElementText(o),e.select()):window.getSelection&&(t=window.getSelection(),e=document.createRange(),e.selectNodeContents(o),t.removeAllRanges(),t.addRange(e))};var d=s;"undefined"!=typeof a.data.template&&(d=a.data.template);n.get(d).then(function(t){var n=i(t.data)(a);r=n,o[0].body.appendChild(n[0]),a.cancelClick=function(){e.callback("cancel")},a.okClick=function(){return a.data.requiredInput&&a.data.actualRequiredInput!=a.data.requiredInput?void(a.data.error="You did not type the required text."):(l.hideModal(),void e.callback("ok"))},a.warningClick=function(){return a.data.requiredInput&&a.data.actualRequiredInput!=a.data.requiredInput?void(a.data.error="You did not type the required text."):(l.hideModal(),void e.callback("warning"))},l.showModal()},function(e){})};return l={show:function(e){d(e)},showModal:function(){r&&$(r).modal("show")},hideModal:function(){r&&$(r).modal("hide")}}}]),a.factory("PageTemplates",["$http","Features",function(e,t){var n=[],i={},o=function(e){var t,n,o;for(t=0;t<e.length;t++)if(o=e[t],o.templates)for(o=o.templates,n=0;n<o.length;n++)i[o[n].id]=o[n]},a=function(){e.get("/tmpl/page-templates/index.json?2",{t:+new Date}).then(function(e){n=e.data,o(n)},function(e){})};a();var r={all:function(e){var i,o,a,r,l=[];for(i=0;i<n.length;i++)for(a=n[i],r=a.templates,o=0;o<r.length;o++)e?l.push(r[o]):1==r[o].visible&&t.check(r[o].feature)&&l.push(r[o]);return console.log("Loaded templates",l),l=l.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})},get:function(e){return i[e]}};return r}]),a.factory("ProjectDialog",["$state","$timeout","$rootScope","$compile","$http","$document","$q","Designer","PageTemplates","Plans","PlansModal","Stats","FeatureFence",function(e,t,n,i,o,a,r,l,s,d,c,u,p){var g,h="/tmpl/designer/project-dialog-modal.tmpl.html",m=function(){};return m(),{go:function(l){var d=r.defer(),c=this;g&&$(g).modal("hide");var m=n.$new();m.rootScope=n,m.teamItems=l,m.data={team:null,version:"1.1.0"},l.length>0&&(m.data.team=l[0]),m.projectName="",m.starterPages=s.all(!0),m.starterPage="",m.doUpgrade=function(){c.hide(),u.t("Project Limit Upgrade Button Modal"),e.go("dashboard.upgrade")},m.getPageTemplateName=function(e){return e+" Template"},m.createProject=function(){if(!m.data.team&&n.getNumPersonalProjects()>=p.getVal("projectLimit")&&u.t("Stolen Project"),m.templateError=!1,""==m.starterPage)return void(m.templateError=!0);var e;if("sidemenutabs"==m.starterPage)e={name:"SideMemu+Tabs",id:"sidemenutabs",type:"sidemenutabs"};else for(var t=0;t<m.starterPages.length;t++)m.starterPages[t].type==m.starterPage&&(e=m.starterPages[t]);c.hide(),d.resolve({name:m.projectName,team:m.data.team,template:e,version:m.data.version})};o.get(h).then(function(e){var n=i(e.data)(m);g=n,a[0].body.appendChild(n[0]),$(g).modal("show"),t(function(){$(g).find('input[type="text"]').focus()},200)},function(e){});return d.promise},hide:function(){g&&$(g).modal("hide")}}}]),a.factory("Projects",["$state","$rootScope","$q","$http","Project","Stats","Features","FeatureFence",function(e,t,n,i,o,a,r,l){return{createNew:function(e,r,s,d){var c=n.defer();return i.get("/tmpl/app-templates/nav.json").then(function(n){var i=n.data;a.t("New Project",{template:r.name}),i.extra={fromTemplate:r.id,appType:r.type},i.v=d,"2.0.0"==i.v&&a.t("Ionic 2 Project");var u={name:e,team_id:s&&s.id,document:JSON.stringify(i),html:"<html></html>"};l.hasAccess("privateProjects",u.team_id)&&(u.share_lock="private");var p=new o(u);p.$save().then(function(e){p.lock_timestamp=e.lock_timestamp,t.$emit("project.created",e),c.resolve(e)},function(e){t.$emit("project.createError",e),c.reject(e)})},function(e){console.error("Unable to load starting template",e)}),c.promise}}}]),a.factory("Shortcuts",["$state","$rootScope","Designer","Action",function(e,t,n,i){var o=!1;return{bind:function(){function e(){var e="";return"undefined"!=typeof window.getSelection?e=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(e=document.selection.createRange().text),e}o||(o=!0,t.$on("iframe.ready",function(e,t){bindKeymasterEvents(t.document,t)}),$(document).bind("keydown",function(e){return(e.ctrlKey||e.metaKey)&&83==e.which?(n.save(),t.$emit("cmd-s"),e.preventDefault(),!1):void 0}),key("esc, escape","all",function(e){return n.cancelAction(),n.deselect(),!1}),key("delete, backspace, del","all",function(e){return n.isEditing()?void 0:(n.removeSelectedComponent(),!1)}),key("ctrl+s, ⌘+s","all",function(e){return n.save(),!1}),key("ctrl+c, ⌘+c","all",function(t){return n.isEditing()||""!==e()?void 0:(n.copy(),!1)}),key("ctrl+x, ⌘+x","all",function(e){return n.isEditing()?void 0:(n.cut(),!1)}),key("ctrl+v, ⌘+v","all",function(e){return n.isEditing()?void 0:(n.paste(),!1)}),key("ctrl+d, ⌘+d","all",function(e){return n.isEditing()?void 0:(n.duplicate(),!1)}),key("ctrl+z, ⌘+z","all",function(e){return n.isEditing()?void 0:(i.undo(),!1)}),key("ctrl+shift+z,⌘+shift+z,ctrl+y,⌘+y","all",function(e){return n.isEditing()?void 0:(i.redo(),!1)}))}}}]),a.factory("Stats",["$state","$rootScope","$location","$http","Config","$window","FeatureFence",function(e,t,n,i,o,a,r){var l={t:function(e,n){function a(e,t){for(var n in t)e[n]=t[n];return JSON.parse(JSON.stringify(e))}"undefined"==typeof n&&(n={}),n.id="",t.creatorUser&&t.creatorUser.id&&(n.distinct_id=t.creatorUser.id),-1==["Added Component","Preview After Code Save","Add Page"].indexOf(e)&&mixpanel.track(e,n);var r={event:e,properties:a({creator_plan:t.creatorUser&&t.creatorUser.subscription&&String(t.creatorUser.subscription.plan_id_string)||null},n)};-1!==["New Project","New Session"].indexOf(e)&&(r.properties.token&&delete r.properties.token,i.post(o.get("creator_api_url")+"/sendevents",{event_list:[r]}))},register:function(e){},increment:function(e,t){},id:function(e){}};return l}]),a.factory("Tutorials",["$state","$rootScope","$http","$compile","$document","$sce",function(e,t,n,i,o,a){for(var r,l,s="/tmpl/designer/tutorial-modal.tmpl.html",d=[{key:"deepdive",name:"Creator Deep Dive",description:"An indepth overview of the new Creator",id:"lTLTs2ZA2JQ",wistia:"8vy4itcivk",official:!0},{key:"codingtutorial",name:"Custom Code Support",description:"Learn how to use our Code feature",id:"IrwrZBBOiP8",wistia:"q88t0c7dsa",official:!0},{key:"sell",name:"Sell your Client a Mobile App",description:"Use Creator to Close Deals",id:"XPOXiwUFj7E",official:!0,blog:"http://blog.ionic.io/sell-your-client-a-mobile-app/"},{key:"googlemaps",name:"Google Maps Component",description:"How to use our new Maps Component",id:"jH6pehfUNp4",wistia:"hjskkr1efz",official:!0},{key:"tabs",name:"Using Tabs (Old Projects)",description:"How to use Tab pages",id:"ZB888gL9TI8",official:!0,hide:!0},{key:"sidemenu",name:"Using Side Menus (Old Projects)",description:"How to use the Side Menu",id:"btc5kgUkjyc",official:!0,hide:!0},{key:"clizip",name:"Export: CLI & ZIP",description:"Using the CLI & ZIP Export features",id:"CBsBKRriZFI",wistia:"ayprkaqbyu",official:!0},{key:"lists",name:"Lists",description:"How to use Lists and List Components",id:"e-OpKHsE29k",wistia:"9s2a63l6cb",official:!0,hide:!0},{key:"forms",name:"Forms",description:"How to use Forms and Form Components",id:"uVwVYiwPQrE",wistia:"z1aouh9bpi",official:!0},{key:"linking",name:"Linking Pages",description:"How to link pages to each other",id:"T0l-2DoiZjc",wistia:"r3w6ksf1p1",official:!0},{key:"defaultpage",name:"Set Default Page",description:"How to set the starting page for your app",id:"3jXJVdpbt28",wistia:"d74opo0f7y",official:!0},{key:"appcamp",name:"AppCamp",description:"Getting started learning Ionic Framework",id:"yXNNKSmEdpM",wistia:"ck6l4ry0lm",official:!0},{key:"staticdynamic",name:"Static to Dynamic",description:"Turn your prototype into a real app!",id:"R9UwlFu56Wo",community:!0,author:"Raymond Camden",blog:"http://www.raymondcamden.com/2016/01/11/going-from-static-to-dynamic-with-ionic-creator"},{key:"theming1",name:"Theming & SCSS",description:"How to customize fonts & colors with SCSS",id:"IYJyA90KqWc",wistia:"03g99j618x",official:!0},{key:"beautifulsidemenus",name:"Beautiful Side Menus",description:"Use SCSS to style your Side Menu",id:"Wb0weT3vD6I",wistia:"7pq6u7j7mj",official:!0},{key:"formdata",name:"Working with Form Data",description:"Use directives & controllers with Forms",id:"JWtUxuhC4Ng",wistia:"1dsiuyfn6e",official:!0},{key:"ionicauth1",name:"Ionic Auth Part 1",description:"Login & Signup Design",id:"T7RKbd5fLag",wistia:"54ledobzpa",official:!0},{key:"ionicauth2",name:"Ionic Auth Part 2",description:"Integrating with Ionic Auth & Gravatar",id:"McBS4fbPt5Q",wistia:"c0vuu99xue",official:!0},{key:"chatapp",name:"Making a Chat App",description:"Use Firebase to make a simple chat app",id:"QbQf8cNePMM",wistia:"ygbuyr1ztr",official:!0},{key:"htmlpages",name:"Working with HTML Pages",description:"Complex Grid Layout Example",id:"upSIaQKU8s0",wistia:"uv5pdi85vm",official:!0},{key:"apis1",name:"Using APIs with Angular $http",description:"Part 1: Storing Survey Results with Sheetsu",id:"DJotOLNrM8M",wistia:"s0rsrupa80",official:!0},{key:"apis2",name:"Using APIs with Angular $http",description:"Part 2: Retrieving, Deleting & Querying",id:"ZvF2_ZpqZpk",wistia:"wzx9nftnmn",official:!0},{key:"buttonsinheaders",name:"Buttons in Headers",description:"Learn about Header Buttons & Click Handlers",id:"VuWO2VtLvRo",wistia:"fdbhqa5ojc",official:!0},{key:"listitembuttons",name:"List Item Buttons",description:"Delete, Reorder, and Swipe Buttons",id:"1qPkyvB8NpQ",wistia:"qua1dkf5z8",official:!0},{key:"togglingcontent",name:"Toggling Content",description:"Use a Button Bar or Toggle to show content",id:"6lgQTrbb2cc",wistia:"gzyidi68b0",official:!0}],c={},u=0;u<d.length;u++)c[d[u].key]=d[u];var p=function(e){var d=t.$new();d.tutorial=c[e],d.tutorial.wistia?(d.tutorial.videourl=a.trustAsResourceUrl("https://fast.wistia.com/embed/medias/"+d.tutorial.wistia+".jsonp"),d.tutorial.videoembed=a.trustAsHtml('<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><div class="wistia_embed wistia_async_'+d.tutorial.wistia+' videoFoam=true" style="height:100%;width:100%">&nbsp;</div></div></div>')):d.tutorial.videourl=a.trustAsResourceUrl("https://www.youtube.com/embed/"+d.tutorial.id+"?list=PLOMESIqyrpf-rpNjFGzuCoTwNdv_-PUD1");n.get(s).then(function(e){var t=i(e.data)(d);r=t,o[0].body.appendChild(t[0]),l.showModal()},function(e){})};return l={show:function(e){p(e)},showModal:function(){r&&($(r).modal("show"),$(r).on("hidden.bs.modal",function(){$("#tutorial-modal iframe").removeAttr("src")}))},hideModal:function(){r&&$(r).modal("hide")},tutorials:d}}]),a.config(["IntegrationTypesProvider",function(e){e.add("Firebase",{order:1,title:"Firebase",description:"Add AngularFire to your app to utilize the realtime database-as-a-service Firebase.",website:"https://firebase.google.com/",color:"#039be5"})}]).factory("FirebaseIntegration",["Integrations","Designer","Stats",function(e,t,n){var i={boot:function(i){e.helpers.addExternalJS("https://www.gstatic.com/firebasejs/3.2.0/firebase.js"),e.helpers.addExternalJS("https://cdn.firebase.com/libs/angularfire/2.0.1/angularfire.min.js"),e.helpers.addAngularModule("firebase"),e.helpers.addAngularModule("firebaseConfig");var o="angular.module('firebaseConfig', ['firebase'])\n\n.run(function(){\n\n  // Initialize Firebase\n  var config = {\n    apiKey: \""+i.apiKey+'",\n    authDomain: "'+i.authDomain+'",\n    databaseURL: "'+i.databaseURL+'",\n    storageBucket: "'+i.storageBucket+'",\n  };\n  firebase.initializeApp(config);\n\n})\n\n/*\n\n.service("TodoExample", ["$firebaseArray", function($firebaseArray){\n    var ref = firebase.database().ref().child("todos");\n    var items = $firebaseArray(ref);\n    var todos = {\n        items: items,\n        addItem: function(title){\n            items.$add({\n                title: title,\n                finished: false\n            })\n        },\n        setFinished: function(item, newV){\n            item.finished = newV;\n            items.$save(item);\n        }\n    }\n    return todos;\n}])\n\n*/';e.helpers.addJSFile("firebase.init.js",o);var a=t.getExtra("addons",{});a.Firebase=!0,t.setExtra("addons",a),n.t("Installed Addon",{addon:"Firebase"})}};return i}]).directive("firebaseIntegration",["$rootScope","$document","FirebaseIntegration","Designer",function(e,t,n,i){return{restrict:"E",templateUrl:"integrations/firebase/firebase-settings.tmpl.html",scope:{},link:function(e,t,o){e.data={apiKey:"",authDomain:"",databaseURL:"",storageBucket:"",alreadyInstalled:i.getExtra("addons",{}).Firebase},e.initFB=function(){n.boot(e.data),e.data.alreadyInstalled=i.getExtra("addons",{}).Firebase}}}}]),a.config(["IntegrationTypesProvider",function(e){e.add("Googlemaps",{order:3,title:"Googlemaps",name:"Google Maps",description:"Include Angular Google Maps directly in your Creator app.",website:"https://developers.google.com/maps/documentation/javascript/",color:"#4285f4"})}]).factory("GooglemapsIntegration",["Integrations","Designer","Stats","$q","$http",function(e,t,n,i,o){var a={boot:function(a){var r=i.defer(),l=[o.get("/tmpl/integrations/googlemaps/angular-google-maps.min.js"),o.get("/tmpl/integrations/googlemaps/angular-simple-logger.js"),o.get("/tmpl/integrations/googlemaps/googlemaps.init.tmpl.html"),o.get("/tmpl/integrations/googlemaps/googlemaps.scss")];return i.all(l).then(function(i){var o=i[2].data,l=Handlebars.compile(o)({apiKey:a.apiKey});e.helpers.addExternalJS("https://cdn.jsdelivr.net/lodash/4.15.0/lodash.min.js"),e.helpers.addJSFile("angular-simple-logger.js",i[1].data),e.helpers.addJSFile("angular-google-maps.min.js",i[0].data),e.helpers.addAngularModule("uiGmapgoogle-maps"),e.helpers.addAngularModule("googlemaps.init"),e.helpers.addJSFile("googlemaps.init.js",l),e.helpers.addSCSS(i[3].data);var s=t.getExtra("addons",{});s.Googlemaps=!0,t.setExtra("addons",s),n.t("Installed Addon",{addon:"Googlemaps"}),r.resolve()}),r.promise},installExample:function(){var t=i.defer(),n=[o.get("/tmpl/integrations/googlemaps/code-based-example.js"),o.get("/tmpl/integrations/googlemaps/code-based-example.tmpl.html")];return i.all(n).then(function(n){e.helpers.addPage("Maps Example",n[0].data).then(function(e){var i=e.create("html");i.set("content",{value:n[1].data}),e.appendChild(i,!0),t.resolve()})}),t.promise}};return a}]).directive("googlemapsIntegration",["$rootScope","$document","GooglemapsIntegration","Designer","Integrations",function(e,t,n,i,o){return{restrict:"E",templateUrl:"integrations/googlemaps/googlemaps-settings.tmpl.html",scope:{},link:function(t,a,r){t.data={apiKey:"",alreadyInstalled:i.getExtra("addons",{}).Googlemaps,started:!1,exampleStarted:!1,exampleFinished:!1},t.init=function(){t.data.started=!0,n.boot(t.data).then(function(){t.data.alreadyInstalled=i.getExtra("addons",{}).Googlemaps,t.data.started=!1,e.$emit("designer.refresh-properties",i.getSelectedComponent())})},t.installExample=function(){t.data.exampleStarted=!0,n.installExample().then(function(){t.data.exampleFinished=!0})},t.closeModal=function(){o.hideModal()}}}}]),a.config(["IntegrationTypesProvider",function(e){e.add("Gravatar",{order:6,title:"Gravatar",description:"Add Gravatar to your app so you can easily retrieve users Gravatar images.",website:"https://gravatar.com",color:"#1e8cbe"})}]).factory("GravatarIntegration",["Integrations","Designer","Stats","$q","$http",function(e,t,n,i,o){var a={boot:function(a){var r=i.defer(),l=[o.get("/tmpl/integrations/gravatar/gravatar.js")];return i.all(l).then(function(i){var o=i[0].data;e.helpers.addAngularModule("gravatar"),e.helpers.addJSFile("gravatar.js",o);var a=t.getExtra("addons",{});a.Gravatar=!0,t.setExtra("addons",a),n.t("Installed Addon",{addon:"Gravatar"}),r.resolve()}),r.promise}};return a}]).directive("gravatarIntegration",["$rootScope","$document","GravatarIntegration","Designer",function(e,t,n,i){return{restrict:"E",templateUrl:"integrations/gravatar/gravatar-settings.tmpl.html",scope:{},link:function(e,t,o){e.data={alreadyInstalled:i.getExtra("addons",{}).Gravatar,started:!1},e.init=function(){e.data.started=!0,n.boot(e.data).then(function(){e.data.alreadyInstalled=i.getExtra("addons",{}).Gravatar,e.data.started=!1})}}}}]),a.config(["IntegrationTypesProvider",function(e){}]).factory("IonicAuthIntegration",["Integrations","Designer","Stats","$q","$http",function(e,t,n,i,o){var a={boot:function(a){var r=i.defer(),l=[o.get("/tmpl/integrations/ionicauth/ionic.cloud.min.js"),o.get("/tmpl/integrations/ionicauth/ionicauth.init.tmpl.js")];return i.all(l).then(function(i){var o=i[1].data,l=Handlebars.compile(o)({appId:a.appId});e.helpers.addAngularModule("ionic.cloud"),e.helpers.addAngularModule("ionic.cloud.init"),e.helpers.fileExists("js/ionic.cloud.min.js")||e.helpers.addJSFile("ionic.cloud.min.js",i[0].data),e.helpers.addJSFile("ionic.cloud.init.js",l);var s=t.getExtra("addons",{});s.IonicAuth=!0,t.setExtra("addons",s),n.t("Installed Addon",{addon:"IonicAuth"}),r.resolve()}),r.promise}};return a}]).directive("ionicauthIntegration",["$rootScope","$document","IonicAuthIntegration","Designer",function(e,t,n,i){return{restrict:"E",templateUrl:"integrations/ionicauth/ionicauth-settings.tmpl.html",scope:{},link:function(e,t,o){e.data={appId:"",alreadyInstalled:i.getExtra("addons",{}).IonicAuth,started:!1},e.init=function(){e.data.started=!0,n.boot(e.data).then(function(){e.data.alreadyInstalled=i.getExtra("addons",{}).IonicAuth,e.data.started=!1})}}}}]),a.config(["IntegrationTypesProvider",function(e){e.add("Kinvey",{order:2,title:"Kinvey",description:"A complete, integrated, compliant enterprise Backend as a Service app platform.",website:"https://www.kinvey.com/",color:"#e3613b"})}]).factory("KinveyIntegration",["Integrations","Designer","Stats","$q","$http",function(e,t,n,i,o){var a={boot:function(a){var r=i.defer(),l=[o.get("/tmpl/integrations/kinvey/kinvey.init.tmpl.html")];return i.all(l).then(function(i){var o=i[0].data,l=Handlebars.compile(o)({appKey:a.appKey,appSecret:a.appSecret});e.helpers.addExternalJS("https://da189i1jfloii.cloudfront.net/js/kinvey-angular-sdk-3.0.3.min.js"),e.helpers.addAngularModule("kinvey.init"),e.helpers.addJSFile("kinvey.init.js",l);var s=t.getExtra("addons",{});s.Kinvey=!0,t.setExtra("addons",s),n.t("Installed Addon",{addon:"Kinvey"}),r.resolve()}),r.promise}};return a}]).directive("kinveyIntegration",["$rootScope","$document","KinveyIntegration","Designer",function(e,t,n,i){return{restrict:"E",templateUrl:"integrations/kinvey/kinvey-settings.tmpl.html",scope:{},link:function(e,t,o){e.data={appKey:"",appSecret:"",alreadyInstalled:i.getExtra("addons",{}).Kinvey,started:!1},e.init=function(){e.data.started=!0,n.boot(e.data).then(function(){e.data.alreadyInstalled=i.getExtra("addons",{}).Kinvey,e.data.started=!1})}}}}]),a.config(["IntegrationTypesProvider",function(e){e.add("MixPanel",{order:4,title:"MixPanel",description:"Add MixPanel to start keeping track of events in your app easily.",website:"https://mixpanel.com/",color:"#8865CB"})}]).factory("MixPanelIntegration",["Integrations","Designer","Stats",function(e,t,n){var i={boot:function(i){e.helpers.addAngularModule("mixpanelConfig");var o='angular.module(\'mixpanelConfig\', [])\n\n.run(function(){\n\n  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\\/\\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);  mixpanel.init("'+i.token+'");\n})\n\n/*\n\n.service("MixPanel", [function(){\n   var ret = {\n       track: function(name, extra){\n           mixpanel.track(name, extra);\n       }\n   }\n   return ret;\n';e.helpers.addJSFile("mixpanel.init.js",o);var a=t.getExtra("addons",{});a.MixPanel=!0,t.setExtra("addons",a),n.t("Installed Addon",{addon:"MixPanel"})}};return i}]).directive("mixpanelIntegration",["$rootScope","$document","MixPanelIntegration","Designer",function(e,t,n,i){return{restrict:"E",templateUrl:"integrations/mixpanel/mixpanel-settings.tmpl.html",scope:{},link:function(e,t,o){e.data={token:"",alreadyInstalled:i.getExtra("addons",{}).MixPanel},e.initFB=function(){n.boot(e.data),e.data.alreadyInstalled=i.getExtra("addons",{}).MixPanel}}}}]),a.run(["$templateCache","$rootScope",function(e,t){function n(e){var t=e.get("url");return t}function i(e){var t=e.get("parameters",[]);if(t.length>0){for(var n="	params: {\n",i=0;i<t.length;i++){var o=t[i];i>0&&(n+=",\n"),n+="		"+o.name+': "'+o.defaultForPreview+'"'}return n+="		\n},\n"}return""}function o(e){for(var t=e.get("idName"),n=e;n&&""!==n.get("parentState");){var i=n.get("parentState");n=window.Designer.getById(i),n&&(t=n.get("idName")+"."+t)}return t}function a(e){var t="  .state('"+e.get("idName")+"', {\n    url: '"+n(e)+"',\n"+i(e)+"    templateUrl: 'templates/"+e.get("idName")+".html',\n";return e.get("abstract",!1)&&!e.get("sidemenu",!1)?t+="    abstract:true\n":t=t+"    controller: '"+e.get("idName")+"Ctrl'\n",t+="  })\n\n";
}function r(e,t){var o="  .state('"+e.get("idName")+"."+t.get("idName")+"', {\n    url: '"+n(t)+"',\n"+i(t)+"    views: {\n      'side-menu21': {\n        templateUrl: 'templates/"+t.get("idName")+".html',\n        controller: '"+t.get("idName")+"Ctrl'\n      }\n    }\n  })\n\n";return o}function l(e,t,o){var a="";if(t.length>1){a=a+"  /* \n    The IonicUIRouter.js UI-Router Modification is being used for this route.\n    To navigate to this route, do NOT use a URL. Instead use one of the following:\n      1) Using the ui-sref HTML attribute:\n        ui-sref='"+e.get("idName")+"."+o.get("idName")+"'\n      2) Using $state.go programatically:\n        $state.go('"+e.get("idName")+"."+o.get("idName")+"');\n    This allows your app to figure out which Tab to open this page in on the fly.\n    If you're setting a Tabs default page or modifying the .otherwise for your app and\n    must use a URL, use one of the following:\n";for(var r=0;r<t.length;r++)a=a+"      "+n(e)+"/"+t[r]+n(o)+"\n";a+="  */\n"}a=a+"  .state('"+e.get("idName")+"."+o.get("idName")+"', {\n    url: '"+n(o)+"',\n"+i(o)+"    views: {\n";for(var r=0;r<t.length;r++)a=a+"      '"+t[r]+"': {\n        templateUrl: 'templates/"+o.get("idName")+".html',\n        controller: '"+o.get("idName")+"Ctrl'\n      }",r<t.length-1&&(a+=","),a+="\n";var a=a+"    }\n  })\n\n";return a}function s(e,t,n){var i=[];"undefined"==typeof t&&(t=[]),t.push(e);var o=window.Designer.AppGraph._load(),a=o.entries[e];if("undefined"==typeof a)return[];if(!n||!window.Designer.getById(e).get("disableParenting",!1)){for(var r in a.to){var l=a.to[r];i.push(l.to),-1==t.indexOf(l.to)&&(i=i.concat(s(l.to,t,n)))}return i}}Handlebars.registerHelper("pageUrl",function(e){return n(e)}),Handlebars.registerHelper("fullPageUrl",function(e){return e.getFullPageUrl()}),Handlebars.registerHelper("defaultPage",function(e){var t=window.Designer.getExtra("startingPage","");return""!==t&&(checkPage=window.Designer.getById(t),"undefined"!=typeof checkPage&&(e=checkPage)),e.getFullPageUrl()}),Handlebars.registerHelper("activePageUrl",function(e){if(1!=e.get("abstract"))return e.getFullPageUrl();var t=e.get("pages",{pages:[]});if(t){if(0==t.pages.length&&(t=e.children[0].children[0].get("pages")),t)return window.Designer.getById(t.pages[0].id).getFullPageUrl()}else console.error("No pages for abstract",e)}),Handlebars.registerHelper("stateName",function(e){return o(e)}),Handlebars.registerHelper("myId",function(e){return e.get("idName")}),Handlebars.registerHelper("controllerCode",function(e){return window.Designer.Coding.generateController(e.getId())}),Handlebars.registerHelper("parentId",function(e){return e.get("parentState")}),Handlebars.registerHelper("parentView",function(e){return e.get("parentView")}),Handlebars.registerHelper("isAbstract",function(e){return this.get("abstract")&&!this.get("sidemenu",!1)?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("isChildState",function(e){return""!==this.get("parentState")?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("isAutoMagical",function(e){return window.Designer.featureCheck("automagic-navigation")?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("generateRoutes",function(e,t){if(window.ionicuirouter_required=!1,window.Designer.featureCheck("automagic-navigation")){var n=window.Designer.getExtra("last_route_generation",0),i=window.Designer.AppGraph.getLastUpdated(),o=window.Designer.getExtra("route_version",1);if(n==i&&2==o)return window.page_views=window.Designer.getExtra("page_views"),window.ionicuirouter_required=window.Designer.getExtra("ionicuirouter_required"),new Handlebars.SafeString(window.Designer.getExtra("routes"));window.Designer.setExtra("route_version",2);var d="";switch(window.Designer.getExtra("appType")){case"blank":for(var c=0;c<e.length;c++){var u=e[c];d+=a(u)}var t=window.Designer.getExtra("startingPage","");("undefined"==typeof window.Designer.getById(t)||null===window.Designer.getById(t).parent)&&(t=""),t=""==t?e[0]:window.Designer.getById(t),d=d+"$urlRouterProvider.otherwise('"+t.get("url")+"')";break;case"sidemenu":var p=window.Designer.getById("side-menu21"),g=[],h=p.get("defaultPage","");if(""!==h){var m=window.Designer.getById(h);"undefined"!=typeof m&&null!==m.parent&&0==m.get("disableParenting",!1)?(g.push(h),g=g.concat(s(h))):p.set("defaultPage","")}g=g.concat(s("side-menu21"));var f=!1;p.set("previewPage","");for(var c=0;c<e.length;c++){var u=e[c],v=u.get("parentState");g.indexOf(u.id)>-1&&0==u.get("disableParenting",!1)?(u.set("parentState",p.id),f||(p.set("previewPage",u.id),f=!0),d+=r(p,u)):(u.set("parentState",""),d+=a(u)),v!=u.get("parentState")&&window.Designer.AppGraph.updatePageRoutes()}var t=window.Designer.getExtra("startingPage","");if(("undefined"==typeof window.Designer.getById(t)||null===window.Designer.getById(t).parent)&&(t=""),t=""==t?e[0]:window.Designer.getById(t),"side-menu21"==t.id&&(t=window.Designer.getById(g[0])),t)var y=t.get("url");else{var y="";console.error("We are unable to choose a default page for your app")}""!==y&&g.indexOf(t.id)>-1&&0==t.get("disableParenting",!1)&&(y=p.get("url")+y),d=d+"$urlRouterProvider.otherwise('"+y+"')";break;case"tabs":case"sidemenutabs":for(var w=window.Designer.getById("page1"),b=window.Designer.getById("side-menu21"),C=w.children[0].children,S={},c=0;c<C.length;c++){var D=C[c],x=D.get("defaultPage",""),h=window.Designer.getById(x),$=[];if("undefined"!=typeof h&&null!==h.parent){if(0==h.get("disableParenting",!1)){$.push(s(x,void 0,!0)),$[$.length-1].push(x);for(var P=0;P<$[$.length-1].length;P++){var T=$[$.length-1][P];"undefined"==typeof S[T]&&(S[T]=[]),-1==S[T].indexOf(D.id)&&S[T].push(D.id)}}}else D.set("defaultPage","")}window.page_views=S;var f=!1;w.set("previewPage","");for(var c=0;c<e.length;c++){var u=e[c],v=u.get("parentState");"undefined"==typeof S[u.id]||1==u.get("disableParenting",!1)?("sidemenutabs"!=window.Designer.getExtra("appType")||"side-menu21"!=u.id)&&(u.set("parentState",""),u.set("routeViews",""),d+=a(u)):(u.set("parentState",w.id),u.set("routeViews",S[u.id]),f||(w.set("previewPage",u.id),b&&b.set("previewPage",u.id),f=!0),d+=l(w,S[u.id],u),S[u.id].length>1&&(window.ionicuirouter_required=!0)),v!=u.get("parentState")&&window.Designer.AppGraph.updatePageRoutes()}var t=window.Designer.getExtra("startingPage","");if(("undefined"==typeof window.Designer.getById(t)||null===window.Designer.getById(t).parent)&&(t=""),t=""==t?e[0]:window.Designer.getById(t),"page1"==t.id||"side-menu21"==t.id)try{t=window.Designer.getById($[0][0])}catch(k){t=null}if(t)var y=t.get("url");else{var y="";console.error("We are unable to choose a default page for your app")}if(""!==y&&"undefined"!=typeof S[t.id]&&0==t.get("disableParenting",!1)){var I="";if(S[t.id].length>1)for(var c=0;c<S[t.id].length;c++)0==c&&(I="/"+S[t.id][0]),window.Designer.getById(S[t.id][c]).get("defaultPage")==t.id&&(I="/"+S[t.id][c]);y=w.get("url")+I+y}d=d+"$urlRouterProvider.otherwise('"+y+"')"}return window.Designer.setExtra("routes",d),window.Designer.setExtra("last_route_generation",i),window.Designer.setExtra("page_views",S),window.Designer.setExtra("ionicuirouter_required",ionicuirouter_required),new Handlebars.SafeString(d)}})}]).factory("DocumentExporter",["$http","$q","$templateCache","$compile","$rootScope","$injector","DocumentRenderer","DocumentIterator","Features","Themes",function(e,t,n,i,o,r,l,s,d,c){var u=function(){var e=[],t=window.Designer.getById("nav1");return 0==t.get("showBackTitle",!1)&&e.push("$ionicConfigProvider.backButton.text('').previousTitleText(false);"),e},p=function(e,t){var n=l.renderAsHtml(e);return t===!0?n:'<script id="templates/'+e.get("idName")+'.html" type="text/ng-template">\n'+n+"</script>"},g=function(e,t,n){var i=u(),o=Handlebars.compile(t)({activePage:n,pages:e,externalJS:window.Designer.Coding.getExternalJSList(),conf:i,appDependencies:window.Designer.Coding.settings.appDependencies,extraFiles:window.Designer.Coding.settings.files.filter(function(e){return"js"==e.type})});return o},h=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0===+e?"":0==t?e.toLowerCase():e.toUpperCase()})},m=function(e){for(var t=[],n={},i=0;i<e.length;i++){page=e[i];var o=h(page.get("title",""));o=o.replace(/\W/g,""),""==o&&(o=page.id),t.indexOf(o)>-1?(n[o]++,o=o+""+n[o]):(t.push(o),n[o]=1),page.set("idName",o)}},f=function(e,t,n,i,r,s){o.multiFlag=!0,o.downloads=[],window.multiFlag=o.multiFlag,window.downloads=o.downloads,window.compiling=!0,m(t);for(var d,c,g=[],h=Handlebars.compile(r)({pages:t,ionicuirouter_required:window.ionicuirouter_required}),f=e.children[0],v=l.renderAsHtml(e,f),y=Handlebars.compile(n)({content:v,ionicuirouter_required:window.ionicuirouter_required,fonts:window.Designer.Themes.settings.fontList,includeCustomCSS:window.Designer.Themes.hasCustomStyles()&&window.Designer.Themes.settings.validCompiledCSS,externalJS:window.Designer.Coding.getExternalJSList(),appDependencies:window.Designer.Coding.settings.appDependencies,extraFiles:window.Designer.Coding.settings.files.filter(function(e){return"js"==e.type})}),w=0;w<t.length;w++)d=t[w],("sidemenutabs"!=window.Designer.getExtra("appType")||"side-menu21"!=d.id)&&(c=p(d,!0),g.push({id:d.getId(),name:d.get("idName"),html:c}));var b=u(),C=Handlebars.compile(i)({appDependencies:window.Designer.Coding.settings.appDependencies,conf:b}),S=Handlebars.compile(s)({pages:t}),D=[];window.Designer.Coding.settings.files.forEach(function(e){for(var t=e.contents+"",n=new RegExp("[\"']https://s3.amazonaws.com/ionic-io-static/([^\"']+)[\"']","g"),i=t.match(n)||[],o=0;o<i.length;o++){var r=i[o].split("/");r=r[r.length-1],downloadimg=i[o].substring(1,i[o].length-1),r=a.DomHelper.addDownloadForExport("img",downloadimg,r).name,t=t.replace(i[o],'"img/'+r+'"')}D.push({contents:t,filename:e.filename,type:e.type})});var x={pages:g,indexHtml:y,appJs:C,routeJs:h,controllerJs:S,downloads:o.downloads,extraFiles:D};return o.multiFlag=!1,window.multiFlag=o.multiFlag,window.compiling=!1,x},v=function(e,t,n,i,o){var a,r,t=t;m(t),window.compiling=!0;for(var s=e.children[0],d=l.renderAsHtml(e,s),h=g(t,n,o),f=[d],v=0;v<t.length;v++)a=t[v],("sidemenutabs"!=window.Designer.getExtra("appType")||"side-menu21"!=a.id)&&(r=p(a),f.push(r));var y=u(),w=Handlebars.compile(i)({content:f.join("\n"),js:h,fonts:window.Designer.Themes.settings.fontList,includeCustomCSS:window.Designer.Themes.hasCustomStyles()&&window.Designer.Themes.settings.validCompiledCSS,customCSSURL:c.getCSSURL(window.Designer.getProject().app_id,window.Designer.Themes.settings.version),androidUsingDefaultFont:"default"==window.Designer.Themes.settings.iosFont,iosUsingDefaultFont:"default"==window.Designer.Themes.settings.androidFont,externalJS:window.Designer.Coding.getExternalJSList(!0),appDependencies:window.Designer.Coding.settings.appDependencies,extraFiles:window.Designer.Coding.settings.files.filter(function(e){return"js"==e.type}),conf:y});return window.compiling=!1,w},y=function(e){var t,n={},i=e.getProperties();for(var o in i)t=i[o],n[o]=t.value;return n};return{_toJson:function(e){var t,n,i,o;for(o={type:e.type,id:e.getId(),props:y(e),children:[]},t=0,n=e.children.length;n>t;t++)i=e.children[t],o.children.push(this._toJson(i));return o},toJson:function(e,t){var n=e.getRoot();tree=this._toJson(n);var i={v:e.getProperty("v"),generated:window.Designer.getDocument().getGenerated(),extra:t,document:{root:tree}};return obj=JSON.stringify(i),obj},jsonToSinglePageHtml:function(n,i){var a=r.get("Document"),l=t.defer(),s=[e.get("/tmpl/export-templates/app.js"),e.get("/tmpl/export-templates/preview-index.html")];return t.all(s).then(function(e){var t=new a;t.fromJson(n),l.resolve(v(t.getRoot(),t.getPages(),e[0].data,e[1].data))},function(e){l.reject(e),o.$emit("document.exporter.error",e)}),l.promise},toSinglePageHTML:function(n,i,a){var r=t.defer();if(1==a)var l="/tmpl/export-templates/export-index.html";else var l="/tmpl/export-templates/preview-index.html";var s=[e.get("/tmpl/export-templates/app.js"),e.get(l)];return t.all(s).then(function(e){r.resolve(v(n.getRoot(),n.getPages(),e[0].data,e[1].data,i))},function(e){r.reject(e),o.$emit("document.exporter.error",e)}),r.promise},toMultiPageHTML:function(n){var i=t.defer(),a=[e.get("/tmpl/export-templates/export-index.html"),e.get("/tmpl/export-templates/export-app.js"),e.get("/tmpl/export-templates/export-routes.js"),e.get("/tmpl/export-templates/export-controllers.js")];return t.all(a).then(function(e){i.resolve(f(n.getRoot(),n.getPages(),e[0].data,e[1].data,e[2].data,e[3].data))},function(e){i.reject(e),o.$emit("document.exporter.error",e)}),i.promise}}}]),a.factory("DocumentRenderer",[function(){var e={setFrameInjectables:function(e,t,n,i,o){this.$frameCompile=e,this.$frameRootScope=t,this.$frameDocument=n,this.$frameAngular=i,this.$frameWindow=o},getFrameAngular:function(){return this.$frameAngular},getFrameCompile:function(){return this.$frameCompile},getFrameDocument:function(){return this.$frameDocument},getFrameWindow:function(){return this.$frameWindow},annotateNode:function(e,t,n){var i=t.get("extraClasses"),o=t.get("id"),a=t.get("width"),r=t.get("height"),l=t.get("margin"),s=t.get("padding"),d=t.get("skipcss",!1);if(d)var c={};else var c={width:a,height:r,marginTop:l.top+"px",marginRight:l.right+"px",marginBottom:l.bottom+"px",marginLeft:l.left+"px",paddingTop:s.top+"px",paddingRight:s.right+"px",paddingBottom:s.bottom+"px",paddingLeft:s.left+"px"};$(e).css(c),n||e.setAttribute("data-componentid",t.getId()),i&&e.classList.add(i),o&&(e.id=o)},getScope:function(e){var t,n,i=this.$frameRootScope.$new(),o=e.getProperties();for(t in o)n=o[t],i[n.scopeField||t]=n.value;return i},renderChild:function(e){if(this.$frameCompile&&this.$frameRootScope){var t=e.get("extraClasses"),n=e.get("id");return dom=e.dom(!0,this.$frameAngular,this.$frameDocument),dom.setAttribute("data-componentid",e.getId()),t&&dom.classList.add(t),n&&(dom.id=n),e.needsCompile?e.getFromCompiled(this.$frameCompile(dom)(this.$frameRootScope)):dom}},_compile:function(e,t){var n,n=e.dom(this.$frameAngular,this.$frameDocument);return this.annotateNode(n,e),n},_render:function(e,t,n){var i,o;if(!e)return null;e.postCompile&&(n=!0);for(var a=this._compile(e,!1),r=0,l=e.children.length;l>r;r++)if(i=e.children[r],!i.isPage||!t||i.getId()===t){o=this._render(i,t,n);var s=e.getRenderTarget(a);s?s.appendChild(o):a.appendChild(o)}return a},renderChildTree2:function(e,t,n){if(!n)return this._render(e,t);var i=this._render(e,t);return this.$frameCompile(i)(this.$frameRootScope)[0]},renderChildTree:function(e,t,n){return this.renderChildTree2(e,t,n)},compile:function(e){var t;return t=this.$frameCompile(e.$rendered)(this.getScope(e))[0]},renderAsNode:function(e,t){return this.renderChildTree2(e.getRoot(),t)},_renderAsHtml:function(e,t){var n,i,o;o=e.dom(this.$frameAngular,this.$frameDocument),this.annotateNode(o,e,!0);var a=e.getRenderTarget(o);if(t&&t.getId()===e.getId())return o;for(var r=0,l=e.children.length;l>r;r++)n=e.children[r],i=this._renderAsHtml(n,t),a?a.appendChild(i):o.appendChild(i);return o},renderAsHtml:function(e,t){var n=this._renderAsHtml(e,t),i=html_beautify(n.outerHTML,{indent_size:2,unformatted:["textarea"]});return i=i.replace(/\sclass\=\"\s*\"/g,"")}};return window.DocumentRenderer=e,e}]),a.factory("Ionic2Exporter",["Ionic2Renderer","Features","$rootScope","$q","$http",function(e,t,n,i,o){function a(e,t){var n=[];"undefined"==typeof t&&(t=[]),t.push(e);var i=window.Designer.AppGraph._load(),o=i.entries[e];if("undefined"==typeof o)return[];for(var r in o.to){var l=o.to[r];n.push(l.to),-1==t.indexOf(l.to)&&(n=n.concat(a(l.to,t)))}return n}function r(e){var t=a(e),n=[];return t.forEach(function(e){var e=window.Designer.getPageById(e),t={id:e.getId(),names:e.get("ionic2names"),params:e.get("parameters",[]),"abstract":e.get("abstract",!1),sidemenu:e.get("sidemenu",!1)},i=n.find(function(e){return e.id==t.id});i||n.push(t)}),n}var l=null,s=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0===+e?"":0==t?e.toLowerCase():e.toUpperCase()})},d=function(e){for(var t=[],n={},i=0;i<e.length;i++){page=e[i];var o=s(page.get("title",""));o=o.replace(/\W/g,""),""==o&&(o=page.id),t.indexOf(o)>-1?(n[o]++,o=o+""+n[o]):(t.push(o),n[o]=1);var a=o,r=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),l=a.charAt(0).toUpperCase()+a.slice(1);page.set("ionic2names",{fileName:r,className:l+"Page",selector:"page-"+r,navFunction:"goTo"+l}),page.set("idName",o)}},c={generateProjectJSON:function(t){function a(i){var o=window.Designer.getExtra("appType");l||(l={},i.forEach(function(e,t){l[s[t].name]=Handlebars.compile(e.data)}));var a=t.getPages();d(a);var c={name:"app",type:"dir",children:[]},u={name:"pages",type:"dir",children:[]},p={name:"src",type:"dir",children:[c,u]},g=[p];c.children.push({name:"app.scss",type:"file",contents:l.appSCSS()}),c.children.push({name:"main.ts",type:"file",contents:l.appMainTypeScript()}),c.children.push({name:"app.module.ts",type:"file",contents:l.appModuleTypeScript({pages:a.map(function(e){var t=e.get("ionic2names");return t["abstract"]=e.get("abstract",!1),t.sidemenu=e.get("sidemenu",!1),t.id=e.getId(),t})})});var h="";if("sidemenu"==o||"sidemenutabs"==o){var m=window.Designer.getPageById("side-menu21");h=new Handlebars.SafeString(e.renderAsHtml(m)+"\n\n")}c.children.push({name:"app.html",type:"file",contents:l.appHTML({sideMenu:h})});var f=[],v=!1;if("sidemenu"==o||"sidemenutabs"==o){v=!0;var y=window.Designer.getExtra("startingPage"),m=window.Designer.getPageById("side-menu21");f=r(m.getId()),f.forEach(function(e){e.id==y&&(e.hideImport=!0)})}return c.children.push({name:"app.component.ts",type:"file",contents:l.appComponentTypeScript({starterPage:window.Designer.getPageById(window.Designer.getExtra("startingPage")).get("ionic2names"),linkedPages:f,isSideMenu:v,isTabs:"tabs"==o,tabsPage:"TabsControllerPage"})}),p.children.push({name:"index.html",type:"file",contents:l.indexHTML({name:window.Designer.getProject().name})}),a.forEach(function(t){if("side-menu21"!=t.getId()){var n=t.get("ionic2names"),i=[];if("tabs"!=o&&"sidemenutabs"!=o||"page1"!=t.getId())var a=e.renderAsHtml(t);else{var a=e.renderAsHtml(t.children[0]);t.children[0].children.forEach(function(e,t){var n=window.Designer.getPageById(e.get("defaultPage")).get("ionic2names");i.push({num:t+1,names:n})})}var s=r(t.getId());u.children.push({name:n.fileName,type:"dir",children:[{name:n.fileName+".ts",type:"file",contents:l.pageTypeScript({pageSelector:n.selector,pageTemplate:n.fileName+".html",pageClass:n.className,linkedPages:s,isTabs:"tabs"==o,tabDefaults:i,params:t.get("parameters",[])})},{name:n.fileName+".html",type:"file",contents:a},{name:n.fileName+".scss",type:"file",contents:l.pageSCSS({pageSelector:n.selector})}]})}}),n.multiFlag=!1,window.multiFlag=n.multiFlag,window.compiling=!1,g}n.multiFlag=!0,window.multiFlag=n.multiFlag,window.compiling=!0;var s=[{name:"appComponentTypeScript",url:"/tmpl/ionic2-export-templates/src/app/app.component.ts"},{name:"appHTML",url:"/tmpl/ionic2-export-templates/src/app/app.html"},{name:"appModuleTypeScript",url:"/tmpl/ionic2-export-templates/src/app/app.module.ts"},{name:"appSCSS",url:"/tmpl/ionic2-export-templates/src/app/app.scss"},{name:"appMainTypeScript",url:"/tmpl/ionic2-export-templates/src/app/main.ts"},{name:"indexHTML",url:"/tmpl/ionic2-export-templates/src/index.html"},{name:"pageTypeScript",url:"/tmpl/ionic2-export-templates/src/pages/page.ts"},{name:"pageSCSS",url:"/tmpl/ionic2-export-templates/src/pages/page.scss"}];return i(function(e,t){if(l)e(a());else{var n=s.map(function(e){return o({url:e.url,method:"GET",transformResponse:[function(e){return e}]})});i.all(n).then(function(t){e(a(t))},function(e){t(e)})}})}};return c}]),a.factory("LightDom",[function(){function e(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function t(e){var t,i=!1,a=!1,r=null,l=[],s=[];if(-1==e.indexOf("<"))return[e];for(var d=0;d<e.length;d+=1)"<"==e[d]&&0==i?(l.push(d),d>0&&0==a&&(t=e.substring(l[l.length-2]+1,l[l.length-1]),t.trim().length>0&&s.push(t.trim())),a=!0):'"'!=e[d]&&"'"!=e[d]||0!=i?e[d]==r&&1==i?(i=!1,r=null):">"==e[d]&&0==i&&(l.push(d),s.push(e.substring(l[l.length-2],l[l.length-1]+1)),a=!1):(i=!0,r=e[d]);return s.map(function(e){if(["img","input","hr","br"].indexOf(o(e))>=0&&"selfclose"!==n(e)){var t=e.lastIndexOf(">");return e.slice(0,t)+"/"+e.slice(t)}return e})}function n(e){return e=e.trim(),-1==e.indexOf("<")?"text":"<"==e[0]&&"/"!==e.slice(1).trim()[0]&&"/"!==e.slice(0,-1).trim()[e.slice(0,-1).trim().length-1]?"open":"<"==e[0]&&"/"==e.slice(1).trim()[0]?"close":"<"==e[0]&&"/"==e.slice(0,-1).trim()[e.slice(0,-1).trim().length-1]?"selfclose":null}function i(e){var t=!1,i=null,o=[],a="",r="",l="name",s=n(e);if("text"==s||"close"==s)return[];if(e=e.trim().slice(1,-1).trim(),"/"==e[e.length-1]&&(e=e.slice(0,-1).trim()),-1==e.indexOf(" "))return[];e=e.slice(e.indexOf(" ")+1);for(var d=0;d<e.length;d+=1)if("name"==l){if(" "==e[d]&&0==a.length)continue;if("="===e[d]||" "===e[d]){o.push({name:a,value:null,quoteType:null}),a=""," "==e[d]&&(l="waitforvalue"),"="==e[d]&&(l="value");continue}a+=e[d],d==e.length-1&&o.push({name:a,value:null,quoteType:null})}else{if("waitforvalue"==l){if(" "==e[d])continue;if("="==e[d]){l="value";continue}l="name",a=e[d];continue}if("value"==l)if(0==r.length){if(1==t){if(e[d]==i){o[o.length-1].value=r,o[o.length-1].quoteType=i,r="",l="name",t=!1;continue}r+=e[d];continue}if(" "==e[d])continue;if('"'==e[d]){t=!0,i='"';continue}if("'"==e[d]){t=!0,i="'";continue}if(0==r.length){r+=e[d];continue}}else if(r.length>0){if(1==t){if(e[d]==i){o[o.length-1].value=r,o[o.length-1].quoteType=i,r="",l="name",t=!1;continue}r+=e[d];continue}if(" "==e[d]||d==e.length-1){" "!==e[d]&&(r+=e[d]),o[o.length-1].value=r,o[o.length-1].quoteType="",r="",l="name";continue}r+=e[d]}}return o}function o(e){e=e.trim();var t=n(e);return"open"==t||"selfclose"==t?e.slice(1).trim().split(" ")[0].split(">")[0].split("/")[0].trim():"close"==t?e.slice(1).trim().slice(1,-1).trim():null}function a(e){function t(e,t){var n=!1;return d.forEach(function(i,o){n||i&&i.name==e&&i.level==t&&(n=i.index,d[o]=null)}),n}var a=null,r=null,l=0,s=null,d=[],c=[];return e.forEach(function(e,u){a=n(e),s=o(e);var p=null;if("close"!==a&&"open"==r?l+=1:"close"==a&&"open"!==r&&(l-=1),"open"==a)d.push({name:s,level:l,index:u});else if("close"==a){var g=t(s,l);g!==!1&&(c[g].closeIndex=u)}else("selfclose"==a||"text"==a)&&(p=u);c.push({name:s,type:a,attributes:i(e),level:l,index:u,closeIndex:p,text:e}),r=a}),c}function r(t,n,i){var o=this;this.objType="LightDOMElement",this.tagName=t,this.attributes=n,this.attributes.push({name:"internalid",value:e(),quoteType:'"'}),this.children=[],this.parent=null,this.type=i,this.classList={add:function(e){o.addClass(e)}},this.setStyleVal=function(e,t){if(e&&("string"!=typeof e||t)){var n;"string"==typeof e?(n={},n[e]=t):n=e;for(var e in n){var t=n[e],i=o.attributes.find(function(e){return"style"==e.name});if(i){var a=i.value.split(";"),n={};a.forEach(function(e){e&&(n[e.split(":")[0].trim()]=(e.split(":")[1]||"").trim())}),n[e]=t;var r="";for(var l in n)r+=l+":"+n[l]+";";i.value=r}else o.attributes.push({name:"style",value:e+":"+t+";",quoteType:'"'})}}},this.getAttribute=function(e){var t=o.attributes.find(function(t){return t.name==e});return t?t.value:void 0},this.setAttribute=function(e,t){var n=o.attributes.find(function(t){return t.name==e});n?n.value=t:o.attributes.push({name:e,value:t,quoteType:'"'})},this.removeAttribute=function(e){o.attributes=o.attributes.filter(function(t){return t.name!==e})},this.addClass=function(e){var t=o.attributes.find(function(e){return"class"==e.name});if(t){var n=t.value.split(" ");-1==n.indexOf(e)&&(t.value+=" "+e)}else o.attributes.push({name:"class",value:e,quoteType:'"'})},this.removeClass=function(e){var t=o.attributes.find(function(e){return"class"==e.name});if(t){var n=t.value.split(" ").filter(function(t){return t!==e});n.length>0?t.value=n.join(" "):o.attributes=o.attributes.filter(function(e){return"class"!==e.name})}},this.querySelector=function(e){function t(e){!a&&e.children.forEach(function(e){e.getAttribute("internalid")==r&&(a=e),t(e)})}var n=angular.element(o.toString(0,!0,!0))[0],i=n.querySelector(e),a=null;if(i){var r=i.getAttribute("internalid");return t(o),a}return null},this.querySelectorAll=function(e){function t(e){"LightDOMElement"==e.objType&&e.children.forEach(function(e){"LightDOMElement"==e.objType&&r.includes(e.getAttribute("internalid"))&&a.push(e),t(e)})}var n=angular.element(o.toString(0,!0,!0))[0],i=n.querySelectorAll(e),a=[];if(i.length>0){var r=Array.prototype.map.call(i,function(e){return e.getAttribute("internalid")});return t(o),a}return[]},this.appendChild=function(e,t){return"open"!==o.type?void console.warn("LightDOM: could not append child to tag of type: "+o.type):void("object"!=typeof e||"LightDOMElement"!==e.objType&&"LightDOMText"!==e.objType?"object"==typeof e&&"Array"===e.constructor.name&&e.every(function(e){return"object"==typeof e&&("LightDOMElement"===e.objType||"LightDOMText"===e.objType)})?e.forEach(function(e){e.parent=o,o.children.push(e)}):"string"==typeof e?o.appendChild(d.element(e,t)):console.warn("LightDOM: could not push one or more children:",e):(e.parent=o,o.children.push(e)))},this.toString=function(e,t,n){e||(e=0),t||(t=!1),n||(n=!1);for(var i="",a=0;e>a;a++)i+="__tab__";var r=i;return r+="<"+o.tagName+" ",o.attributes.forEach(function(e){if(0!=t||"internalid"!=e.name){if(n){var i=new RegExp("["+s.join("").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"]","g");r+=e.name.replace(i,"")}else r+=e.name;if("string"==typeof e.value){"undefined"==String(e.quoteType)&&console.warn("LightDOM: attribute quoteType is undefined: "+JSON.stringify(e)+". defaulting to double quotes.");var o="undefined"==String(e.quoteType)?'"':e.quoteType;r+="="+o+e.value+o+" "}else r+=" "}}),r=r.trim(),r+="selfclose"==o.type?" />":">",o.children.length>0&&(o.children.forEach(function(i){r+="\n"+i.toString(e+1,t,n)}),r+="\n"+i),"selfclose"!==o.type&&(r+="</"+o.tagName+">"),r.replace(/__tab__/g,"	")}}function l(e){var t=this;this.objType="LightDOMText",this.contents=e,this.toString=function(e){e||(e=0);for(var n="",i=0;e>i;i++)n+="__tab__";return n+t.contents}}var s=["]","[",")","(","*","#",":","@"],d={element:function(e,n){var i=n;if(i){i=JSON.parse(JSON.stringify(i));var o=i[0].index,s=i[0].level;i.forEach(function(e){e.index-=o,e.closeIndex-=o,e.level-=s})}else i=a(t(e));var d=[];return i.forEach(function(e){"open"!=e.type&&"selfclose"!=e.type&&"text"!=e.type||0!=e.level||("text"!==e.type?(d.push(new r(e.name,e.attributes,e.type)),e.closeIndex-e.index>1&&d[d.length-1].appendChild("",i.slice(e.index+1,e.closeIndex))):d.push(new l(e.text)))}),d}};return window.LightDom=d,d}]),a.factory("Ionic2Renderer",["LightDom",function(e){var t={renderPageController:function(e){},renderAsHtml:function(e,t){function n(e){console.log(e.type);var i=e.ionic2.generateDomNode(e),o=e.ionic2.getDomNodeForInsertingChildren(i,e);return t&&t.getId()===e.getId()?i:(e.children.forEach(function(e){n(e).forEach(function(e){o.appendChild(e)})}),i)}window.ionic2compiling=!0;var i=n(e),o=i.map(function(e){return e.toString()}).join(""),a=html_beautify(o,{indent_size:2,unformatted:["textarea"]});return a=a.replace(/\sclass\=\"\s*\"/g,""),window.ionic2compiling=!1,a}};return window.Ionic2Renderer=t,t}])}();